<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Mastering Microservices: A Hands-On Tutorial with Node.js, RabbitMQ, Nginx, and Docker - DEV Community</title>
      <meta name="last-updated" content="2024-12-30 20:45:35 UTC">
      <meta name="user-signed-in" content="true">
      <meta name="head-cached-at" content="1735591535">
      <meta name="environment" content="production">
      <link rel="stylesheet" href="https://assets.dev.to/assets/minimal-c6135f2dad61919fb9ad5b7407a14cce2369a2effce76540cfc808396cfc3a85.css" media="all" id="main-minimal-stylesheet" />
<link rel="stylesheet" href="https://assets.dev.to/assets/views-4dd5770daa5d9d443ed73a724fb1913af9b093295bf1a72307f0fb322e5df1d9.css" media="all" id="main-views-stylesheet" />
<link rel="stylesheet" href="https://assets.dev.to/assets/crayons-f94476cf86ce9153627fd53a77e651ec54b82b6be20ddb1bf93e3dd40b81aeab.css" media="all" id="main-crayons-stylesheet" />

      <script src="https://assets.dev.to/assets/base-e0fa4f0ebd0f1ec157e6b07c08f9222f8c0cca3d10cfde4cd8c951b43985b10b.js" defer="defer"></script>
<script src="https://assets.dev.to/assets/application-147cebefc5c4cddde055e8f5eb0055e811469b08405170e2411fbd7944b5ac04.js" defer="defer"></script>
<script src="https://assets.dev.to/assets/baseInitializers-bc498cfd7bb7d2a2da59d68d0b2055cc2dd26fee3669ab88edbb396d37bc3369.js" defer="defer"></script>
<script src="https://assets.dev.to/assets/baseTracking-b6bf73e5ee66633e151e7d5b7c6bbccedfa4c59e3615be97b98c4c0f543ddae7.js" defer="defer"></script>

        <meta name="search-script" content="https://assets.dev.to/assets/Search-cc5e8a352578866203771def747f37c3ec6a0869de0458328e0fcba3d5d2fceb.js">
        <script src="https://assets.dev.to/assets/onboardingRedirectCheck-8359e821e99cc5fdeeefe3e1ad3321b60f7d4fcbc565a3a086d07aa44956c9e6.js" defer="defer"></script>
<script src="https://assets.dev.to/assets/contentDisplayPolicy-8357f70304be36295d2c97c56ac74a1bc1706b22ceebcce6f9242064d313826d.js" defer="defer"></script>
      
    <link rel="canonical" href="https://dev.to/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f" />
    <meta name="description" content="Microservices architecture is a smart way to design applications by breaking them into smaller,...">
    <meta name="keywords" content="software, coding, development, engineering, inclusive, community">

    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://dev.to/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f" />
    <meta property="og:title" content="Mastering Microservices: A Hands-On Tutorial with Node.js, RabbitMQ, Nginx, and Docker" />
    <meta property="og:description" content="Microservices architecture is a smart way to design applications by breaking them into smaller,..." />
    <meta property="og:site_name" content="DEV Community" />
    <meta name="twitter:site" content="@thepracticaldev">
    <meta name="twitter:creator" content="@davydocsurg">
    <meta name="twitter:title" content="Mastering Microservices: A Hands-On Tutorial with Node.js, RabbitMQ, Nginx, and Docker">
    <meta name="twitter:description" content="Microservices architecture is a smart way to design applications by breaking them into smaller,...">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:widgets:new-embed-design" content="on">
    <meta name="robots" content="max-snippet:-1, max-image-preview:large, max-video-preview:-1">
      <meta property="og:image" content="https://media2.dev.to/dynamic/image/width=1000,height=500,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Ftwvl76ydzbf3dsr0tgqh.png" />
      <meta name="twitter:image:src" content="https://media2.dev.to/dynamic/image/width=1000,height=500,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Ftwvl76ydzbf3dsr0tgqh.png">

      <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
      <link rel="icon" type="image/x-icon" href="https://media2.dev.to/dynamic/image/width=32,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png" />
      <link rel="apple-touch-icon" href="https://media2.dev.to/dynamic/image/width=180,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png">
      <link rel="apple-touch-icon" sizes="152x152" href="https://media2.dev.to/dynamic/image/width=152,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png">
      <link rel="apple-touch-icon" sizes="180x180" href="https://media2.dev.to/dynamic/image/width=180,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png">
      <link rel="apple-touch-icon" sizes="167x167" href="https://media2.dev.to/dynamic/image/width=167,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png">
      <link href="https://media2.dev.to/dynamic/image/width=192,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png" rel="icon" sizes="192x192" />
      <link href="https://media2.dev.to/dynamic/image/width=128,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png" rel="icon" sizes="128x128" />
      <meta name="apple-mobile-web-app-title" content="dev.to">
      <meta name="application-name" content="dev.to">
      <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
      <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">
      <link rel="search" href="https://dev.to/open-search.xml" type="application/opensearchdescription+xml" title="DEV Community" />

      <meta property="forem:name" content="DEV Community" />
      <meta property="forem:logo" content="https://media2.dev.to/dynamic/image/width=512,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png" />
      <meta property="forem:domain" content="dev.to" />
    
  </head>
      <body
        class="sans-serif-article-body default-header"
        data-user-status="logged-in"
        data-community-name="DEV Community"
        data-subscription-icon="https://assets.dev.to/assets/subscription-icon-805dfa7ac7dd660f07ed8d654877270825b07a92a03841aa99a1093bd00431b2.png"
        data-locale="en"
        data-honeybadger-key="hbp_nqu4Y66HuEKlD6YRGssZuRQnPOjDm50J8Zkr"
        data-deployed-at="2024-12-30T20:33:43Z"
        data-latest-commit-id="d43eca4b22c366c18feafb10870aedb5e581a729"
        data-ga-tracking="UA-71991109-1"
        data-cookie-banner-user-context="logged_out_only"
        data-cookie-banner-platform-context="off"
        data-algolia-id="PRSOBFP46H"
        data-algolia-search-key="9aa7d31610cba78851c9b1f63776a9dd"
        data-algolia-display="true"
        data-ga4-tracking-id="G-TYEM8Y3JN3">
        <link rel="stylesheet" href="https://assets.dev.to/assets/minimal-c6135f2dad61919fb9ad5b7407a14cce2369a2effce76540cfc808396cfc3a85.css" media="all" id="secondary-minimal-stylesheet" />
<link rel="stylesheet" href="https://assets.dev.to/assets/views-4dd5770daa5d9d443ed73a724fb1913af9b093295bf1a72307f0fb322e5df1d9.css" media="all" id="secondary-views-stylesheet" />
<link rel="stylesheet" href="https://assets.dev.to/assets/crayons-f94476cf86ce9153627fd53a77e651ec54b82b6be20ddb1bf93e3dd40b81aeab.css" media="all" id="secondary-crayons-stylesheet" />

        <div id="body-styles">
          <style>
            :root {
              --accent-brand-lighter-rgb: 80, 99, 301;
              --accent-brand-rgb: 59, 73, 223;
              --accent-brand-darker-rgb: 47, 58, 178;
            }
          </style>
        </div>
          <script>
  try {
    const bodyClass = localStorage.getItem('config_body_class');
    const userString = localStorage.getItem('current_user');

    if (bodyClass) {
      document.body.className = bodyClass;

      if (bodyClass.includes('dark-theme')) {
        document.getElementById('body-styles').innerHTML = '<style>:root{color-scheme:dark;--theme-secondary-color: #cedae2;--theme-container-background: #141f2d;--theme-container-accent-background: #202c3d;--theme-container-background-hover: #1c2c3f;--theme-container-box-shadow: none;--theme-container-border: 1px solid #22303f;--theme-social-icon-invert: invert(100%);--theme-color: #ffffff;--base: #f9f9f9;--base-inverted: #000;--base-100: var(--base);--base-90: #efefef;--base-80: #d6d6d7;--base-70: #bdbdbd;--base-60: #a3a3a3;--base-50: #8a8a8a;--base-40: #717171;--base-30: #575757;--base-20: #3d3d3d;--base-10: #242424;--base-0: #090909;--accent-brand-lighter: rgb(var(--indigo-400));--accent-brand: rgb(var(--indigo-500));--accent-brand-darker: rgb(var(--indigo-600));--accent-success: rgb(var(--green-600));--accent-success-darker: rgb(var(--green-700));--accent-success-lighter: rgb(var(--green-500));--accent-success-a10: rgba(var(--green-600), 0.2);--accent-warning: rgb(var(--yellow-500));--accent-warning-darker: rgb(var(--yellow-600));--accent-warning-lighter: rgb(var(--yellow-400));--accent-warning-a10: rgba(var(--yellow-500), 0.2);--accent-danger: rgb(var(--red-600));--accent-danger-darker: rgb(var(--red-700));--accent-danger-lighter: rgb(var(--red-500));--accent-danger-a10: rgba(var(--red-600), 0.2);--body-bg: rgb(var(--black));--body-color: rgb(var(--grey-50));--body-color-inverted: rgb(var(--black));--card-bg: rgb(var(--grey-900));--card-color: rgb(var(--grey-50));--card-color-secondary: rgb(var(--grey-300));--card-color-tertiary: rgb(var(--grey-400));--card-secondary-bg: rgb(var(--grey-900));--card-secondary-color: rgb(var(--grey-200));--card-tertiary-bg: rgb(var(--grey-800));--card-tertiary-bg-hover: rgba(var(--grey-800), 0.9);--card-border: rgba(var(--white), 0.15);--card-secondary-border: rgba(var(--white), 0.1);--header-bg: rgb(var(--grey-900));--header-shadow: rgb(var(--black));--footer-bg: rgb(var(--grey-900));--footer-color: rgb(var(--grey-400));--link-bg-hover-alt: rgba(var(--base-inverted));--link-color-current: var(--base-100);--link-color-secondary: var(--base-70);--link-color-secondary-hover: var(--base-80);--link-bg-current: var(--card-bg);--button-primary-bg: var(--accent-brand-darker);--button-primary-bg-hover: var(--accent-brand);--button-primary-color: rgb(var(--white));--button-primary-color-hover: rgb(var(--white));--button-primary-inverted-bg: var(--accent-brand);--button-primary-inverted-bg-hover: var(--accent-brand-lighter);--button-primary-inverted-color: var(--base-0);--button-primary-inverted-color-hover: var(--base-0);--button-secondary-bg: var(--base-20);--button-secondary-bg-hover: var(--base-30);--button-secondary-color: var(--base-80);--button-secondary-color-hover: var(--base-100);--button-outlined-bg: transparent;--button-outlined-bg-hover: rgba(255, 255, 255, 0.035);--button-outlined-border: var(--base-20);--button-outlined-border-hover: var(--base-30);--button-outlined-color: var(--base-80);--button-outlined-color-hover: var(--base-100);--button-ghost-bg: transparent;--button-ghost-bg-hover: rgba(255, 255, 255, 0.035);--button-ghost-color: var(--base-80);--button-ghost-color-hover: var(--base-100);--button-ghost-dimmed-color: var(--base-60);--button-ghost-dimmed-color-hover: var(--base-100);--button-ghost-inverted-bg: transparent;--button-ghost-inverted-bg-hover: rgba(0, 0, 0, 0.1);--button-ghost-inverted-color: var(--base-30);--button-ghost-inverted-color-hover: var(--base-10);--form-bg: rgb(var(--black));--form-bg-focus: rgb(var(--black));--form-border: rgb(var(--grey-700));--form-border-hover: rgb(var(--grey-600));--form-border-focus: var(--focus);--form-placeholder-color: rgb(var(--grey-600));--label-primary: rgb(var(--grey-50));--label-secondary: rgb(var(--grey-30));--snackbar-bg: rgb(var(--grey-50));--snackbar-color: rgb(var(--grey-900));--tab-color: rgb(var(--grey-100));--tab-color-hover: var(--accent-brand-lighter);--tab-color-current: rgb(var(--grey-50));--tab-bg-hover: rgba(var(--accent-brand-rgb), 0.2);--tab-bg-current: rgb(var(--accent-brand));--tag-color: rgb(var(--grey-300));--tag-color-hover: rgb(var(--grey-100));--tag-bg: rgba(var(--grey-50), 0.05);--tag-bg-hover: rgba(var(--grey-50), 0.05);--tag-prefix: rgba(var(--grey-50), 0.6);--tag-prefix-hover: rgb(var(--grey-50));--tag-onboarding-bg: var(--grey-900);--tag-onboarding-border: var(--grey-700);--story-comments-bg: rgb(var(--grey-800));--story-comments-bg-top: rgba(var(--grey-800), 0);--story-comments-bg-bottom: rgba(var(--grey-800), 1);--select-icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDE2TDYgMTBIMThMMTIgMTZaIiBmaWxsPSIjYzJjNmNhIi8+Cjwvc3ZnPg==);--reaction-like-color: rgb(var(--red-500));--reaction-like-bg: rgba(var(--red-500), 0.1);--reaction-custom-color: rgb(var(--green-600));--reaction-custom-bg: rgb(var(--green-600), 0.1);--reaction-save-color: rgb(var(--indigo-500));--reaction-save-bg: rgba(var(--indigo-500), 0.1);--reaction-comment-color: rgb(var(--yellow-500));--reaction-comment-bg: rgba(var(--yellow-500), 0.1);--code-inline-bg: rgb(var(--white), 0.1);--content-row-hover-bg: rgba(var(--base-20))}:root{--btn-bg: transparent;--btn-bg-hover: rgba(var(--indigo-900), 0.75);--btn-color: rgb(var(--grey-300));--btn-color-hover: rgb(var(--indigo-300));--btn-current-bg: rgb(var(--grey-700));--btn-current-color: rgb(var(--grey-50));--btn-primary-bg: rgb(var(--indigo-700));--btn-primary-bg-hover: rgb(var(--indigo-600));--btn-primary-color: rgba(var(--white), 0.9);--btn-primary-color-hover: rgb(var(--white));--btn-secondary-bg: rgba(var(--indigo-600), 0.4);--btn-secondary-bg-hover: rgb(var(--indigo-700));--btn-secondary-color: rgb(var(--indigo-200));--btn-secondary-color-hover: rgb(var(--white));--btn-destructive-bg: transparent;--btn-destructive-bg-hover: rgba(var(--red-500), 0.3);--btn-destructive-color: rgb(var(--red-400));--btn-destructive-color-hover: rgb(var(--red-300));--btn-primary-destructive-bg: rgb(var(--red-700));--btn-primary-destructive-bg-hover: rgb(var(--red-600));--btn-primary-destructive-color: rgb(var(--white));--btn-primary-destructive-color-hover: rgb(var(--white));--link-bg: transparent;--link-bg-hover: rgba(var(--indigo-900), 0.75);--link-color: rgb(var(--grey-300));--link-color-hover: rgb(var(--indigo-300));--link-current-bg: rgb(var(--grey-700));--link-current-color: rgb(var(--grey-50));--link-branded-bg: transparent;--link-branded-bg-hover: rgba(var(--indigo-900), 0.75);--link-branded-color: rgb(var(--indigo-400));--link-branded-color-hover: rgb(var(--indigo-300));--cta-bg: transparent;--cta-bg-hover: rgba(var(--indigo-900), 0.75);--cta-color: rgb(var(--grey-300));--cta-color-hover: rgb(var(--indigo-300));--cta-border: rgb(var(--grey-500));--cta-border-hover: rgb(var(--indigo-400));--cta-branded-bg: transparent;--cta-branded-bg-hover: rgb(var(--indigo-600));--cta-branded-color: rgb(var(--indigo-400));--cta-branded-color-hover: rgb(var(--white));--cta-branded-border: rgb(var(--indigo-400));--cta-branded-border-hover: rgb(var(--indigo-500));--tooltip-bg: rgba(var(--white), 0.9);--tooltip-color: rgb(var(--grey-800));--indicator-bg: rgb(var(--grey-600));--indicator-color: rgb(var(--grey-200));--indicator-subtle-bg: rgb(var(--grey-700));--indicator-subtle-color: rgb(var(--grey-200));--indicator-success-bg: rgb(var(--green-700));--indicator-success-color: rgb(var(--green-50));--indicator-warning-bg: rgb(var(--yellow-400));--indicator-warning-color: rgb(var(--yellow-900));--indicator-danger-bg: rgb(var(--red-700));--indicator-danger-color: rgb(var(--red-50));--indicator-info-bg: rgb(var(--indigo-700));--indicator-info-color: rgb(var(--indigo-100));--list-item-bg-hover: rgb(var(--grey-800));--checkbox-default-bg: rgb(var(--grey-800));--modal-bg: rgb(var(--grey-900));--modal-backdrop: rgba(var(--black), 0.6);--modal-danger-border-color: rgb(var(--red-400));--color-primary: rgb(var(--grey-50));--color-secondary: rgb(var(--grey-400));--pill-bg: transparent;--pill-bg-hover: rgb(var(--grey-800));--pill-color: rgb(var(--grey-200));--pill-color-hover: rgb(var(--grey-50));--pill-border: rgb(var(--grey-500));--pill-border-hover: rgb(var(--grey-200));--swatch-border-color: rgb(var(--white), 0.2);--toggle-rail-bg: rgb(var(--grey-700));--toggle-rail-checked-bg: rgb(var(--green-500));--toggle-knob-bg: rgb(var(--white));--selected-date-color: var(--body-color);--selected-range-color: var(--body-color-inverted);--tag-item-bg-hover: rgba(var(--indigo-900), 0.5);--subtract-color: rgb(var(--red-200));--subtract-color-hover: rgb(var(--white));--subtract-bg: rgba(var(--red-600), 0.4);--subtract-bg-hover: rgb(var(--red-600));--plus-color: rgb(var(--green-200));--plus-color-hover: rgb(var(--white));--plus-bg: rgba(var(--green-600), 0.4);--plus-bg-hover: rgb(var(--green-600));--tag-hash: rgb(var(--grey-500));--tag-name: rgb(var(--grey-50));--add-tag-hash: rgb(var(--grey-200));--focus: var(--accent-brand-lighter);--divider: rgb(var(--grey-700));--shadow-1: 0 10px 15px -3px rgba(var(--black), 0.5), 0 4px 6px -2px rgba(var(--black), 0.25), inset 0 0 0 1px rgba(var(--white), 0.1);--shadow-2: 0 20px 25px -5px rgba(var(--black), 0.5), 0 10px 10px -5px rgba(var(--black), 0.25), inset 0 0 0 1px rgba(var(--white), 0.1);--shadow-smooth: 0px 8px 16px rgba(0, 0, 0, 0.05)}</style>';
      }

      if (bodyClass.includes('open-dyslexic-article-body')) { // Preloading custom font for anticipated use
        const link = document.createElement('link');
        link.as = 'font'
        link.rel = 'preload'
        crossorigin = 'anonymous'
        link.href = 'https://assets.dev.to/assets/OpenDyslexic-Regular-cf8f24aa1c9b34b36bb160bb1e3eb6f6e6ab6ec3b43ba558afee2c1c202753ca.otf';
        document.head.appendChild(link);
      }
    }
    if (navigator.userAgent === 'DEV-Native-ios') {
      document.body.classList.add("dev-ios-native-body");
    }
    if (window.frameElement) { // Hide top bar and footer when loaded within iframe
      document.body.classList.add("hidden-shell");
    }
    if (userString && userString.length > 0) {
      const user = JSON.parse(userString)
      const numTags = JSON.parse(user.followed_tags).length
      if (numTags < 6) {
        document.body.classList.add("user-tags-followed-" + numTags);
      } else {
        document.body.classList.add("user-tags-followed-max");
      }
    }
  } catch (e) {
    setTimeout(function () {
      Honeybadger.notify(e);
    }, 1000)
  }
</script>

        <div id="audiocontent" data-podcast="">
          
        </div>
        <div class="navigation-progress" id="navigation-progress"></div>
<header id="topbar" class="crayons-header topbar print-hidden">
  <span id="route-change-target" tabindex="-1"></span>
  <a href="#main-content" class="skip-content-link">Skip to content</a>
  <div class="crayons-header__container">
    <span class="inline-block m:hidden ">
      <button class="c-btn c-btn--icon-alone js-hamburger-trigger mx-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a9w7p08vkb0qrvskg94pu4vge8savztt" class="crayons-icon"><title id="a9w7p08vkb0qrvskg94pu4vge8savztt">Navigation menu</title>
    <path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"></path>
</svg>

      </button>
    </span>
    <a href="/" class="site-logo" aria-label="DEV Community Home">
    <img class="site-logo__img"
         src="https://media2.dev.to/dynamic/image/quality=100/https://dev-to-uploads.s3.amazonaws.com/uploads/logos/resized_logo_UQww2soKuUsjaOGNB38o.png"
         style="aspect-ratio: 10 / 8"
         alt="DEV Community">
</a>


    <div class="crayons-header--search js-search-form" id="header-search">
      <form accept-charset="UTF-8" method="get" action="/search" role="search">
        <div class="crayons-fields crayons-fields--horizontal">
          <div class="crayons-field flex-1 relative">
            <input id="search-input" class="crayons-header--search-input crayons-textfield js-search-input" type="text" id="nav-search" name="q" placeholder="Find related posts..." autocomplete="off" />
            <button type="submit" aria-label="Search" class="c-btn c-btn--icon-alone absolute inset-px right-auto mt-0 py-0">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a4rdp7ri3tde7l99om9n3uy26ucsco34" aria-hidden="true" class="crayons-icon"><title id="a4rdp7ri3tde7l99om9n3uy26ucsco34">Search</title>
    <path d="M18.031 16.617l4.283 4.282-1.415 1.415-4.282-4.283A8.96 8.96 0 0111 20c-4.968 0-9-4.032-9-9s4.032-9 9-9 9 4.032 9 9a8.96 8.96 0 01-1.969 5.617zm-2.006-.742A6.977 6.977 0 0018 11c0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7a6.977 6.977 0 004.875-1.975l.15-.15z"></path>
</svg>

            </button>

            <a class="crayons-header--search-brand-indicator" href="https://www.algolia.com/developers/?utm_source=devto&utm_medium=referral" target="_blank" rel="noopener noreferrer">
                Powered by
                <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="24" height="24" viewBox="0 0 500 500.34" role="img" aria-labelledby="atrwjubk33p8w8m8zgpb3ehmhr65vw3x" aria-hidden="true" class="crayons-icon"><title id="atrwjubk33p8w8m8zgpb3ehmhr65vw3x">Search</title>
  <defs></defs><path class="cls-1" d="M250,0C113.38,0,2,110.16,.03,246.32c-2,138.29,110.19,252.87,248.49,253.67,42.71,.25,83.85-10.2,120.38-30.05,3.56-1.93,4.11-6.83,1.08-9.52l-23.39-20.74c-4.75-4.22-11.52-5.41-17.37-2.92-25.5,10.85-53.21,16.39-81.76,16.04-111.75-1.37-202.04-94.35-200.26-206.1,1.76-110.33,92.06-199.55,202.8-199.55h202.83V407.68l-115.08-102.25c-3.72-3.31-9.43-2.66-12.43,1.31-18.47,24.46-48.56,39.67-81.98,37.36-46.36-3.2-83.92-40.52-87.4-86.86-4.15-55.28,39.65-101.58,94.07-101.58,49.21,0,89.74,37.88,93.97,86.01,.38,4.28,2.31,8.28,5.53,11.13l29.97,26.57c3.4,3.01,8.8,1.17,9.63-3.3,2.16-11.55,2.92-23.6,2.07-35.95-4.83-70.39-61.84-127.01-132.26-131.35-80.73-4.98-148.23,58.18-150.37,137.35-2.09,77.15,61.12,143.66,138.28,145.36,32.21,.71,62.07-9.42,86.2-26.97l150.36,133.29c6.45,5.71,16.62,1.14,16.62-7.48V9.49C500,4.25,495.75,0,490.51,0H250Z"></path>
</svg>

                Algolia
            </a>
          </div>
        </div>
      </form>
    </div>

    <div class="flex items-center h-100 ml-auto">
      <a class="c-link c-link--icon-alone c-link--block m:hidden " id="search-link" aria-label="Search" href="/search">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="anpvitug873rqcowg7r2u77q1fdi8myt" class="crayons-icon"><title id="anpvitug873rqcowg7r2u77q1fdi8myt">Search</title>
    <path d="M18.031 16.617l4.283 4.282-1.415 1.415-4.282-4.283A8.96 8.96 0 0111 20c-4.968 0-9-4.032-9-9s4.032-9 9-9 9 4.032 9 9a8.96 8.96 0 01-1.969 5.617zm-2.006-.742A6.977 6.977 0 0018 11c0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7a6.977 6.977 0 004.875-1.975l.15-.15z"></path>
</svg>

      </a>
        <span class="hidden m:flex ml-auto">
          <a class="c-cta c-cta--branded mr-2 whitespace-nowrap js-policy-article-create" href="/new">
            Create Post
</a>
          <span class="trusted-visible-block">
            <a id="moderation-link" class="c-link c-link--icon-alone c-link--block mx-1" aria-label="Moderation" href="/mod">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="am15ym0prnrrbtx3df1vohwx8zqdfkmk" class="crayons-icon"><title id="am15ym0prnrrbtx3df1vohwx8zqdfkmk">Moderation</title>
    <path d="M3.783 2.826L12 1l8.217 1.826a1 1 0 01.783.976v9.987a6 6 0 01-2.672 4.992L12 23l-6.328-4.219A6 6 0 013 13.79V3.802a1 1 0 01.783-.976zM5 4.604v9.185a4 4 0 001.781 3.328L12 20.597l5.219-3.48A4 4 0 0019 13.79V4.604L12 3.05 5 4.604zM13 10h3l-5 7v-5H8l5-7v5z"></path>
</svg>

            </a>
          </span>
        </span>

        <a href="/notifications" id="notifications-link" class="c-link c-link--icon-alone c-link--block mx-1" aria-label="Notifications">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="afnkxpijuok1297f4yrjlfwzlyl8buvs" class="crayons-icon"><title id="afnkxpijuok1297f4yrjlfwzlyl8buvs">Notifications</title>
    <path d="M20 17h2v2H2v-2h2v-7a8 8 0 1116 0v7zm-2 0v-7a6 6 0 10-12 0v7h12zm-9 4h6v2H9v-2z"></path>
</svg>

          <span class="c-indicator c-indicator--danger hidden" id="notifications-number"></span>
        </a>

        <div class="crayons-header__menu mx-1" id="crayons-header__menu">
          <button type="button" class="c-btn c-btn--icon-alone radius-full p-1" id="member-menu-button" aria-label="Navigation menu" aria-expanded="false">
            <span class="crayons-avatar crayons-avatar--l"><img class="crayons-avatar__image" alt="" id="nav-profile-image" /></span>
          </button>
          <div class="crayons-dropdown left-2 right-2 s:left-auto crayons-header__menu__dropdown inline-block m:-mr-2 top-100">
  <ul class="m-0" id="crayons-header__menu__dropdown__list">
    <li id="user-profile-link-placeholder" class="border-0 border-b-1 border-solid border-base-20 pb-2 mb-2">
      <a href="#" id="first-nav-link" class="c-link c-link--default c-link--block lh-tight">
        <div>
          <span class="fw-medium block">...</span>
          <small class="fs-s opacity-75"></small>
        </div>
      </a>
    </li>

    <li class="js-header-menu-admin-link hidden">
      <a href="/admin" class="c-link c-link--block" data-no-instant>Admin</a>
    </li>
    <li>
      <a href="/dashboard" class="c-link c-link--block">Dashboard</a>
    </li>
    <li>
      <a href="/mod" class="c-link c-link--block trusted-visible-block">Moderator Center</a>
    </li>
    <li class=" js-policy-article-create">
      <a href="/new" class="c-link c-link--block">Create Post</a>
</li>    <li>
      <a href="/readinglist" class="c-link c-link--block">Reading list</a>
    </li>
    <li class="border-0 border-b-1 border-solid border-base-20 pb-2">
      <a href="/settings" class="c-link c-link--block" id="second-last-nav-link">Settings</a>
    </li>

    <li class="pt-2">
      <a href="/signout_confirm" class="c-link c-link--block" id="last-nav-link">Sign Out</a>
    </li>
  </ul>
</div>
<script src="https://assets.dev.to/assets/applyApplicationPolicyToggles-37c2193806422ffad766842f89f0da925cc4e9c35c276317696756a453000e10.js" defer="defer"></script>

        </div>
    </div>
  </div>
    <script>
      // Here we have some scripts we want to get working on before
      // waiting for the page to stream in.

      // Load the current user's pic as quickly as it's available
      var currentUser = localStorage.getItem('current_user')
      var navProfilePic = document.getElementById('nav-profile-image')
      if (currentUser && navProfilePic) {
        navProfilePic.src = JSON.parse(currentUser).profile_image_90;
      }

      // Load notifications count as quickly as it's available.
      // Not if we're on the notifications page itself
      if (
        window.location.pathname !== '/notifications'
      ) {
        var xmlhttp;

        xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
          if (xmlhttp.readyState == XMLHttpRequest.DONE) {
            var count = xmlhttp.response;
            if (isNaN(count)) {
              document
                .getElementById('notifications-number')
                .classList.add('hidden');
            } else if (count != '0' && count != undefined && count != '') {
              document.getElementById('notifications-number').innerHTML =
                xmlhttp.response;
              document
                .getElementById('notifications-number')
                .classList.remove('hidden');
            } else {
              document
                .getElementById('notifications-number')
                .classList.add('hidden');
            }
          }
        };

        xmlhttp.open('GET', '/notifications/counts', true);
        xmlhttp.send();
      }
    </script>
</header>

<div class="hamburger">
  <div class="hamburger__content">
    <header class="hamburger__content__header">
      <h2 class="fs-l fw-bold flex-1 break-word lh-tight">DEV Community</h2>

      <button class="c-btn c-btn--icon-alone js-hamburger-trigger shrink-0" aria-label="Close">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="aek45oot9jft46uk0q49d6ooh4wya30g" aria-hidden="true" class="crayons-icon c-btn__icon"><title id="aek45oot9jft46uk0q49d6ooh4wya30g">Close</title><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636l4.95 4.95z"></path></svg>

      </button>
    </header>

    <div class="p-2 js-navigation-links-container" id="authentication-hamburger-actions">
    </div>
  </div>
  <div class="hamburger__overlay js-hamburger-trigger"></div>
</div>


        <div id="active-broadcast" class="broadcast-wrapper"></div>
<div id="page-content" class="wrapper stories stories-show  articleuser-465107" data-current-page="stories-show">
  <div id="page-content-inner" data-internal-nav="false">
    <div id="page-route-change" class="screen-reader-only" aria-live="polite" aria-atomic="true"></div>

    
<style>
  .html-variant-wrapper { display: none}
</style>


<script src="https://unpkg.com/@webcomponents/webcomponentsjs@2.2.10/webcomponents-loader.js"
        integrity="sha384-3HK5hxQbkFqOIxMbpROlRmRtYl2LBZ52t+tqcjzsmr9NJuOWQxl8RgQSyFvq2lhy"
        crossorigin="anonymous" defer></script>

  <script src="https://assets.dev.to/assets/webShare-0686f0b9ac40589694ef6ae6a6202c44119bc781c254f6cf6d52d8a008461156.js" defer="defer"></script>
<script src="https://assets.dev.to/assets/articlePage-e91bed0487621b06608474cfabffa186165e1f43f05b24581203ccc21e7aa45d.js" defer="defer"></script>
<script src="https://assets.dev.to/assets/articleSignedIn-2c3ca7371c9e07d05eed6164232bbb085fe60dc82a6f55b147148d055d82475a.js" defer="defer"></script>
<script src="https://assets.dev.to/assets/articleModerationTools-face707cf063f8a28e81de6801d7ab0ceb1ac2892d270f65a1625d23960d791f.js" defer="defer"></script>
<script src="https://assets.dev.to/assets/commentDropdowns-7a28d130e5b78d38b30a9495a964003a66bd64fa455fc70b766d69cf06b9ba24.js" defer="defer"></script>


  
<div class="crayons-layout crayons-layout--3-cols crayons-layout--article">
  <aside class="crayons-layout__sidebar-left" aria-label="Article actions">
    <div class="crayons-article-actions print-hidden">
  <div class="crayons-article-actions__inner">

    
<div class="reaction-drawer__outer hoverdown" style="">
  <button
    id="reaction-drawer-trigger"
    aria-label="reaction-drawer-trigger"
    aria-pressed="false"
    class="hoverdown-trigger crayons-reaction pseudo-reaction crayons-tooltip__activator relative">
      <span class="crayons-reaction__icon crayons-reaction__icon--borderless crayons-reaction--like crayons-reaction__icon--inactive" style="width: 40px; height: 40px">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" role="img" aria-hidden="true" class="crayons-icon">
    <g clip-path="url(#clip0_988_3276)">
        <path d="M19 14V17H22V19H18.999L19 22H17L16.999 19H14V17H17V14H19ZM20.243 4.75698C22.505 7.02498 22.583 10.637 20.479 12.992L19.059 11.574C20.39 10.05 20.32 7.65998 18.827 6.16998C17.324 4.67098 14.907 4.60698 13.337 6.01698L12.002 7.21498L10.666 6.01798C9.09103 4.60598 6.67503 4.66798 5.17203 6.17198C3.68203 7.66198 3.60703 10.047 4.98003 11.623L13.412 20.069L12 21.485L3.52003 12.993C1.41603 10.637 1.49503 7.01898 3.75603 4.75698C6.02103 2.49298 9.64403 2.41698 12 4.52898C14.349 2.41998 17.979 2.48998 20.242 4.75698H20.243Z" fill="#525252"></path>
    </g>
    <defs>
        <clipPath id="clip0_988_3276">
        <rect width="24" height="24" fill="white"></rect>
        </clipPath>
    </defs>
</svg>

      </span>
      <span class="crayons-reaction__icon crayons-reaction__icon--borderless crayons-reaction__icon--active" style="width: 40px; height: 40px">
        <img aria_hidden="true" height="24" width="24" src="https://assets.dev.to/assets/heart-plus-active-9ea3b22f2bc311281db911d416166c5f430636e76b15cd5df6b3b841d830eefa.svg" />
      </span>
      <span class="crayons-reaction__count" id="reaction_total_count">
        <span class="bg-base-40 opacity-25 p-2 inline-block radius-default"></span>
      </span>
      <span class="crayons-tooltip__content">
        Add reaction
      </span>
  </button>

  <div class="reaction-drawer" aria-expanded="false">
    <div class="reaction-drawer__container">
        <button
  id="reaction-butt-like"
  name="Like"
  aria-label="Like"
  aria-pressed="false"
  class="crayons-reaction crayons-tooltip__activator relative pt-2 pr-2 pb-1 pl-2"
  data-category="like">
    <span class="crayons-reaction__icon crayons-reaction__icon--inactive p-0">
      <img aria_hidden="true" height="32" width="32" src="https://assets.dev.to/assets/sparkle-heart-5f9bee3767e18deb1bb725290cb151c25234768a0e9a2bd39370c382d02920cf.svg" />
    </span>
      <span class="crayons-reaction__icon crayons-reaction__icon--active p-0">
        <img aria_hidden="true" height="32" width="32" src="https://assets.dev.to/assets/sparkle-heart-5f9bee3767e18deb1bb725290cb151c25234768a0e9a2bd39370c382d02920cf.svg" />
      </span>
    <span class="crayons-reaction__count" id="reaction-number-like"><span class="bg-base-40 opacity-25 p-2 inline-block radius-default"></span></span>

    <span data-testid="tooltip" class="crayons-tooltip__content">
      Like
    </span>
</button>

        <button
  id="reaction-butt-unicorn"
  name="Unicorn"
  aria-label="Unicorn"
  aria-pressed="false"
  class="crayons-reaction crayons-tooltip__activator relative pt-2 pr-2 pb-1 pl-2"
  data-category="unicorn">
    <span class="crayons-reaction__icon crayons-reaction__icon--inactive p-0">
      <img aria_hidden="true" height="32" width="32" src="https://assets.dev.to/assets/multi-unicorn-b44d6f8c23cdd00964192bedc38af3e82463978aa611b4365bd33a0f1f4f3e97.svg" />
    </span>
      <span class="crayons-reaction__icon crayons-reaction__icon--active p-0">
        <img aria_hidden="true" height="32" width="32" src="https://assets.dev.to/assets/multi-unicorn-b44d6f8c23cdd00964192bedc38af3e82463978aa611b4365bd33a0f1f4f3e97.svg" />
      </span>
    <span class="crayons-reaction__count" id="reaction-number-unicorn"><span class="bg-base-40 opacity-25 p-2 inline-block radius-default"></span></span>

    <span data-testid="tooltip" class="crayons-tooltip__content">
      Unicorn
    </span>
</button>

        <button
  id="reaction-butt-exploding_head"
  name="Exploding Head"
  aria-label="Exploding Head"
  aria-pressed="false"
  class="crayons-reaction crayons-tooltip__activator relative pt-2 pr-2 pb-1 pl-2"
  data-category="exploding_head">
    <span class="crayons-reaction__icon crayons-reaction__icon--inactive p-0">
      <img aria_hidden="true" height="32" width="32" src="https://assets.dev.to/assets/exploding-head-daceb38d627e6ae9b730f36a1e390fca556a4289d5a41abb2c35068ad3e2c4b5.svg" />
    </span>
      <span class="crayons-reaction__icon crayons-reaction__icon--active p-0">
        <img aria_hidden="true" height="32" width="32" src="https://assets.dev.to/assets/exploding-head-daceb38d627e6ae9b730f36a1e390fca556a4289d5a41abb2c35068ad3e2c4b5.svg" />
      </span>
    <span class="crayons-reaction__count" id="reaction-number-exploding_head"><span class="bg-base-40 opacity-25 p-2 inline-block radius-default"></span></span>

    <span data-testid="tooltip" class="crayons-tooltip__content">
      Exploding Head
    </span>
</button>

        <button
  id="reaction-butt-raised_hands"
  name="Raised Hands"
  aria-label="Raised Hands"
  aria-pressed="false"
  class="crayons-reaction crayons-tooltip__activator relative pt-2 pr-2 pb-1 pl-2"
  data-category="raised_hands">
    <span class="crayons-reaction__icon crayons-reaction__icon--inactive p-0">
      <img aria_hidden="true" height="32" width="32" src="https://assets.dev.to/assets/raised-hands-74b2099fd66a39f2d7eed9305ee0f4553df0eb7b4f11b01b6b1b499973048fe5.svg" />
    </span>
      <span class="crayons-reaction__icon crayons-reaction__icon--active p-0">
        <img aria_hidden="true" height="32" width="32" src="https://assets.dev.to/assets/raised-hands-74b2099fd66a39f2d7eed9305ee0f4553df0eb7b4f11b01b6b1b499973048fe5.svg" />
      </span>
    <span class="crayons-reaction__count" id="reaction-number-raised_hands"><span class="bg-base-40 opacity-25 p-2 inline-block radius-default"></span></span>

    <span data-testid="tooltip" class="crayons-tooltip__content">
      Raised Hands
    </span>
</button>

        <button
  id="reaction-butt-fire"
  name="Fire"
  aria-label="Fire"
  aria-pressed="false"
  class="crayons-reaction crayons-tooltip__activator relative pt-2 pr-2 pb-1 pl-2"
  data-category="fire">
    <span class="crayons-reaction__icon crayons-reaction__icon--inactive p-0">
      <img aria_hidden="true" height="32" width="32" src="https://assets.dev.to/assets/fire-f60e7a582391810302117f987b22a8ef04a2fe0df7e3258a5f49332df1cec71e.svg" />
    </span>
      <span class="crayons-reaction__icon crayons-reaction__icon--active p-0">
        <img aria_hidden="true" height="32" width="32" src="https://assets.dev.to/assets/fire-f60e7a582391810302117f987b22a8ef04a2fe0df7e3258a5f49332df1cec71e.svg" />
      </span>
    <span class="crayons-reaction__count" id="reaction-number-fire"><span class="bg-base-40 opacity-25 p-2 inline-block radius-default"></span></span>

    <span data-testid="tooltip" class="crayons-tooltip__content">
      Fire
    </span>
</button>

    </div>
  </div>
</div>

<button
  id="reaction-butt-comment"
  aria-label="Jump to Comments"
  aria-pressed="false"
  class="crayons-reaction crayons-reaction--comment crayons-tooltip__activator relative"
  data-category="comment">
    <span class="crayons-reaction__icon crayons-reaction__icon--borderless crayons-reaction__icon--inactive">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-hidden="true" class="crayons-icon">
    <path d="M10 3h4a8 8 0 010 16v3.5c-5-2-12-5-12-11.5a8 8 0 018-8zm2 14h2a6 6 0 000-12h-4a6 6 0 00-6 6c0 3.61 2.462 5.966 8 8.48V17z"></path>
</svg>

    </span>
    <span class="crayons-reaction__count" id="reaction-number-comment" data-count="13">
      <span class="bg-base-40 opacity-25 p-2 inline-block radius-default"></span>
    </span>

    <span data-testid="tooltip" class="crayons-tooltip__content">
      Jump to Comments
    </span>
</button>

<button
  id="reaction-butt-readinglist"
  aria-label="Add to reading list"
  aria-pressed="false"
  class="crayons-reaction crayons-reaction--readinglist crayons-tooltip__activator relative"
  data-category="readinglist">
    <span class="crayons-reaction__icon crayons-reaction__icon--borderless crayons-reaction__icon--inactive">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-hidden="true" class="crayons-icon">
    <path d="M5 2h14a1 1 0 011 1v19.143a.5.5 0 01-.766.424L12 18.03l-7.234 4.536A.5.5 0 014 22.143V3a1 1 0 011-1zm13 2H6v15.432l6-3.761 6 3.761V4z"></path>
</svg>

    </span>
      <span class="crayons-reaction__icon crayons-reaction__icon--borderless crayons-reaction__icon--active">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-hidden="true" class="crayons-icon">
    <path d="M5 2h14a1 1 0 011 1v19.143a.5.5 0 01-.766.424L12 18.03l-7.234 4.536A.5.5 0 014 22.143V3a1 1 0 011-1z"></path>
</svg>

      </span>
    <span class="crayons-reaction__count" id="reaction-number-readinglist"><span class="bg-base-40 opacity-25 p-2 inline-block radius-default"></span></span>

    <span data-testid="tooltip" class="crayons-tooltip__content">
      Save
    </span>
</button>


<button
  id="reaction-butt-boost"
  aria-label="Boost"
  aria-pressed="false"
  class="crayons-reaction crayons-reaction--boost crayons-tooltip__activator relative">
    <span class="crayons-reaction__icon crayons-reaction__icon--borderless crayons-reaction__icon--inactive">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" role="img" aria-hidden="true" class="crayons-icon" width="24" height="24">
  <path transform="translate(24,0) scale(-1,1)" d="M6 4H21C21.5523 4 22 4.44772 22 5V12H20V6H6V9L1 5L6 1V4ZM18 20H3C2.44772 20 2 19.5523 2 19V12H4V18H18V15L23 19L18 23V20Z"></path>
</svg>

    </span>
    <span data-testid="tooltip" class="crayons-tooltip__content">
      Boost
    </span>
</button>


    <div id="mod-actions-menu-btn-area" class="print-hidden trusted-visible-block align-center">
        <button class="crayons-btn crayons-btn--ghost crayons-btn--icon-rounded mod-actions-menu-btn">
          <svg width="24" height="24" class="crayons-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-labelledby="d6cd43ffbad3fe639e2e95c901ee88c8">
            <title id="d6cd43ffbad3fe639e2e95c901ee88c8">Moderation</title>
            <path d="M3.783 2.826L12 1l8.217 1.826a1 1 0 01.783.976v9.987a6 6 0 01-2.672 4.992L12 23l-6.328-4.219A6 6 0 013 13.79V3.802a1 1 0 01.783-.976zM5 4.604v9.185a4 4 0 001.781 3.328L12 20.597l5.219-3.48A4 4 0 0019 13.79V4.604L12 3.05 5 4.604zM13 10h3l-5 7v-5H8l5-7v5z" />
          </svg>
        </button>
    </div>
    <div class="align-center m:relative">
      <button id="article-show-more-button" aria-controls="article-show-more-dropdown" aria-expanded="false" aria-haspopup="true" class="dropbtn crayons-btn crayons-btn--ghost-dimmed crayons-btn--icon-rounded" aria-label="Share post options">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="afa97ocho1ynppqubuni9hbcctlt2pvp" aria-hidden="true" class="crayons-icon dropdown-icon"><title id="afa97ocho1ynppqubuni9hbcctlt2pvp">More...</title><path fill-rule="evenodd" clip-rule="evenodd" d="M7 12a2 2 0 11-4 0 2 2 0 014 0zm7 0a2 2 0 11-4 0 2 2 0 014 0zm5 2a2 2 0 100-4 2 2 0 000 4z"></path></svg>

      </button>

      <div id="article-show-more-dropdown" class="crayons-dropdown side-bar left-2 right-2 m:right-auto m:left-100 s:left-auto mb-1 m:mb-0 top-unset bottom-100 m:top-0 m:bottom-unset">
        <div>
          <button
            id="copy-post-url-button"
            class="flex justify-between crayons-link crayons-link--block w-100 bg-transparent border-0"
            data-postUrl="https://dev.to/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f">
            <span class="fw-bold">Copy link</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" id="article-copy-icon" role="img" aria-labelledby="aapljjc7kjzmvo0nfftom1gxbegypea6" aria-hidden="true" class="crayons-icon mx-2 shrink-0"><title id="aapljjc7kjzmvo0nfftom1gxbegypea6">Copy link</title>
    <path d="M7 6V3a1 1 0 011-1h12a1 1 0 011 1v14a1 1 0 01-1 1h-3v3c0 .552-.45 1-1.007 1H4.007A1 1 0 013 21l.003-14c0-.552.45-1 1.007-1H7zm2 0h8v10h2V4H9v2zm-2 5v2h6v-2H7zm0 4v2h6v-2H7z"></path>
</svg>

          </button>
          <div id="article-copy-link-announcer" aria-live="polite" class="crayons-notice crayons-notice--success my-2 p-1" aria-live="polite" hidden>Copied to Clipboard</div>
        </div>

        <div class="Desktop-only">
          <a
            target="_blank"
            class="crayons-link crayons-link--block"
            rel="noopener"
            href='https://twitter.com/intent/tweet?text=%22Mastering%20Microservices%3A%20A%20Hands-On%20Tutorial%20with%20Node.js%2C%20RabbitMQ%2C%20Nginx%2C%20and%20Docker%22%20by%20%40davydocsurg%20%23DEVCommunity%20https%3A%2F%2Fdev.to%2Fdavydocsurg%2Fmastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f'>
            Share to X
          </a>
          <a
            target="_blank"
            class="crayons-link crayons-link--block"
            rel="noopener"
            href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fdev.to%2Fdavydocsurg%2Fmastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f&title=Mastering%20Microservices%3A%20A%20Hands-On%20Tutorial%20with%20Node.js%2C%20RabbitMQ%2C%20Nginx%2C%20and%20Docker&summary=Microservices%20architecture%20is%20a%20smart%20way%20to%20design%20applications%20by%20breaking%20them%20into%20smaller%2C...&source=DEV%20Community">
            Share to LinkedIn
          </a>
          <a
            target="_blank"
            class="crayons-link crayons-link--block"
            rel="noopener"
            href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fdev.to%2Fdavydocsurg%2Fmastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f">
            Share to Facebook
          </a>
          <a
            target="_blank"
            class="crayons-link crayons-link--block"
            rel="noopener"
            href="https://toot.kytta.dev/?text=https%3A%2F%2Fdev.to%2Fdavydocsurg%2Fmastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f">
            Share to Mastodon
          </a>
        </div>

        <web-share-wrapper shareurl="https://dev.to/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f" sharetitle="Mastering Microservices: A Hands-On Tutorial with Node.js, RabbitMQ, Nginx, and Docker" sharetext="Microservices architecture is a smart way to design applications by breaking them into smaller,..." template="web-share-button">
        </web-share-wrapper>
        <template id="web-share-button">
          <a href="#" class="dropdown-link-row crayons-link crayons-link--block">Share Post via...</a>
        </template>

        <a href="/report-abuse" class="crayons-link crayons-link--block">Report Abuse</a>
      </div>
    </div>
  </div>
</div>

  </aside>

  <main id="main-content" class="crayons-layout__content grid gap-4">
    <div class="article-wrapper">


      <article class="crayons-card crayons-article mb-4"
        id="article-show-container"
        data-article-id="1755905"
        data-article-slug="mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f"
        data-author-id="465107"
        data-author-name="David Chibueze Ndubuisi"
        data-author-username="davydocsurg"
        data-co-author-ids=""
        data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f"
        data-pin-path="/stories/feed/pinned_article"
        data-pinned-article-id=""
        data-published="true"
        data-scheduled="false"
        lang=en
         >
        <header class="crayons-article__header" id="main-title">
            <a class="crayons-article__cover" href="https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Ftwvl76ydzbf3dsr0tgqh.png">
              <img
                src="https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Ftwvl76ydzbf3dsr0tgqh.png"
                style="aspect-ratio: auto 1000 / 420;"
                width="1000" height="420"
                class="crayons-article__cover__image" alt="Cover image for Mastering Microservices: A Hands-On Tutorial with Node.js, RabbitMQ, Nginx, and Docker">
            </a>

          <div class="crayons-article__header__meta">
            <div class="flex s:items-start flex-col s:flex-row">
              <div id="action-space" class="crayons-article__actions mb-4 s:mb-0 s:order-last"></div>
              <div class="flex flex-1 mb-5 items-start">
                <div class="relative">
                    <a href="/davydocsurg"><img class="radius-full align-middle" src="https://media2.dev.to/dynamic/image/width=50,height=50,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F465107%2F9de75c19-16ab-4402-a8a2-cf7db85192d7.jpg" width="40" height="40" alt="David Chibueze Ndubuisi" /></a>
                </div>
                <div class="pl-3 flex-1">
                  <a href="/davydocsurg" class="crayons-link fw-bold">David Chibueze Ndubuisi</a>
                  
                  <p class="fs-xs color-base-60">
                      Posted on <time datetime="2024-02-08T18:18:20Z" class="date-no-year">Feb 8</time>


                  </p>
                </div>
              </div>
            </div>

            <div class="multiple_reactions_engagement">
    <span class="reaction_engagement_like hidden">
      <img src="https://assets.dev.to/assets/sparkle-heart-5f9bee3767e18deb1bb725290cb151c25234768a0e9a2bd39370c382d02920cf.svg" width="24" height="24" />
      <span id="reaction_engagement_like_count">&nbsp;</span>
    </span>
    <span class="reaction_engagement_unicorn hidden">
      <img src="https://assets.dev.to/assets/multi-unicorn-b44d6f8c23cdd00964192bedc38af3e82463978aa611b4365bd33a0f1f4f3e97.svg" width="24" height="24" />
      <span id="reaction_engagement_unicorn_count">&nbsp;</span>
    </span>
    <span class="reaction_engagement_exploding_head hidden">
      <img src="https://assets.dev.to/assets/exploding-head-daceb38d627e6ae9b730f36a1e390fca556a4289d5a41abb2c35068ad3e2c4b5.svg" width="24" height="24" />
      <span id="reaction_engagement_exploding_head_count">&nbsp;</span>
    </span>
    <span class="reaction_engagement_raised_hands hidden">
      <img src="https://assets.dev.to/assets/raised-hands-74b2099fd66a39f2d7eed9305ee0f4553df0eb7b4f11b01b6b1b499973048fe5.svg" width="24" height="24" />
      <span id="reaction_engagement_raised_hands_count">&nbsp;</span>
    </span>
    <span class="reaction_engagement_fire hidden">
      <img src="https://assets.dev.to/assets/fire-f60e7a582391810302117f987b22a8ef04a2fe0df7e3258a5f49332df1cec71e.svg" width="24" height="24" />
      <span id="reaction_engagement_fire_count">&nbsp;</span>
    </span>
</div>


            <h1 class=" fs-3xl m:fs-4xl l:fs-5xl fw-bold s:fw-heavy lh-tight mb-2 longer">
              Mastering Microservices: A Hands-On Tutorial with Node.js, RabbitMQ, Nginx, and Docker
            </h1>
            
                <div class="spec__tags flex flex-wrap">
                </div>
          </div>
        </header>

        <div class="crayons-article__main ">

          <div class="crayons-article__body text-styles spec__body" data-article-id="1755905" id="article-body">
              <p>Microservices architecture is a smart way to design applications by breaking them into smaller, independent componentsmicroserviceseach focusing on a specific task. These microservices operate autonomously, allowing for independent development, deployment, and scaling. This flexibility enables developers to tweak or update specific components without overhauling the entire application. This is in stark contrast to traditional monolithic architecture, where the whole application is treated as one indivisible unit, often leading to inflexibility and scalability issues.</p>

<p>Before diving into this tutorial, if you find microservices mysterious, check out my <a href="https://dev.to/davydocsurg/demystifying-microservices-with-nodejs-a-journey-from-netflixs-semicolon-crisis-to-the-future-of-software-103e">previous article</a> for a detailed explanation. In this hands-on tutorial, we'll build a real-time chat server using Node.js, <a href="http://socket.io/" target="_blank" rel="noopener noreferrer">Socket.io</a>, RabbitMQ, and Docker. Get ready for a practical journey into the world of microservices! Let's begin.</p>

<h2>
  <a name="prerequisites" href="#prerequisites">
  </a>
  <strong>Prerequisites</strong>
</h2>

<p>Before getting into the development process, ensure you have the following prerequisites installed on your machine and ready:</p>

<p><strong>1. Node.js and npm</strong></p>

<p>Make sure you have Node.js and npm (Node Package Manager) installed. You can download them from the <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node.js official website</a>.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="c"># Check Node.js and npm are installed correctly</span>
node <span class="nt">-v</span>
npm <span class="nt">-v</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><strong>2. TypeScript</strong></p>

<p>As we'll be using TypeScript for enhanced development, install it globally using npm.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="c"># Install TypeScript globally</span>
npm <span class="nb">install</span> <span class="nt">-g</span> typescript

<span class="c"># Check TypeScript version</span>
tsc <span class="nt">-v</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><strong>3. Docker</strong></p>

<p>Docker will be used for containerization. Download and install Docker from <a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">Docker's official website</a>.</p>

<p><strong>4. MongoDB</strong></p>

<p>Ensure you have MongoDB installed for data storage. You can download MongoDB Community Server from <a href="https://www.mongodb.com/" target="_blank" rel="noopener noreferrer">MongoDB's official website</a> or use the cloud cluster.</p>

<p><strong>5. Nginx</strong></p>

<p>For setting up Nginx as a reverse proxy, you can follow the installation instructions on <a href="https://nginx.com" target="_blank" rel="noopener noreferrer">Nginx's official documentation</a>.</p>

<p><strong>6. Postman (Optional)</strong></p>

<p>To test the API endpoints, you can use Postman. Download and install Postman from <a href="https://postman.com" target="_blank" rel="noopener noreferrer">Postman's official website</a>.</p>

<p>Once you have these prerequisites in place, you'll be ready to proceed with setting up and developing our microservices-based chat server. Let's move on to the next steps!</p>

<h2>
  <a name="setting-up-the-microservices" href="#setting-up-the-microservices">
  </a>
  <strong>Setting Up the Microservices</strong>
</h2>

<p>Before we start coding, let's understand the project requirements and goals. We aim to build a real-time chat server using a microservices architecture. The key requirements include:</p>

<ul>
<li>
<strong>Real-Time Communication:</strong> The chat server should facilitate instant messaging between users, ensuring a seamless real-time experience.</li>
<li>
<strong>Scalability:</strong> The architecture should support easy scaling of individual components to accommodate a growing user base without affecting the entire system.</li>
<li>
<strong>Modularity:</strong> We want our system to be modular, allowing us to update, deploy, and scale each microservice independently.</li>
</ul>

<p><a href="https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fek94lkzk1a8kj3sa3ie9.png" class="article-body-image-wrapper"><img src="https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fek94lkzk1a8kj3sa3ie9.png" alt="Chat server structure" loading="lazy" width="800" height="721"></a></p>

<p>To achieve our goals, we'll leverage the following technologies and tools:</p>

<ul>
<li>
<p><strong>Node.js for Backend Services</strong></p>

<p>Node.js is a powerful and efficient JavaScript runtime known for its non-blocking, event-driven architecture. It's an excellent choice for building scalable and responsive backend services.</p>
</li>
<li>
<p><strong>TypeScript for Enhanced Development</strong></p>

<p>We'll be using TypeScript to enhance the development process by introducing static typing, making our code more robust and maintainable.</p>
</li>
<li>
<p><strong>Socket.io for Real-Time Communication</strong></p>

<p>Socket.io is a library that enables real-time, bidirectional communication between clients and servers. It's a crucial component for building the real-time chat features of our microservices.</p>
</li>
<li>
<p><strong>Docker for Containerization</strong></p>

<p>Docker simplifies the deployment process by encapsulating each microservice into a container. Containers ensure consistency across different environments, making it easy to deploy and scale our services.</p>
</li>
<li>
<p><strong>MongoDB for Data Storage</strong></p>

<p>MongoDB, a NoSQL database, provides a flexible and scalable solution for storing our chat data. Its document-oriented structure aligns well with the dynamic nature of chat messages.</p>
</li>
<li>
<p><strong>Nginx as a Reverse Proxy</strong></p>

<p>Nginx acts as a reverse proxy to handle incoming requests and distribute them to the appropriate microservices. This enhances security and load balancing and simplifies the overall architecture.</p>
</li>
</ul>

<p>By combining these technologies, we create a robust foundation for our microservices-based chat server. In the next sections, we'll delve into the implementation details. Let's get started!</p>

<h2>
  <a name="parent-folder-structure" href="#parent-folder-structure">
  </a>
  Parent Folder Structure
</h2>

<p>Before we proceed, let's ensure our project structure is organized. Create a housing folder named <code>chat-server</code> that will contain all our microservices. Inside this folder, add the <code>.gitignore</code> file to exclude unnecessary files from version control. Additionally, include a <code>docker-compose.yml</code> file for managing the Docker configurations of our microservices. </p>

<p>Navigate to your preferred directory and use the following commands to achieve this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nb">mkdir </span>chat-server <span class="o">&amp;&amp;</span> <span class="nb">cd </span>chat-server <span class="o">&amp;&amp;</span> <span class="nb">touch</span> .gitignore <span class="o">&amp;&amp;</span> <span class="nb">touch </span>docker-compose.yml
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Now, open the <code>.gitignore</code> file and add the following entries:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="k">**</span>/node_modules
<span class="k">**</span>/.env
<span class="k">**</span>/build
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>These entries ensure that the <code>node_modules</code>, <code>.env</code>, and <code>build</code> folders are excluded from being pushed to GitHub. This organized structure lays the foundation for a streamlined development process as we progress with building our microservices. Now, lets proceed with our User Service.</p>

<h2>
  <a name="user-service" href="#user-service">
  </a>
  <strong>User Service</strong>
</h2>

<p>In this section, we will dive into the development of the User Service, a fundamental component of our microservices architecture. The User Service is responsible for handling user registration, authentication, and the storage of user-related data in MongoDB.</p>

<h3>
  <a name="designing-the-user-service" href="#designing-the-user-service">
  </a>
  <strong>Designing the User Service</strong>
</h3>

<p>We will start by designing the structure of our User Service, creating essential folders and files that will form the backbone of our microservice. This includes configuration settings, controllers for user authentication, a MongoDB user model, Express routes, utility functions for JWT and password handling, and the main server setup.</p>

<p>Heres our User services folder structure:</p>

<p><a href="https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fz8t4oa845d0sjcpcyskk.png" class="article-body-image-wrapper"><img src="https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fz8t4oa845d0sjcpcyskk.png" alt="User service structure" loading="lazy" width="504" height="994"></a></p>

<p>Now, use the following commands to set up your User Service project structure, ensure youre in your projects root directory:</p>

<p>Create and navigate to your <code>user-service</code> folder:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nb">mkdir </span>user-service <span class="o">&amp;&amp;</span> <span class="nb">cd </span>user-service
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Next, create the <code>src</code> folder and navigate to it:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nb">mkdir</span> <span class="nt">-p</span> src/config src/controllers src/services src/database/models src/middleware src/routes src/utils
<span class="nb">cd </span>src
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Create individual files:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nb">touch </span>config/config.ts controllers/AuthController.ts services/RabbitMQService.ts database/models/UserModel.ts database/connection.ts database/index.ts middleware/index.ts routes/authRoutes.ts utils/index.ts server.ts
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Create <code>Dockerfile</code>, <code>.dockerignore</code>, and <code>.env</code> files:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nb">cd</span> ..
<span class="nb">touch </span>Dockerfile .dockerignore .env
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Here is the description for each file and folder's role:</p>

<ul>
<li>
<strong><code>user-service</code> folder:</strong>

<ul>
<li>
<strong>Description:</strong> The main folder for the User Service, houses all related files and folders.</li>
</ul>


</li>

<li>

<strong><code>src</code> folder:</strong>

<ul>
<li>
<strong>Description:</strong> Contains the source code for the User Service, organized into subfolders for different functionalities.</li>
</ul>


</li>

<li>

<strong><code>config</code> folder:</strong>

<ul>
<li>
<strong>Description:</strong> Stores configuration settings for the User Service.</li>
</ul>


</li>

<li>

<strong><code>controllers</code> folder:</strong>

<ul>
<li>
<strong>Description:</strong> Holds the AuthController file and handles registration and login logic.</li>
</ul>


</li>

<li>

<strong><code>services</code> folder:</strong>

<ul>
<li>
<strong>Description:</strong> Holds our RabbitMQService file and is responsible for handling RabbitMQ interactions.</li>
</ul>


</li>

<li>

<strong><code>database</code> folder:</strong>

<ul>
<li>
<strong><code>models</code> folder:</strong>

<ul>
<li>
<strong>Description:</strong> Contains the UserModel file, defining the Mongoose user model.</li>
</ul>


</li>

<li>

<strong><code>connection.ts</code> file:</strong>

<ul>
<li>
<strong>Description:</strong> Manages the connection to the MongoDB database.</li>
</ul>


</li>

<li>

<strong><code>index.ts</code> file:</strong>

<ul>
<li>
<strong>Description:</strong> Acts as the entry point for the database-related functionality.</li>
</ul>


</li>

</ul>

</li>

<li>

<strong><code>middleware</code> folder:</strong>

<ul>
<li>
<strong><code>index.ts</code> file:</strong>

<ul>
<li>
<strong>Description:</strong> Serves as the entry point for middleware-related functionality.</li>
</ul>


</li>

</ul>

</li>

<li>

<strong><code>routes</code> folder:</strong>

<ul>
<li>
<strong><code>authRoutes.ts</code> file:</strong>

<ul>
<li>
<strong>Description:</strong> Defines Express routes for user authentication.</li>
</ul>


</li>

</ul>

</li>

<li>

<strong><code>utils</code> folder:</strong>

<ul>
<li>
<strong><code>index.ts</code> file:</strong>

<ul>
<li>
<strong>Description:</strong> Contains utility functions, such as custom error handler and password-related functions.</li>
</ul>


</li>

</ul>

</li>

<li>

<strong><code>server.ts</code> file:</strong>

<ul>
<li>
<strong>Description:</strong> Serves as the entry point for the Express app setup.</li>
</ul>


</li>

<li>

<strong><code>Dockerfile</code>:</strong>

<ul>
<li>
<strong>Description:</strong> Specifies the Docker instructions for containerizing the User Service.</li>
</ul>


</li>

<li>

<strong><code>.dockerignore</code> file:</strong>

<ul>
<li>
<strong>Description:</strong> Lists files and directories to be excluded from the Docker build context.</li>
</ul>


</li>

<li>

<strong><code>.env</code> file:</strong>

<ul>
<li>
<strong>Description:</strong> Stores environment variables for the User Service.</li>
</ul>


</li>

</ul>

<p>Next, lets set up our environment and install the necessary dependencies for the User Service. Use the following command, ensuring youre in the <code>user-service</code> root directory:</p>

<p>Initialize Node.js project<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>npm init <span class="nt">-y</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Install dependencies<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>npm <span class="nb">install </span>amqplib bcryptjs dotenv express jsonwebtoken mongoose nodemon ts-node typescript validator @types/express @types/validator @types/amqplib @types/bcryptjs @types/jsonwebtoken
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The above command sequence will create a <strong><code>package.json</code></strong> file and install the required Node.js packages for the User Service. Now, let's proceed with setting up TypeScript:</p>

<p>Install TypeScript globally if you don't have it already<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>npm <span class="nb">install</span> <span class="nt">-g</span> typescript
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Initialize TypeScript configuration<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>tsc <span class="nt">--init</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Open the generated <code>tsconfig.json</code> file and update it with the following configuration:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">compilerOptions</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">target</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">es6</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">module</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">commonjs</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">outDir</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./build</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">strict</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">esModuleInterop</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">skipLibCheck</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">include</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
    <span class="dl">"</span><span class="s2">src/**/*</span><span class="dl">"</span>
  <span class="p">],</span>
  <span class="dl">"</span><span class="s2">exclude</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
    <span class="dl">"</span><span class="s2">node_modules</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">tests</span><span class="dl">"</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Now, let's set up the <code>.env</code> file by adding the following content:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight make"><code><span class="nv">NODE_ENV</span><span class="o">=</span><span class="s2">"development"</span>
<span class="nv">PORT</span><span class="o">=</span>8081
<span class="nv">JWT_SECRET</span><span class="o">=</span><span class="s2">"{{YOUR_SECRET_KEY}}"</span>
<span class="nv">MONGO_URI</span><span class="o">=</span><span class="s2">"{{YOUR_MONGODB_URI}}"</span>
<span class="nv">MESSAGE_BROKER_URL</span><span class="o">=</span><span class="s2">"{{YOUR_MESSAGE_BROKER_URL}}"</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Replace <code>YOUR_SECRET_KEY</code> with a strong secret key, <code>YOUR_MONGODB_URI</code> with your MongoDB URI, and <code>YOUR_MESSAGE_BROKER_URL</code> with your RabbitMQ message broker URI. You can obtain it from their <a href="https://www.cloudamqp.com/" target="_blank" rel="noopener noreferrer">official website</a>, by following these steps:</p>

<ol>
<li>Visit <a href="https://www.cloudamqp.com/" target="_blank" rel="noopener noreferrer">CloudAMQPs website</a>, log in or register an account.</li>
<li>Create a new instance with a chosen name, select a region, and create the instance.</li>
<li>Copy the message broker URL from your instance details.</li>
</ol>

<p><a href="https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Ft6ws7deuq55bdcygc0l7.png" class="article-body-image-wrapper"><img src="https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Ft6ws7deuq55bdcygc0l7.png" alt="RabbitMQ website" loading="lazy" width="800" height="481"></a></p>

<p>Finally, lets set up our <code>config.ts</code> filelocated in the <code>src/config</code> folder. Copy and paste the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">config</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">dotenv</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">configFile</span> <span class="o">=</span> <span class="s2">`./.env`</span><span class="p">;</span>
<span class="nf">config</span><span class="p">({</span> <span class="na">path</span><span class="p">:</span> <span class="nx">configFile</span> <span class="p">});</span>

<span class="kd">const</span> <span class="p">{</span> <span class="nx">MONGO_URI</span><span class="p">,</span> <span class="nx">PORT</span><span class="p">,</span> <span class="nx">JWT_SECRET</span><span class="p">,</span> <span class="nx">NODE_ENV</span><span class="p">,</span> <span class="nx">MESSAGE_BROKER_URL</span> <span class="p">}</span> <span class="o">=</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="nx">MONGO_URI</span><span class="p">,</span>
    <span class="nx">PORT</span><span class="p">,</span>
    <span class="nx">JWT_SECRET</span><span class="p">,</span>
    <span class="na">env</span><span class="p">:</span> <span class="nx">NODE_ENV</span><span class="p">,</span>
    <span class="na">msgBrokerURL</span><span class="p">:</span> <span class="nx">MESSAGE_BROKER_URL</span><span class="p">,</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>With this setup, we can start writing our User Service code in TypeScript. Let's get down to business!</p>

<h3>
  <a name="user-model" href="#user-model">
  </a>
  User Model
</h3>

<p>To set up our User model, open your <code>UserModel.ts</code>  file, located in the <code>src/database/models</code>  folder, then copy and paste the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="nx">mongoose</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Schema</span><span class="p">,</span> <span class="nx">Document</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">mongoose</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">validator</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">validator</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kr">interface</span> <span class="nx">IUser</span> <span class="kd">extends</span> <span class="nx">Document</span> <span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">password</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">createdAt</span><span class="p">:</span> <span class="nb">Date</span><span class="p">;</span>
    <span class="nl">updatedAt</span><span class="p">:</span> <span class="nb">Date</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">UserSchema</span><span class="p">:</span> <span class="nx">Schema</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Schema</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
            <span class="na">trim</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Name must be provided</span><span class="dl">"</span><span class="p">],</span>
            <span class="na">minlength</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="na">email</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
            <span class="na">required</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="na">unique</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="na">lowercase</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="na">trim</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="na">validate</span><span class="p">:</span> <span class="p">[</span><span class="nx">validator</span><span class="p">.</span><span class="nx">isEmail</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Please provide a valid email.</span><span class="dl">"</span><span class="p">],</span>
        <span class="p">},</span>
        <span class="na">password</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
            <span class="na">trim</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Password must be provided</span><span class="dl">"</span><span class="p">],</span>
            <span class="na">minlength</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="na">timestamps</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">User</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">model</span><span class="o">&lt;</span><span class="nx">IUser</span><span class="o">&gt;</span><span class="p">(</span><span class="dl">"</span><span class="s2">User</span><span class="dl">"</span><span class="p">,</span> <span class="nx">UserSchema</span><span class="p">);</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">User</span><span class="p">;</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Heres a breakdown of whats going on in the above file:</p>

<ul>
<li>
<strong><code>IUser</code></strong> interface outlines the structure of the User document, including fields like <strong><code>name</code></strong>, <strong><code>email</code></strong>, <strong><code>password</code></strong>, <strong><code>createdAt</code></strong>, and <strong><code>updatedAt</code></strong>.</li>
<li>
<strong><code>UserSchema</code></strong> utilizes Mongoose's <strong><code>Schema</code></strong> class, specifying types and constraints for each User document field.</li>
<li>
<strong><code>name</code></strong> field requires a minimum length of 3 characters and must be trimmed.</li>
<li>
<strong><code>email</code></strong> field is mandatory, unique, and validated as a valid email using <strong><code>validator.isEmail</code></strong>.</li>
<li>
<strong><code>password</code></strong> field is mandatory with a minimum length of 8 characters.</li>
<li>
<strong><code>timestamps: true</code></strong> in the schema adds automatic <strong><code>createdAt</code></strong> and <strong><code>updatedAt</code></strong> fields to track creation and update times.</li>
<li>
<strong><code>User</code></strong> model is created using Mongoose's <strong><code>model</code></strong> function, associating it with <strong><code>IUser</code></strong> interface and <strong><code>UserSchema</code></strong>.</li>
<li>The final step exports the <strong><code>User</code></strong> model for use in other parts of the application.</li>
</ul>

<p>Our User Model defines the structure and validation rules for user documents in MongoDB, providing a foundation for handling user data in the User Service.</p>

<p><strong>Database Connection</strong></p>

<p>Open the <code>connection.ts</code> located in the <code>src/database</code>  folder and add the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="nx">mongoose</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">mongoose</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">config</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../config/config</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">connectDB</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="dl">"</span><span class="s2">Connecting to database...</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">config</span><span class="p">.</span><span class="nx">MONGO_URI</span><span class="p">);</span>
        <span class="k">await</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">MONGO_URI</span><span class="o">!</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="dl">"</span><span class="s2">Database connected</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
        <span class="nx">process</span><span class="p">.</span><span class="nf">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>In the above file, we defined an asynchronous <code>connectDB</code> function that establishes a connection to the MongoDB database. It uses the <code>mongoose.connect</code> method to connect to the database using the MongoDB URI specified in the <code>config</code> file. </p>

<p>Next, open the <code>index.ts</code>  file located in the <code>src/database</code>  folder and export everything by adding the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="nx">User</span><span class="p">,</span> <span class="p">{</span> <span class="nx">IUser</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./models/UserModel</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">connectDB</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./connection</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="p">{</span> <span class="nx">User</span><span class="p">,</span> <span class="nx">IUser</span><span class="p">,</span> <span class="nx">connectDB</span> <span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<h3>
  <a name="authcontroller" href="#authcontroller">
  </a>
  AuthController
</h3>

<p>With our database set up, the next focus is on defining authentication methods within the <code>AuthController.ts</code> file, located in the <code>src/controllers</code> folder. Copy and paste the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="nx">express</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Request</span><span class="p">,</span> <span class="nx">Response</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">jwt</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">jsonwebtoken</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">User</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../database</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ApiError</span><span class="p">,</span> <span class="nx">encryptPassword</span><span class="p">,</span> <span class="nx">isPasswordMatch</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../utils</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">config</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../config/config</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">IUser</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../database</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">jwtSecret</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">JWT_SECRET</span> <span class="k">as</span> <span class="kr">string</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">COOKIE_EXPIRATION_DAYS</span> <span class="o">=</span> <span class="mi">90</span><span class="p">;</span> <span class="c1">// cookie expiration in days</span>
<span class="kd">const</span> <span class="nx">expirationDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">(</span>
    <span class="nb">Date</span><span class="p">.</span><span class="nf">now</span><span class="p">()</span> <span class="o">+</span> <span class="nx">COOKIE_EXPIRATION_DAYS</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span>
<span class="p">);</span>
<span class="kd">const</span> <span class="nx">cookieOptions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">expires</span><span class="p">:</span> <span class="nx">expirationDate</span><span class="p">,</span>
    <span class="na">secure</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">httpOnly</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">register</span> <span class="o">=</span> <span class="k">async </span><span class="p">(</span><span class="nx">req</span><span class="p">:</span> <span class="nx">Request</span><span class="p">,</span> <span class="nx">res</span><span class="p">:</span> <span class="nx">Response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">userExists</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">User</span><span class="p">.</span><span class="nf">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>
        <span class="k">if </span><span class="p">(</span><span class="nx">userExists</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nc">ApiError</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="dl">"</span><span class="s2">User already exists!</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">User</span><span class="p">.</span><span class="nf">create</span><span class="p">({</span>
            <span class="nx">name</span><span class="p">,</span>
            <span class="nx">email</span><span class="p">,</span>
            <span class="na">password</span><span class="p">:</span> <span class="k">await</span> <span class="nf">encryptPassword</span><span class="p">(</span><span class="nx">password</span><span class="p">),</span>
        <span class="p">});</span>

        <span class="kd">const</span> <span class="nx">userData</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">id</span><span class="p">:</span> <span class="nx">user</span><span class="p">.</span><span class="nx">_id</span><span class="p">,</span>
            <span class="na">name</span><span class="p">:</span> <span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
            <span class="na">email</span><span class="p">:</span> <span class="nx">user</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span>
        <span class="p">};</span>

        <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">({</span>
            <span class="na">status</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
            <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">User registered successfully!</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">data</span><span class="p">:</span> <span class="nx">userData</span><span class="p">,</span>
        <span class="p">});</span>
    <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="na">error</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">({</span>
            <span class="na">status</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
            <span class="na">message</span><span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">createSendToken</span> <span class="o">=</span> <span class="k">async </span><span class="p">(</span><span class="nx">user</span><span class="p">:</span> <span class="nx">IUser</span><span class="p">,</span> <span class="nx">res</span><span class="p">:</span> <span class="nx">Response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">id</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">user</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">jwt</span><span class="p">.</span><span class="nf">sign</span><span class="p">({</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">id</span> <span class="p">},</span> <span class="nx">jwtSecret</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">expiresIn</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1d</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">});</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">env</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span><span class="p">)</span> <span class="nx">cookieOptions</span><span class="p">.</span><span class="nx">secure</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">res</span><span class="p">.</span><span class="nf">cookie</span><span class="p">(</span><span class="dl">"</span><span class="s2">jwt</span><span class="dl">"</span><span class="p">,</span> <span class="nx">token</span><span class="p">,</span> <span class="nx">cookieOptions</span><span class="p">);</span>

    <span class="k">return</span> <span class="nx">token</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">login</span> <span class="o">=</span> <span class="k">async </span><span class="p">(</span><span class="nx">req</span><span class="p">:</span> <span class="nx">Request</span><span class="p">,</span> <span class="nx">res</span><span class="p">:</span> <span class="nx">Response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">User</span><span class="p">.</span><span class="nf">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">}).</span><span class="nf">select</span><span class="p">(</span><span class="dl">"</span><span class="s2">+password</span><span class="dl">"</span><span class="p">);</span>
        <span class="k">if </span><span class="p">(</span>
            <span class="o">!</span><span class="nx">user</span> <span class="o">||</span>
            <span class="o">!</span><span class="p">(</span><span class="k">await</span> <span class="nf">isPasswordMatch</span><span class="p">(</span><span class="nx">password</span><span class="p">,</span> <span class="nx">user</span><span class="p">.</span><span class="nx">password</span> <span class="k">as</span> <span class="kr">string</span><span class="p">))</span>
        <span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nc">ApiError</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Incorrect email or password</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="kd">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">createSendToken</span><span class="p">(</span><span class="nx">user</span><span class="o">!</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">({</span>
            <span class="na">status</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
            <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">User logged in successfully!</span><span class="dl">"</span><span class="p">,</span>
            <span class="nx">token</span><span class="p">,</span>
        <span class="p">});</span>
    <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="na">error</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">({</span>
            <span class="na">status</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
            <span class="na">message</span><span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="nx">register</span><span class="p">,</span>
    <span class="nx">login</span><span class="p">,</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The above file contains functions for user registration and login. The <code>register</code> function checks if the user already exists, creates a new user, and responds with success or error messages. The <code>login</code> function verifies user credentials, creates a JWT token, and sends it as a cookie upon successful login. The code ensures a secure and efficient authentication process, with a clear separation of responsibilities.</p>

<h3>
  <a name="routes" href="#routes">
  </a>
  Routes
</h3>

<p>Now, lets define the routes that utilize the controller methods. In the <code>authRoutes.ts</code> file located in the <code>src/routes</code> folder, add the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Router</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">AuthController</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../controllers/AuthController</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">userRouter</span> <span class="o">=</span> <span class="nc">Router</span><span class="p">();</span>

<span class="nx">userRouter</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="dl">"</span><span class="s2">/register</span><span class="dl">"</span><span class="p">,</span> <span class="nx">AuthController</span><span class="p">.</span><span class="nx">register</span><span class="p">);</span>
<span class="nx">userRouter</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="dl">"</span><span class="s2">/login</span><span class="dl">"</span><span class="p">,</span> <span class="nx">AuthController</span><span class="p">.</span><span class="nx">login</span><span class="p">);</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">userRouter</span><span class="p">;</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This file sets up routes for user registration (<code>/register</code>) and user login (<code>/login</code>). These routes are associated with the corresponding methods defined in the <code>AuthController</code>. The <code>Router</code> from Express is used to create and manage these routes. With this setup, our Express app can now handle incoming HTTP requests to these routes and invoke the appropriate controller methods for user registration and login.</p>

<h3>
  <a name="utils" href="#utils">
  </a>
  Utils
</h3>

<p>With our <code>AuthController</code> and routes all set, lets work on our utils. Open the <code>index.ts</code>  file located in the <code>src/utils</code> directory and add the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="nx">bcrypt</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">bcryptjs</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">ApiError</span> <span class="kd">extends</span> <span class="nc">Error</span> <span class="p">{</span>
    <span class="nl">statusCode</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">isOperational</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>

    <span class="nf">constructor</span><span class="p">(</span>
        <span class="nx">statusCode</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span>
        <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span> <span class="o">|</span> <span class="kc">undefined</span><span class="p">,</span>
        <span class="nx">isOperational</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">stack</span> <span class="o">=</span> <span class="dl">""</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="nx">statusCode</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">isOperational</span> <span class="o">=</span> <span class="nx">isOperational</span><span class="p">;</span>
        <span class="k">if </span><span class="p">(</span><span class="nx">stack</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">stack</span> <span class="o">=</span> <span class="nx">stack</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nb">Error</span><span class="p">.</span><span class="nf">captureStackTrace</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="kd">constructor</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">encryptPassword</span> <span class="o">=</span> <span class="k">async </span><span class="p">(</span><span class="nx">password</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">encryptedPassword</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">bcrypt</span><span class="p">.</span><span class="nf">hash</span><span class="p">(</span><span class="nx">password</span><span class="p">,</span> <span class="mi">12</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">encryptedPassword</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">isPasswordMatch</span> <span class="o">=</span> <span class="k">async </span><span class="p">(</span><span class="nx">password</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">userPassword</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">bcrypt</span><span class="p">.</span><span class="nf">compare</span><span class="p">(</span><span class="nx">password</span><span class="p">,</span> <span class="nx">userPassword</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">export</span> <span class="p">{</span> <span class="nx">ApiError</span><span class="p">,</span> <span class="nx">encryptPassword</span><span class="p">,</span> <span class="nx">isPasswordMatch</span> <span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>In this utility module, we've defined three key elements:</p>

<ol>
<li>
<strong><code>ApiError</code> Class</strong>: This custom error class is designed to handle API-related errors. It takes parameters such as the status code, message, operational status, and stack trace.</li>
<li>
<strong><code>encryptPassword</code> Function</strong>: This asynchronous function uses bcrypt to hash passwords. It takes a plain text password as input and returns the hashed password.</li>
<li>
<strong><code>isPasswordMatch</code> Function</strong>: Another asynchronous function that checks if a provided password matches the stored hash. It takes a plain text password and the stored hashed password as input, returning a boolean result.</li>
</ol>

<p>These utility functions play a crucial role in enhancing the security and error-handling capabilities of our User Service. With these utilities, our application gains robust password encryption and consistent error management.</p>

<h3>
  <a name="middleware" href="#middleware">
  </a>
  Middleware
</h3>

<p>In the <code>index.ts</code>  file located in the <code>src/middleware</code> folder, add the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">ErrorRequestHandler</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ApiError</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../utils</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">errorConverter</span><span class="p">:</span> <span class="nx">ErrorRequestHandler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">error</span> <span class="o">=</span> <span class="nx">err</span><span class="p">;</span>
    <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">error</span> <span class="k">instanceof</span> <span class="nx">ApiError</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">statusCode</span> <span class="o">=</span>
            <span class="nx">error</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">||</span>
            <span class="p">(</span><span class="nx">error</span> <span class="k">instanceof</span> <span class="nb">Error</span>
                <span class="p">?</span> <span class="mi">400</span> <span class="c1">// Bad Request</span>
                <span class="p">:</span> <span class="mi">500</span><span class="p">);</span> <span class="c1">// Internal Server Error</span>
        <span class="kd">const</span> <span class="nx">message</span> <span class="o">=</span>
            <span class="nx">error</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span>
            <span class="p">(</span><span class="nx">statusCode</span> <span class="o">===</span> <span class="mi">400</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">Bad Request</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Internal Server Error</span><span class="dl">"</span><span class="p">);</span>
        <span class="nx">error</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ApiError</span><span class="p">(</span><span class="nx">statusCode</span><span class="p">,</span> <span class="nx">message</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">.</span><span class="nf">toString</span><span class="p">());</span>
    <span class="p">}</span>
    <span class="nf">next</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">errorHandler</span><span class="p">:</span> <span class="nx">ErrorRequestHandler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="p">{</span> <span class="nx">statusCode</span><span class="p">,</span> <span class="nx">message</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">err</span><span class="p">;</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">err</span><span class="p">.</span><span class="nx">isOperational</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">500</span><span class="p">;</span> <span class="c1">// Internal Server Error</span>
        <span class="nx">message</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Internal Server Error</span><span class="dl">"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">res</span><span class="p">.</span><span class="nx">locals</span><span class="p">.</span><span class="nx">errorMessage</span> <span class="o">=</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>

    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">code</span><span class="p">:</span> <span class="nx">statusCode</span><span class="p">,</span>
        <span class="nx">message</span><span class="p">,</span>
        <span class="p">...(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">development</span><span class="dl">"</span> <span class="o">&amp;&amp;</span> <span class="p">{</span> <span class="na">stack</span><span class="p">:</span> <span class="nx">err</span><span class="p">.</span><span class="nx">stack</span> <span class="p">}),</span>
    <span class="p">};</span>

    <span class="k">if </span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">development</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">res</span><span class="p">.</span><span class="nf">status</span><span class="p">(</span><span class="nx">statusCode</span><span class="p">).</span><span class="nf">json</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
    <span class="nf">next</span><span class="p">();</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>In these middleware functions:</p>

<ol>
<li>
<strong><code>errorConverter</code></strong>: converts non-API errors to API errors, ensuring consistency in error handling. It checks if the error is an instance of <strong><code>ApiError</code></strong> and, if not, creates a new <strong><code>ApiError</code></strong> instance with relevant details.</li>
<li>
<strong><code>errorHandler</code></strong>: handles API errors. It sets the appropriate status code and message for non-operational errors in production. The response payload includes the error code, message, and, in development mode, the stack trace. The error is logged in the console in development mode. This middleware ensures a standardized and informative response for API errors.</li>
</ol>

<h3>
  <a name="rabbitmq-services" href="#rabbitmq-services">
  </a>
  RabbitMQ Services
</h3>

<p>Now, lets set up our RabbitMQ services. Open your <code>RabbitMQService.ts</code>  file located in the <code>src/services</code> folder and add the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="nx">amqp</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Channel</span><span class="p">,</span> <span class="nx">Connection</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">amqplib</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">config</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../config/config</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">User</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../database</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ApiError</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../utils</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">RabbitMQService</span> <span class="p">{</span>
    <span class="k">private</span> <span class="nx">requestQueue</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">USER_DETAILS_REQUEST</span><span class="dl">"</span><span class="p">;</span>
    <span class="k">private</span> <span class="nx">responseQueue</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">USER_DETAILS_RESPONSE</span><span class="dl">"</span><span class="p">;</span>
    <span class="k">private</span> <span class="nx">connection</span><span class="o">!</span><span class="p">:</span> <span class="nx">Connection</span><span class="p">;</span>
    <span class="k">private</span> <span class="nx">channel</span><span class="o">!</span><span class="p">:</span> <span class="nx">Channel</span><span class="p">;</span>

    <span class="nf">constructor</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nf">init</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">async</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Establish connection to RabbitMQ server</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">connection</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">amqp</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">msgBrokerURL</span><span class="o">!</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">connection</span><span class="p">.</span><span class="nf">createChannel</span><span class="p">();</span>

        <span class="c1">// Asserting queues ensures they exist</span>
        <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">channel</span><span class="p">.</span><span class="nf">assertQueue</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">requestQueue</span><span class="p">);</span>
        <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">channel</span><span class="p">.</span><span class="nf">assertQueue</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">responseQueue</span><span class="p">);</span>

        <span class="c1">// Start listening for messages on the request queue</span>
        <span class="k">this</span><span class="p">.</span><span class="nf">listenForRequests</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">async</span> <span class="nf">listenForRequests</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">channel</span><span class="p">.</span><span class="nf">consume</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">requestQueue</span><span class="p">,</span> <span class="k">async </span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if </span><span class="p">(</span><span class="nx">msg</span> <span class="o">&amp;&amp;</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">const</span> <span class="p">{</span> <span class="nx">userId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nf">toString</span><span class="p">());</span>
                <span class="kd">const</span> <span class="nx">userDetails</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">getUserDetails</span><span class="p">(</span><span class="nx">userId</span><span class="p">);</span>

                <span class="c1">// Send the user details response</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">channel</span><span class="p">.</span><span class="nf">sendToQueue</span><span class="p">(</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">responseQueue</span><span class="p">,</span>
                    <span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">userDetails</span><span class="p">)),</span>
                    <span class="p">{</span> <span class="na">correlationId</span><span class="p">:</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">correlationId</span> <span class="p">}</span>
                <span class="p">);</span>

                <span class="c1">// Acknowledge the processed message</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">channel</span><span class="p">.</span><span class="nf">ack</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">getUserDetails</span> <span class="o">=</span> <span class="k">async </span><span class="p">(</span><span class="nx">userId</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">userDetails</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">User</span><span class="p">.</span><span class="nf">findById</span><span class="p">(</span><span class="nx">userId</span><span class="p">).</span><span class="nf">select</span><span class="p">(</span><span class="dl">"</span><span class="s2">-password</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">userDetails</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nc">ApiError</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span> <span class="dl">"</span><span class="s2">User not found</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">userDetails</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">rabbitMQService</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RabbitMQService</span><span class="p">();</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>In our RabbitMQ service:</p>

<ul>
<li>The <code>RabbitMQService</code> class initializes the RabbitMQ connection and channels. It establishes a connection to the RabbitMQ server, creates channels, and asserts the existence of the request and response queues.</li>
<li>The <code>listenForRequests</code> method listens for incoming messages on the request queue, processes the user details request, sends a response to the response queue, and acknowledges the processed message.</li>
<li>The <code>getUserDetails</code> function fetches user details from MongoDB based on the provided user ID.</li>
<li>Finally, an instance of <code>RabbitMQService</code> is created to initialize the RabbitMQ connection when the file is imported.</li>
</ul>

<h3>
  <a name="how-rabbitmq-works" href="#how-rabbitmq-works">
  </a>
  <strong>How RabbitMQ Works</strong>
</h3>

<p>Imagine RabbitMQ as a post office for your applications. It helps different parts of your software communicate by passing messages between them.</p>

<ol>
<li>
<strong>The Post Office (Message Broker):</strong> RabbitMQ is like the central post office. It sits in the middle, ready to receive, store, and deliver messages. In our code, the <strong><code>RabbitMQService</code></strong> class represents this central post office. It initializes the connection to RabbitMQ and sets up the necessary queues.</li>
<li>
<strong>The Sender (Producer):</strong> The sender is like the part of your application that wants to send a message. In our code, the sender is not explicitly shown but is represented by the concept of producing messages. Messages are sent to the RabbitMQ exchange.</li>
<li>
<strong>The Message (Letter):</strong> Messages are the information we want to share. In the code, messages are JSON objects containing a <strong><code>userId</code></strong> field. These messages are sent to the RabbitMQ request queue.</li>
<li>
<strong>The Exchange (Mailbox):</strong> Before sending the letter, you put it in a mailbox. In RabbitMQ, this mailbox is called an exchange. There can be different types of mailboxes for different purposes. In our code, the <strong><code>requestQueue</code></strong> serves as the mailbox (exchange) where messages are sent for processing.</li>
<li>
<strong>Routing (Delivery Instructions):</strong> Sometimes, you want your letter to go to a specific department or person. In RabbitMQ, routing specifies where a message should go. In our code, routing is not explicitly shown, but the <strong><code>requestQueue</code></strong> serves the purpose of directing messages to the proper destination.</li>
<li>
<strong>The Receiver (Consumer):</strong> On the other end, someone is waiting to receive the letter. The receiver is like the part of your application waiting to receive and process the message. In our code, the <strong><code>listenForRequests</code></strong> function acts as the consumer, waiting for messages in the <strong><code>requestQueue</code></strong>.</li>
<li>
<strong>Queues (Mail Sorting):</strong> Before reaching the receiver, letters are sorted in queues. Each type of letter (message) might have its queue. Here, messages are placed in the <strong><code>requestQueue</code></strong> before being processed.</li>
<li>
<strong>Delivery to Consumers:</strong> Once sorted, the letters are delivered to the respective receivers (consumers) who can then process the information. The <code>listenForRequests</code> function processes messages from the <code>requestQueue</code> and delivers the user details response to the <code>responseQueue</code>.</li>
<li>
<strong>Acknowledgment (Received Confirmation):</strong> In RabbitMQ, acknowledgments confirm that a message has been successfully processed. Our code uses <code>this.channel.ack(msg)</code> to acknowledge that the processed message has been received.</li>
</ol>

<p>In summary, the <code>RabbitMQService.ts</code> code simulates a scenario where messages (user details requests) are sent to a central post office (RabbitMQ), sorted in a mailbox (queue), and then processed by a receiver (consumer). The acknowledgment mechanism ensures that the processing status is communicated back to RabbitMQ. This setup enables efficient communication between different parts of your application using RabbitMQ.</p>

<h3>
  <a name="server-setup-and-initialization" href="#server-setup-and-initialization">
  </a>
  <strong>Server Setup and Initialization</strong>
</h3>

<p>With our <code>RabbitMQService.ts</code> in place, the final piece of the puzzle is the <code>server.ts</code> file, which orchestrates the setup of our Express server, connects to the database and initializes the RabbitMQ client. Here's the code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="nx">express</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Express</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Server</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">http</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">userRouter</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./routes/authRoutes</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">errorConverter</span><span class="p">,</span> <span class="nx">errorHandler</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./middleware</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">connectDB</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./database</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">config</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./config/config</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">rabbitMQService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./services/RabbitMQService</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">app</span><span class="p">:</span> <span class="nx">Express</span> <span class="o">=</span> <span class="nf">express</span><span class="p">();</span>
<span class="kd">let</span> <span class="nx">server</span><span class="p">:</span> <span class="nx">Server</span><span class="p">;</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nf">json</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nf">urlencoded</span><span class="p">({</span> <span class="na">extended</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}));</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">userRouter</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">errorConverter</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">errorHandler</span><span class="p">);</span>

<span class="nf">connectDB</span><span class="p">();</span>

<span class="nx">server</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nf">listen</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">PORT</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`Server is running on port </span><span class="p">${</span><span class="nx">config</span><span class="p">.</span><span class="nx">PORT</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">initializeRabbitMQClient</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="k">await</span> <span class="nx">rabbitMQService</span><span class="p">.</span><span class="nf">init</span><span class="p">();</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">RabbitMQ client initialized and listening for messages.</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Failed to initialize RabbitMQ client:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nf">initializeRabbitMQClient</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">exitHandler</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">server</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">server</span><span class="p">.</span><span class="nf">close</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="dl">"</span><span class="s2">Server closed</span><span class="dl">"</span><span class="p">);</span>
            <span class="nx">process</span><span class="p">.</span><span class="nf">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">process</span><span class="p">.</span><span class="nf">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">unexpectedErrorHandler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">error</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="nf">exitHandler</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">process</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">uncaughtException</span><span class="dl">"</span><span class="p">,</span> <span class="nx">unexpectedErrorHandler</span><span class="p">);</span>
<span class="nx">process</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">unhandledRejection</span><span class="dl">"</span><span class="p">,</span> <span class="nx">unexpectedErrorHandler</span><span class="p">);</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This <code>server.ts</code> file does the following:</p>

<ol>
<li>
<strong>Express Server Setup:</strong> Initializes an Express app, sets up middleware for JSON and form data parsing, adds routes, and includes error handling middleware.</li>
<li>
<strong>Database Connection:</strong> Connects to the MongoDB database using the <strong><code>connectDB</code></strong> function.</li>
<li>
<strong>Server Start:</strong> Starts the Express server, listening on the specified port from the <strong><code>config</code></strong> file.</li>
<li>
<strong>RabbitMQ Client Initialization:</strong> Calls the <strong><code>initializeRabbitMQClient</code></strong> function to initialize the RabbitMQ client using our <strong><code>RabbitMQService</code></strong>.</li>
<li>
<strong>Graceful Shutdown:</strong> Implements a graceful shutdown mechanism. When the server is closed (either intentionally or due to an error), it logs the closure and exits the process.</li>
<li>
<strong>Error Handling:</strong> Registers event listeners for uncaught exceptions and unhandled rejections, ensuring proper error handling and graceful shutdown in case of unexpected errors.</li>
</ol>

<p>With this file, our microservice architecture for the User Service is complete and ready to handle user registration, login, and RabbitMQ communication.</p>

<h3>
  <a name="script-update" href="#script-update">
  </a>
  Script Update
</h3>

<p>After setting up our server, it's important to update the <code>package.json</code> file with scripts that facilitate development, building, and starting the server. Open your <code>package.json</code> file and add the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight json"><code><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"dev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NODE_ENV=development nodemon src/server.ts"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rm -rf build/ &amp;&amp; tsc -p ."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NODE_ENV=production nodemon build/server.js"</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span></code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Then, ensure that the <code>"main"</code> tag is set to <code>"src/server.ts"</code>. These scripts provide convenient commands for different stages of the development process:</p>

<ul>
<li>
<strong><code>"dev"</code></strong>: Starts the server in development mode using <code>nodemon</code>.</li>
<li>
<strong><code>"build"</code></strong>: Clears the existing build folder and compiles TypeScript files using the TypeScript compiler (<code>tsc</code>).</li>
<li>
<strong><code>"start"</code></strong>: Starts the server in production mode using the compiled JavaScript files.</li>
</ul>

<p>This setup enhances the development workflow and allows for easy deployment in production.</p>

<p>Now, lets see our User service in action. Open your terminal and make sure youre in the <code>user-service</code> root directory. Run the following command to start the development server based on your package manager:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>npm run dev
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>or<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>yarn dev
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This command initiates the server in development mode, enabling live reloading with <code>nodemon</code>. Once the server is running, you can use Postman or any API tool to test the API endpoints and ensure that everything is functioning as expected. Test the <code>/register</code> and <code>/login</code> endpoints to verify user registration and login functionality.</p>

<h2>
  <a name="chat-service" href="#chat-service">
  </a>
  <strong>Chat Service</strong>
</h2>

<p>The Chat Service enables real-time communication between users, fostering a dynamic and interactive user experience within our application. We'll structure the project, set up dependencies, and create the necessary files and folders to establish a robust foundation for building the Chat Service. Follow the step-by-step guide to integrate this service into our microservices ecosystem seamlessly. Let's get started!</p>

<p>Heres our Chat services structure:</p>

<p><a href="https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F7naxfwlqjbyufkdpl8aq.png" class="article-body-image-wrapper"><img src="https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F7naxfwlqjbyufkdpl8aq.png" alt="Chat service structure" loading="lazy" width="476" height="1136"></a></p>

<p>Now, use the following commands to set up your Chat Service project structure, ensure youre in your projects root directory:</p>

<p>Create and navigate to your <code>chat-service</code> folder:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nb">mkdir </span>chat-service <span class="o">&amp;&amp;</span> <span class="nb">cd </span>chat-service
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Create the <code>src</code>  folder and navigate to it:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nb">mkdir</span> <span class="nt">-p</span> src/config src/controllers src/services src/database/models src/middleware src/routes src/utils
<span class="nb">cd </span>src
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Create individual files:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nb">touch </span>config/config.ts controllers/MessageController.ts services/RabbitMQService.ts database/models/MessageModel.ts database/connection.ts database/index.ts middleware/index.ts routes/messageRoutes.ts utils/apiError.ts utils/messageHandler.ts utils/userStatusStore.ts utils/index.ts app.ts server.ts
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Create <code>Dockerfile</code>, <code>.dockerignore</code>, and <code>.env</code> files:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nb">cd</span> ..
<span class="nb">touch </span>Dockerfile .dockerignore .env
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Here is the description for each file and folder:</p>

<ul>
<li>
<strong><code>config</code>:</strong> contains the configuration files for our Chat Service. The <code>config.ts</code> file holds environment variables and configurations.</li>
<li>
<strong><code>controllers</code>:</strong> Here, we manage the business logic for handling messages in the <code>MessageController.ts</code> file. This is where operations on messages are defined.</li>
<li>
<strong><code>services</code>:</strong> The <code>RabbitMQService.ts</code> file in this folder handles interactions with the RabbitMQ message broker, facilitating communication between microservices.</li>
<li>
<strong><code>database/models</code>:</strong> In this folder, we define the data model for messages using <code>MessageModel.ts</code>.</li>
<li>
<strong><code>database</code>:</strong> The <code>connection.ts</code> and <code>index.ts</code> files handle database connections and export models.</li>
<li>
<strong><code>middleware</code>:</strong> The <code>index.ts</code> file in this folder consolidates the middleware functions we will use later on.</li>
<li>
<strong><code>routes</code>:</strong> The <code>messageRoutes.ts</code> file in this folder defines the routes and their corresponding handlers for message-related operations.</li>
<li>
<strong><code>utils</code>:</strong> This folder contains utility files such as <code>apiError.ts</code> for handling API errors, <code>messageHandler.ts</code> for managing incoming messages, and <code>userStatusStore.ts</code> for tracking user statuses. The <code>index.ts</code> file consolidates exports from the utils folder.</li>
<li>
<strong><code>app.ts</code>:</strong> This file serves as the entry point for our Chat Service application.</li>
<li>
<strong><code>server.ts</code>:</strong> Here, we set up the Express server, configure middleware, and establish routes.</li>
</ul>

<p>These files and folders collectively form the foundational structure for our Chat Service, allowing for the organized development of features and functionalities.</p>

<p>Next, lets set up our environment and install the necessary dependencies. Use the following command, ensuring youre in the <code>chat-service</code> root directory:</p>

<p>Initialize Node.js project:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>npm init <span class="nt">-y</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Install dependencies<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>npm <span class="nb">install </span>amqplib dotenv express jsonwebtoken mongoose nodemon ts-node typescript socket.io uuid @types/express @types/amqplib @types/jsonwebtoken @types/uuid
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This command sequence will create a <code>package.json</code> file and install the required Node.js packages for the Chat Service. </p>

<p>Let's proceed with the TypeScript configuration. Run the following command:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>tsc <span class="nt">--init</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Open the generated <code>tsconfig.json</code> file and update it with the following configuration:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">compilerOptions</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">target</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">es6</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">module</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">commonjs</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">outDir</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./build</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">strict</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">esModuleInterop</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">skipLibCheck</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">include</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
    <span class="dl">"</span><span class="s2">src/**/*</span><span class="dl">"</span>
  <span class="p">],</span>
  <span class="dl">"</span><span class="s2">exclude</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
    <span class="dl">"</span><span class="s2">node_modules</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">tests</span><span class="dl">"</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Add the following code to your <code>.env</code> file:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight make"><code><span class="nv">NODE_ENV</span><span class="o">=</span><span class="s2">"development"</span>
<span class="nv">PORT</span><span class="o">=</span>8082
<span class="nv">JWT_SECRET</span><span class="o">=</span><span class="s2">"{{YOUR_SECRET_KEY}}"</span>
<span class="nv">MONGO_URI</span><span class="o">=</span><span class="s2">"{{YOUR_MONGODB_URI}}"</span>
<span class="nv">MESSAGE_BROKER_URL</span><span class="o">=</span><span class="s2">"{{YOUR_MESSAGE_BROKER_URL}}"</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Replace <code>YOUR_SECRET_KEY</code> with a strong secret key, <code>YOUR_MONGODB_URI</code> with your MongoDB URI, and <code>YOUR_MESSAGE_BROKER_URL</code> with the same RabbitMQ message broker URL you used in the User Service.</p>

<p>Now, lets set up our <code>config.ts</code> file located in the <code>src/config</code> folder. Open the file and add the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">config</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">dotenv</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">configFile</span> <span class="o">=</span> <span class="s2">`./.env`</span><span class="p">;</span>
<span class="nf">config</span><span class="p">({</span> <span class="na">path</span><span class="p">:</span> <span class="nx">configFile</span> <span class="p">});</span>

<span class="kd">const</span> <span class="p">{</span> <span class="nx">MONGO_URI</span><span class="p">,</span> <span class="nx">PORT</span><span class="p">,</span> <span class="nx">JWT_SECRET</span><span class="p">,</span> <span class="nx">NODE_ENV</span><span class="p">,</span> <span class="nx">MESSAGE_BROKER_URL</span> <span class="p">}</span> <span class="o">=</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">queue</span> <span class="o">=</span> <span class="p">{</span> <span class="na">notifications</span><span class="p">:</span> <span class="dl">"</span><span class="s2">NOTIFICATIONS</span><span class="dl">"</span> <span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="nx">MONGO_URI</span><span class="p">,</span>
    <span class="nx">PORT</span><span class="p">,</span>
    <span class="nx">JWT_SECRET</span><span class="p">,</span>
    <span class="na">env</span><span class="p">:</span> <span class="nx">NODE_ENV</span><span class="p">,</span>
    <span class="na">msgBrokerURL</span><span class="p">:</span> <span class="nx">MESSAGE_BROKER_URL</span><span class="p">,</span>
    <span class="nx">queue</span><span class="p">,</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>In this <code>config.ts</code> file, we're configuring the environment variables needed for the Chat Service. We start by loading these variables from a specified file using the <code>dotenv</code> library. Once loaded, we extract key information such as the MongoDB URI, port, JWT secret, environment type, and the message broker URL. Additionally, we define a <code>queue</code> object, specifically a <code>notifications</code> queue, which will be utilized in our message broker. This is similar to what we did in the User service.</p>

<p>This centralized configuration approach allows us to easily manage and modify settings as required. It ensures that sensitive information, like the MongoDB URI or JWT secret, is kept secure by loading it from environment variables. The <code>queue</code> object represents specific queues used for communication within the message broker, adding clarity to our messaging setup. </p>

<h3>
  <a name="message-model" href="#message-model">
  </a>
  Message Model
</h3>

<p>Everything is set, lets set up our Message model. Open the <code>MessageModel.ts</code> file located in the <code>src/database/models</code> folder and add the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="nx">mongoose</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Schema</span><span class="p">,</span> <span class="nx">Document</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">mongoose</span><span class="dl">"</span><span class="p">;</span>

<span class="kr">enum</span> <span class="nx">Status</span> <span class="p">{</span>
    <span class="nx">NotDelivered</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">NotDelivered</span><span class="dl">"</span><span class="p">,</span>
    <span class="nx">Delivered</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Delivered</span><span class="dl">"</span><span class="p">,</span>
    <span class="nx">Seen</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Seen</span><span class="dl">"</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kr">interface</span> <span class="nx">IMessage</span> <span class="kd">extends</span> <span class="nx">Document</span> <span class="p">{</span>
    <span class="nl">senderId</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">receiverId</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">status</span><span class="p">:</span> <span class="nx">Status</span><span class="p">;</span>
    <span class="nl">createdAt</span><span class="p">:</span> <span class="nb">Date</span><span class="p">;</span>
    <span class="nl">updatedAt</span><span class="p">:</span> <span class="nb">Date</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">MessageSchema</span><span class="p">:</span> <span class="nx">Schema</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Schema</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="na">senderId</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
            <span class="na">required</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="na">receiverId</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
            <span class="na">required</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="na">message</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
            <span class="na">required</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="na">status</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
            <span class="na">enum</span><span class="p">:</span> <span class="nb">Object</span><span class="p">.</span><span class="nf">values</span><span class="p">(</span><span class="nx">Status</span><span class="p">),</span>
            <span class="na">default</span><span class="p">:</span> <span class="nx">Status</span><span class="p">.</span><span class="nx">NotDelivered</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="na">timestamps</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">Message</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">model</span><span class="o">&lt;</span><span class="nx">IMessage</span><span class="o">&gt;</span><span class="p">(</span><span class="dl">"</span><span class="s2">Message</span><span class="dl">"</span><span class="p">,</span> <span class="nx">MessageSchema</span><span class="p">);</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">Message</span><span class="p">;</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This <code>MessageModel.ts</code> file defines the schema for our messages. Each message has a sender ID, receiver ID, message content, status (which can be "NotDelivered," "Delivered," or "Seen"), and timestamps for creation and last update. The use of TypeScript interfaces ensures that our document adheres to a specific structure. The <code>enum</code> for status provides clear options and a default value, enhancing code readability. This schema will be used to interact with the MongoDB database for storing and retrieving messages.</p>

<h3>
  <a name="database-connection" href="#database-connection">
  </a>
  Database Connection
</h3>

<p>Open the <code>connection.ts</code> in the <code>src/database</code> folder and add the following code just like we did in User service:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="nx">mongoose</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">mongoose</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">config</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../config/config</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">connectDB</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="dl">"</span><span class="s2">Connecting to database...</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">config</span><span class="p">.</span><span class="nx">MONGO_URI</span><span class="p">);</span>
        <span class="k">await</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">MONGO_URI</span><span class="o">!</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="dl">"</span><span class="s2">Database connected</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
        <span class="nx">process</span><span class="p">.</span><span class="nf">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Then, export by adding the following code to the <code>index.ts</code> file located in the <code>src/database</code> folder:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="nx">Message</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./models/MessageModel</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">connectDB</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./connection</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="p">{</span> <span class="nx">Message</span><span class="p">,</span> <span class="nx">connectDB</span> <span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<h3>
  <a name="message-controller" href="#message-controller">
  </a>
  Message Controller
</h3>

<p>Now that we have the database all set. Lets work on the Message controller, open the <code>MessageController.ts</code> file and add the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Request</span><span class="p">,</span> <span class="nx">Response</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthRequest</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../middleware</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Message</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../database</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ApiError</span><span class="p">,</span> <span class="nx">handleMessageReceived</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../utils</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">send</span> <span class="o">=</span> <span class="k">async </span><span class="p">(</span><span class="nx">req</span><span class="p">:</span> <span class="nx">AuthRequest</span><span class="p">,</span> <span class="nx">res</span><span class="p">:</span> <span class="nx">Response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">receiverId</span><span class="p">,</span> <span class="nx">message</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">_id</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">name</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">user</span><span class="p">;</span>

        <span class="nf">validateReceiver</span><span class="p">(</span><span class="nx">_id</span><span class="p">,</span> <span class="nx">receiverId</span><span class="p">);</span>

        <span class="kd">const</span> <span class="nx">newMessage</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Message</span><span class="p">.</span><span class="nf">create</span><span class="p">({</span>
            <span class="na">senderId</span><span class="p">:</span> <span class="nx">_id</span><span class="p">,</span>
            <span class="nx">receiverId</span><span class="p">,</span>
            <span class="nx">message</span><span class="p">,</span>
        <span class="p">});</span>

        <span class="k">await</span> <span class="nf">handleMessageReceived</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">receiverId</span><span class="p">,</span> <span class="nx">message</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">({</span>
            <span class="na">status</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
            <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Message sent successfully!</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">data</span><span class="p">:</span> <span class="nx">newMessage</span><span class="p">,</span>
        <span class="p">});</span>
    <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="na">error</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">({</span>
            <span class="na">status</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
            <span class="na">message</span><span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">validateReceiver</span> <span class="o">=</span> <span class="p">(</span><span class="nx">senderId</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">receiverId</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">receiverId</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nc">ApiError</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Receiver ID is required.</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if </span><span class="p">(</span><span class="nx">senderId</span> <span class="o">==</span> <span class="nx">receiverId</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nc">ApiError</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Sender and receiver cannot be the same.</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">getConversation</span> <span class="o">=</span> <span class="k">async </span><span class="p">(</span><span class="nx">req</span><span class="p">:</span> <span class="nx">AuthRequest</span><span class="p">,</span> <span class="nx">res</span><span class="p">:</span> <span class="nx">Response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">receiverId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">senderId</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">_id</span><span class="p">;</span>

        <span class="kd">const</span> <span class="nx">messages</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Message</span><span class="p">.</span><span class="nf">find</span><span class="p">({</span>
            <span class="na">$or</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span> <span class="nx">senderId</span><span class="p">,</span> <span class="nx">receiverId</span> <span class="p">},</span>
                <span class="p">{</span> <span class="na">senderId</span><span class="p">:</span> <span class="nx">receiverId</span><span class="p">,</span> <span class="na">receiverId</span><span class="p">:</span> <span class="nx">senderId</span> <span class="p">},</span>
            <span class="p">],</span>
        <span class="p">});</span>

        <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">({</span>
            <span class="na">status</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
            <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Messages retrieved successfully!</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">data</span><span class="p">:</span> <span class="nx">messages</span><span class="p">,</span>
        <span class="p">});</span>
    <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="na">error</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">({</span>
            <span class="na">status</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
            <span class="na">message</span><span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="nx">send</span><span class="p">,</span>
    <span class="nx">getConversation</span><span class="p">,</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This <code>MessageController.ts</code> file defines methods for handling messages. The <code>send</code> method allows users to send messages to a specified receiver, and it performs validation to ensure the receiver ID is provided and not the same as the sender's ID. Additionally, theres a <code>handleMessageReceived</code> function that handles and notifies the receiver when he/she receives a new message using our <code>RabbitMQService</code> which well define later. </p>

<p>The <code>getConversation</code> method retrieves messages between two users based on their IDs. Error handling is included to manage potential issues during these operations.</p>

<h3>
  <a name="message-routes" href="#message-routes">
  </a>
  Message Routes
</h3>

<p>Add the following code to the <code>messageRoutes.ts</code> file located in the <code>src/routes</code> folder:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Router</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">MessageController</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../controllers/MessageController</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">authMiddleware</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../middleware</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">messageRoutes</span> <span class="o">=</span> <span class="nc">Router</span><span class="p">();</span>

<span class="c1">// @ts-ignore</span>
<span class="nx">messageRoutes</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="dl">"</span><span class="s2">/send</span><span class="dl">"</span><span class="p">,</span> <span class="nx">authMiddleware</span><span class="p">,</span> <span class="nx">MessageController</span><span class="p">.</span><span class="nx">send</span><span class="p">);</span>
<span class="nx">messageRoutes</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span>
    <span class="dl">"</span><span class="s2">/get/:receiverId</span><span class="dl">"</span><span class="p">,</span>
    <span class="c1">// @ts-ignore</span>
    <span class="nx">authMiddleware</span><span class="p">,</span>
    <span class="nx">MessageController</span><span class="p">.</span><span class="nx">getConversation</span>
<span class="p">);</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">messageRoutes</span><span class="p">;</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This <code>messageRoutes.ts</code> file sets up routes for sending messages (<code>/send</code>) and retrieving conversations (<code>/get/:receiverId</code>). These routes are associated with the corresponding methods defined in the <code>MessageController</code>. The <code>authMiddleware</code> ensures that only authenticated users can access these routes. With these routes, users can send messages and retrieve their conversations.</p>

<h3>
  <a name="rabbitmq-services" href="#rabbitmq-services">
  </a>
  RabbitMQ Services
</h3>

<p>In the <code>src/services</code> folder, open the <code>RabbitMQService.ts</code> file and add the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="nx">amqp</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Channel</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">amqplib</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">v4</span> <span class="k">as</span> <span class="nx">uuidv4</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">uuid</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">config</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../config/config</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">RabbitMQService</span> <span class="p">{</span>
    <span class="k">private</span> <span class="nx">requestQueue</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">USER_DETAILS_REQUEST</span><span class="dl">"</span><span class="p">;</span>
    <span class="k">private</span> <span class="nx">responseQueue</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">USER_DETAILS_RESPONSE</span><span class="dl">"</span><span class="p">;</span>
    <span class="k">private</span> <span class="nx">correlationMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Map</span><span class="p">();</span>
    <span class="k">private</span> <span class="nx">channel</span><span class="o">!</span><span class="p">:</span> <span class="nx">Channel</span><span class="p">;</span>

    <span class="nf">constructor</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nf">init</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">async</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">connection</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">amqp</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">msgBrokerURL</span><span class="o">!</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">connection</span><span class="p">.</span><span class="nf">createChannel</span><span class="p">();</span>
        <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">channel</span><span class="p">.</span><span class="nf">assertQueue</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">requestQueue</span><span class="p">);</span>
        <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">channel</span><span class="p">.</span><span class="nf">assertQueue</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">responseQueue</span><span class="p">);</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">channel</span><span class="p">.</span><span class="nf">consume</span><span class="p">(</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">responseQueue</span><span class="p">,</span>
            <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="k">if </span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">const</span> <span class="nx">correlationId</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">correlationId</span><span class="p">;</span>
                    <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nf">toString</span><span class="p">());</span>

                    <span class="kd">const</span> <span class="nx">callback</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">correlationMap</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="nx">correlationId</span><span class="p">);</span>
                    <span class="k">if </span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nf">callback</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">correlationMap</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">correlationId</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="p">{</span> <span class="na">noAck</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">async</span> <span class="nf">requestUserDetails</span><span class="p">(</span><span class="nx">userId</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">callback</span><span class="p">:</span> <span class="nb">Function</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">correlationId</span> <span class="o">=</span> <span class="nf">uuidv4</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">correlationMap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="nx">correlationId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">channel</span><span class="p">.</span><span class="nf">sendToQueue</span><span class="p">(</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">requestQueue</span><span class="p">,</span>
            <span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">({</span> <span class="nx">userId</span> <span class="p">})),</span>
            <span class="p">{</span> <span class="nx">correlationId</span> <span class="p">}</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">async</span> <span class="nf">notifyReceiver</span><span class="p">(</span>
        <span class="nx">receiverId</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
        <span class="nx">messageContent</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
        <span class="nx">senderEmail</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
        <span class="nx">senderName</span><span class="p">:</span> <span class="kr">string</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nf">requestUserDetails</span><span class="p">(</span><span class="nx">receiverId</span><span class="p">,</span> <span class="k">async </span><span class="p">(</span><span class="nx">user</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">notificationPayload</span> <span class="o">=</span> <span class="p">{</span>
                <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">MESSAGE_RECEIVED</span><span class="dl">"</span><span class="p">,</span>
                <span class="na">userId</span><span class="p">:</span> <span class="nx">receiverId</span><span class="p">,</span>
                <span class="na">userEmail</span><span class="p">:</span> <span class="nx">user</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span>
                <span class="na">message</span><span class="p">:</span> <span class="nx">messageContent</span><span class="p">,</span>
                <span class="na">from</span><span class="p">:</span> <span class="nx">senderEmail</span><span class="p">,</span>
                <span class="na">fromName</span><span class="p">:</span> <span class="nx">senderName</span><span class="p">,</span>
            <span class="p">};</span>

            <span class="k">try</span> <span class="p">{</span>
                <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">channel</span><span class="p">.</span><span class="nf">assertQueue</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">notifications</span><span class="p">);</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">channel</span><span class="p">.</span><span class="nf">sendToQueue</span><span class="p">(</span>
                    <span class="nx">config</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">notifications</span><span class="p">,</span>
                    <span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">notificationPayload</span><span class="p">))</span>
                <span class="p">);</span>
            <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">rabbitMQService</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RabbitMQService</span><span class="p">();</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This <code>RabbitMQService.ts</code> file sets up a RabbitMQ service for handling communication between different microservices. It uses the <code>amqplib</code> library to interact with RabbitMQ. The service initializes by connecting to the RabbitMQ server and asserting the necessary queues. The methods <code>requestUserDetails</code> and <code>notifyReceiver</code> demonstrate the use of RabbitMQ for requesting user details and notifying receivers about incoming messages, respectively. The service utilizes correlation IDs to match requests with responses, ensuring effective communication between services.</p>

<h3>
  <a name="utils" href="#utils">
  </a>
  Utils
</h3>

<p>With our services and controller all set, lets work on our utils. In the <code>src/utils</code>, add the following code to the <code>apiError.ts</code> file:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="kd">class</span> <span class="nc">ApiError</span> <span class="kd">extends</span> <span class="nc">Error</span> <span class="p">{</span>
    <span class="nl">statusCode</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">isOperational</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>

    <span class="nf">constructor</span><span class="p">(</span>
        <span class="nx">statusCode</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span>
        <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span> <span class="o">|</span> <span class="kc">undefined</span><span class="p">,</span>
        <span class="nx">isOperational</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">stack</span> <span class="o">=</span> <span class="dl">""</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="nx">statusCode</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">isOperational</span> <span class="o">=</span> <span class="nx">isOperational</span><span class="p">;</span>
        <span class="k">if </span><span class="p">(</span><span class="nx">stack</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">stack</span> <span class="o">=</span> <span class="nx">stack</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nb">Error</span><span class="p">.</span><span class="nf">captureStackTrace</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="kd">constructor</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="p">{</span> <span class="nx">ApiError</span> <span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This <code>ApiError</code> class is similar to the one we have in our User service. They perform the same function. </p>

<p>Next, in the <code>userStatusStore.ts</code> file, the following code defines the <code>UserStatusStore</code> class:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">class</span> <span class="nc">UserStatusStore</span> <span class="p">{</span>
    <span class="k">private</span> <span class="k">static</span> <span class="nx">instance</span><span class="p">:</span> <span class="nx">UserStatusStore</span><span class="p">;</span>
    <span class="k">private</span> <span class="nx">userStatuses</span><span class="p">:</span> <span class="nb">Record</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="nx">boolean</span><span class="o">&gt;</span><span class="p">;</span>

    <span class="k">private</span> <span class="nf">constructor</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">userStatuses</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="nf">getInstance</span><span class="p">():</span> <span class="nx">UserStatusStore</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">UserStatusStore</span><span class="p">.</span><span class="nx">instance</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">UserStatusStore</span><span class="p">.</span><span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">UserStatusStore</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">UserStatusStore</span><span class="p">.</span><span class="nx">instance</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nf">setUserOnline</span><span class="p">(</span><span class="nx">userId</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">userStatuses</span><span class="p">[</span><span class="nx">userId</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nf">setUserOffline</span><span class="p">(</span><span class="nx">userId</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">userStatuses</span><span class="p">[</span><span class="nx">userId</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nf">isUserOnline</span><span class="p">(</span><span class="nx">userId</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!!</span><span class="k">this</span><span class="p">.</span><span class="nx">userStatuses</span><span class="p">[</span><span class="nx">userId</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The <code>UserStatusStore</code> class is a singleton class responsible for managing the online/offline status of users. It provides methods to set a user as online or offline and check whether a user is currently online.</p>

<p>Lastly, in the <code>messageHandler.ts</code> file, the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">UserStatusStore</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./userStatusStore</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">rabbitMQService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../services/RabbitMQService</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">userStatusStore</span> <span class="o">=</span> <span class="nx">UserStatusStore</span><span class="p">.</span><span class="nf">getInstance</span><span class="p">();</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">handleMessageReceived</span> <span class="o">=</span> <span class="k">async </span><span class="p">(</span>
    <span class="nx">senderName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
    <span class="nx">senderEmail</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
    <span class="nx">receiverId</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
    <span class="nx">messageContent</span><span class="p">:</span> <span class="kr">string</span>
<span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">receiverIsOffline</span> <span class="o">=</span> <span class="o">!</span><span class="nx">userStatusStore</span><span class="p">.</span><span class="nf">isUserOnline</span><span class="p">(</span><span class="nx">receiverId</span><span class="p">);</span>

    <span class="k">if </span><span class="p">(</span><span class="nx">receiverIsOffline</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">await</span> <span class="nx">rabbitMQService</span><span class="p">.</span><span class="nf">notifyReceiver</span><span class="p">(</span>
            <span class="nx">receiverId</span><span class="p">,</span>
            <span class="nx">messageContent</span><span class="p">,</span>
            <span class="nx">senderEmail</span><span class="p">,</span>
            <span class="nx">senderName</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The <code>handleMessageReceived</code> function checks whether the receiver is online using the <code>UserStatusStore</code>. If the receiver is offline, it utilizes the <code>RabbitMQService</code> to notify the receiver about the incoming message. This ensures that users receive notifications even when they are not actively using the chat service.</p>

<p>Now, export the utils by adding the code below to the <code>index.ts</code> file:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">ApiError</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./apiError</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">UserStatusStore</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./userStatusStore</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">handleMessageReceived</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./messageHandler</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="p">{</span> <span class="nx">ApiError</span><span class="p">,</span> <span class="nx">UserStatusStore</span><span class="p">,</span> <span class="nx">handleMessageReceived</span> <span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This code exports the <code>ApiError</code>, <code>UserStatusStore</code>, and <code>handleMessageReceived</code> from the utils, making them available for use in other parts of the application. With our utils in place, lets define our middleware.</p>

<h3>
  <a name="middleware" href="#middleware">
  </a>
  Middleware
</h3>

<p>Open the <code>index.ts</code>  file located in the <code>src/middleware</code> folder and add the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Request</span><span class="p">,</span> <span class="nx">Response</span><span class="p">,</span> <span class="nx">NextFunction</span><span class="p">,</span> <span class="nx">ErrorRequestHandler</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">jwt</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">jsonwebtoken</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ApiError</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../utils</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">config</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../config/config</span><span class="dl">"</span><span class="p">;</span>

<span class="kr">interface</span> <span class="nx">TokenPayload</span> <span class="p">{</span>
    <span class="nl">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">iat</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">exp</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">IUser</span> <span class="p">{</span>
    <span class="nl">_id</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">password</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">createdAt</span><span class="p">:</span> <span class="nb">Date</span><span class="p">;</span>
    <span class="nl">updatedAt</span><span class="p">:</span> <span class="nb">Date</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kr">interface</span> <span class="nx">AuthRequest</span> <span class="kd">extends</span> <span class="nx">Request</span> <span class="p">{</span>
    <span class="nl">user</span><span class="p">:</span> <span class="nx">IUser</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">jwtSecret</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">JWT_SECRET</span> <span class="k">as</span> <span class="kr">string</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">authMiddleware</span> <span class="o">=</span> <span class="k">async </span><span class="p">(</span>
    <span class="nx">req</span><span class="p">:</span> <span class="nx">AuthRequest</span><span class="p">,</span>
    <span class="nx">res</span><span class="p">:</span> <span class="nx">Response</span><span class="p">,</span>
    <span class="nx">next</span><span class="p">:</span> <span class="nx">NextFunction</span>
<span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">authHeader</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">authorization</span><span class="p">;</span>
    <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">authHeader</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nf">next</span><span class="p">(</span><span class="k">new</span> <span class="nc">ApiError</span><span class="p">(</span><span class="mi">401</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Missing authorization header</span><span class="dl">"</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="kd">const</span> <span class="p">[,</span> <span class="nx">token</span><span class="p">]</span> <span class="o">=</span> <span class="nx">authHeader</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">decoded</span> <span class="o">=</span> <span class="nx">jwt</span><span class="p">.</span><span class="nf">verify</span><span class="p">(</span><span class="nx">token</span><span class="p">,</span> <span class="nx">jwtSecret</span><span class="p">)</span> <span class="k">as</span> <span class="nx">TokenPayload</span><span class="p">;</span>

        <span class="nx">req</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">_id</span><span class="p">:</span> <span class="nx">decoded</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
            <span class="na">email</span><span class="p">:</span> <span class="nx">decoded</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span>
            <span class="na">createdAt</span><span class="p">:</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">(</span><span class="nx">decoded</span><span class="p">.</span><span class="nx">iat</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">),</span>
            <span class="na">updatedAt</span><span class="p">:</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">(</span><span class="nx">decoded</span><span class="p">.</span><span class="nx">exp</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">),</span>
            <span class="na">name</span><span class="p">:</span> <span class="nx">decoded</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
            <span class="na">password</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
        <span class="p">};</span>
        <span class="k">return</span> <span class="nf">next</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">next</span><span class="p">(</span><span class="k">new</span> <span class="nc">ApiError</span><span class="p">(</span><span class="mi">401</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Invalid token</span><span class="dl">"</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">errorConverter</span><span class="p">:</span> <span class="nx">ErrorRequestHandler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">error</span> <span class="o">=</span> <span class="nx">err</span><span class="p">;</span>
    <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">error</span> <span class="k">instanceof</span> <span class="nx">ApiError</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">statusCode</span> <span class="o">=</span>
            <span class="nx">error</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">||</span>
            <span class="p">(</span><span class="nx">error</span> <span class="k">instanceof</span> <span class="nb">Error</span>
                <span class="p">?</span> <span class="mi">400</span> <span class="c1">// Bad Request</span>
                <span class="p">:</span> <span class="mi">500</span><span class="p">);</span> <span class="c1">// Internal Server Error</span>
        <span class="kd">const</span> <span class="nx">message</span> <span class="o">=</span>
            <span class="nx">error</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span>
            <span class="p">(</span><span class="nx">statusCode</span> <span class="o">===</span> <span class="mi">400</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">Bad Request</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Internal Server Error</span><span class="dl">"</span><span class="p">);</span>
        <span class="nx">error</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ApiError</span><span class="p">(</span><span class="nx">statusCode</span><span class="p">,</span> <span class="nx">message</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">.</span><span class="nf">toString</span><span class="p">());</span>
    <span class="p">}</span>
    <span class="nf">next</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">errorHandler</span><span class="p">:</span> <span class="nx">ErrorRequestHandler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="p">{</span> <span class="nx">statusCode</span><span class="p">,</span> <span class="nx">message</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">err</span><span class="p">;</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">err</span><span class="p">.</span><span class="nx">isOperational</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">500</span><span class="p">;</span> <span class="c1">// Internal Server Error</span>
        <span class="nx">message</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Internal Server Error</span><span class="dl">"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">res</span><span class="p">.</span><span class="nx">locals</span><span class="p">.</span><span class="nx">errorMessage</span> <span class="o">=</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>

    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">code</span><span class="p">:</span> <span class="nx">statusCode</span><span class="p">,</span>
        <span class="nx">message</span><span class="p">,</span>
        <span class="p">...(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">development</span><span class="dl">"</span> <span class="o">&amp;&amp;</span> <span class="p">{</span> <span class="na">stack</span><span class="p">:</span> <span class="nx">err</span><span class="p">.</span><span class="nx">stack</span> <span class="p">}),</span>
    <span class="p">};</span>

    <span class="k">if </span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">development</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">res</span><span class="p">.</span><span class="nf">status</span><span class="p">(</span><span class="nx">statusCode</span><span class="p">).</span><span class="nf">json</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
    <span class="nf">next</span><span class="p">();</span>
<span class="p">};</span>

<span class="k">export</span> <span class="p">{</span> <span class="nx">authMiddleware</span><span class="p">,</span> <span class="nx">errorConverter</span><span class="p">,</span> <span class="nx">errorHandler</span> <span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This code defines three middleware in the <code>src/middleware</code> folder: <code>authMiddleware</code>, <code>errorConverter</code>, and <code>errorHandler</code>. The <code>authMiddleware</code> handles user authentication, <code>errorConverter</code> converts errors to a standardized format, and <code>errorHandler</code> sends appropriate error responses. This middleware will be used in the Express application to handle authentication and errors.</p>

<h3>
  <a name="server-setup-and-initialization" href="#server-setup-and-initialization">
  </a>
  Server Setup and Initialization
</h3>

<p>Its time to set up our server. Firstly, open the <code>app.ts</code> file in the <code>src</code> folder and add the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="nx">express</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Express</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">userRouter</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./routes/messageRoutes</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">errorConverter</span><span class="p">,</span> <span class="nx">errorHandler</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./middleware</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">app</span><span class="p">:</span> <span class="nx">Express</span> <span class="o">=</span> <span class="nf">express</span><span class="p">();</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nf">json</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nf">urlencoded</span><span class="p">({</span> <span class="na">extended</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}));</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">userRouter</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">errorConverter</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">errorHandler</span><span class="p">);</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">app</span><span class="p">;</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This code sets up an Express application with middleware to handle JSON and URL-encoded data. It also includes the <code>messageRouter</code> for routing related to messages, as well as error-handling middleware.</p>

<p>Then, add the following code to the <code>server.ts</code> file in the same folder:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Server</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">http</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Socket</span><span class="p">,</span> <span class="nx">Server</span> <span class="k">as</span> <span class="nx">SocketIOServer</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">socket.io</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">app</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./app</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Message</span><span class="p">,</span> <span class="nx">connectDB</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./database</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">config</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./config/config</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">server</span><span class="p">:</span> <span class="nx">Server</span><span class="p">;</span>
<span class="nf">connectDB</span><span class="p">();</span>

<span class="nx">server</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nf">listen</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">PORT</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`Server is running on port </span><span class="p">${</span><span class="nx">config</span><span class="p">.</span><span class="nx">PORT</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
<span class="kd">const</span> <span class="nx">io</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SocketIOServer</span><span class="p">(</span><span class="nx">server</span><span class="p">);</span>
<span class="nx">io</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">connection</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">socket</span><span class="p">:</span> <span class="nx">Socket</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Client connected</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">socket</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">disconnect</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Client disconnected</span><span class="dl">"</span><span class="p">,</span> <span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">socket</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">sendMessage</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">io</span><span class="p">.</span><span class="nf">emit</span><span class="p">(</span><span class="dl">"</span><span class="s2">receiveMessage</span><span class="dl">"</span><span class="p">,</span> <span class="nx">message</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">socket</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">sendMessage</span><span class="dl">"</span><span class="p">,</span> <span class="k">async </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">senderId</span><span class="p">,</span> <span class="nx">receiverId</span><span class="p">,</span> <span class="nx">message</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">msg</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Message</span><span class="p">({</span> <span class="nx">senderId</span><span class="p">,</span> <span class="nx">receiverId</span><span class="p">,</span> <span class="nx">message</span> <span class="p">});</span>
        <span class="k">await</span> <span class="nx">msg</span><span class="p">.</span><span class="nf">save</span><span class="p">();</span>

        <span class="nx">io</span><span class="p">.</span><span class="nf">to</span><span class="p">(</span><span class="nx">receiverId</span><span class="p">).</span><span class="nf">emit</span><span class="p">(</span><span class="dl">"</span><span class="s2">receiveMessage</span><span class="dl">"</span><span class="p">,</span> <span class="nx">msg</span><span class="p">);</span> <span class="c1">// Assuming receiverId is socket ID of the receiver</span>
    <span class="p">});</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">exitHandler</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">server</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">server</span><span class="p">.</span><span class="nf">close</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="dl">"</span><span class="s2">Server closed</span><span class="dl">"</span><span class="p">);</span>
            <span class="nx">process</span><span class="p">.</span><span class="nf">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">process</span><span class="p">.</span><span class="nf">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">unexpectedErrorHandler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">error</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="nf">exitHandler</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">process</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">uncaughtException</span><span class="dl">"</span><span class="p">,</span> <span class="nx">unexpectedErrorHandler</span><span class="p">);</span>
<span class="nx">process</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">unhandledRejection</span><span class="dl">"</span><span class="p">,</span> <span class="nx">unexpectedErrorHandler</span><span class="p">);</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This code initializes the server, establishes a Socket.IO connection, and sets up event listeners for handling client connections, disconnections, and message sending. Additionally, it includes error handling for server closure and unexpected errors.</p>

<h3>
  <a name="script-update" href="#script-update">
  </a>
  Script Update
</h3>

<p>Dont forget to update the <code>"scripts"</code> tag for our Chat service, open the <code>package.json</code> file, and update it with the followingjust like our User service:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight json"><code><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"dev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NODE_ENV=development nodemon src/server.ts"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rm -rf build/ &amp;&amp; tsc -p ."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NODE_ENV=production nodemon build/server.js"</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span></code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Also, update the <code>"main"</code> tag by setting it to <code>"src/server.ts"</code>. With these, our chat service is ready. Start the development server by running:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>npm run dev
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This will initiate the development server for your Chat service. Additionally, you can test the Chat service endpoints using Postman or any API tool of your choice.</p>

<h2>
  <a name="notification-service" href="#notification-service">
  </a>
  Notification Service
</h2>

<p>Congratulations on completing the setup for our Chat Server microservice! With the Chat Service up and running smoothly, it's time to enhance the user experience by implementing a Notification Service.</p>

<p>In this section, we'll focus on creating a Notification Service that will handle real-time notifications for our chat application. Notifications play a crucial role in keeping users informed about new messages, ensuring timely communication, and providing a seamless chatting experience.</p>

<p>By the end of this section, we'll have a fully functional Notification Service integrated seamlessly with our existing Chat Server microservice, enhancing the overall user experience with real-time notifications. Let's dive in and get started!</p>

<p>Heres our Notification services file and folder structure:</p>

<p><a href="https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fnpfb8se0kle9z6auknle.png" class="article-body-image-wrapper"><img src="https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fnpfb8se0kle9z6auknle.png" alt="Notification structure" loading="lazy" width="464" height="850"></a></p>

<p>Now, use the following commands to set up your Notification Service project structure, ensure youre in your projects root directory:</p>

<p>Create and navigate to your <code>notification-service</code> folder:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nb">mkdir </span>notification-service <span class="o">&amp;&amp;</span> <span class="nb">cd </span>notification-service
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Next, create the <code>src</code>  folder and navigate to it:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nb">mkdir</span> <span class="nt">-p</span> src/config src/services src/middleware src/utils
<span class="nb">cd </span>src
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Now, create individual files:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nb">touch </span>config/config.ts services/RabbitMQService.ts services/EmailService.ts services/FCMService.ts services/index.ts middleware/index.ts utils/apiError.ts utils/userStatusStore.ts utils/index.ts server.ts
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Finally, create <code>Dockerfile</code>, <code>.dockerignore</code>, and <code>.env</code>  files:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nb">cd</span> ..
<span class="nb">touch </span>Dockerfile .dockerignore .env
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Here's a brief description of each file and folder created for the Notification Service:</p>

<ol>
<li>
<strong>config/config.ts</strong>:

<ul>
<li>This file contains configurations related to the Notification Service, such as RabbitMQ connection details and other environment variables.</li>
</ul>
</li>
<li>
<strong>services/RabbitMQService.ts</strong>:

<ul>
<li>This file implements the RabbitMQ service, which handles message queueing and communication with other microservices via RabbitMQ.</li>
</ul>
</li>
<li>
<strong>services/EmailService.ts</strong>:

<ul>
<li>This file defines the Email service, responsible for sending email notifications to users based on certain events or triggers within the application.</li>
</ul>
</li>
<li>
<strong>services/FCMService.ts</strong>:

<ul>
<li>This file contains the Firebase Cloud Messaging (FCM) service implementation, allowing the Notification Service to send push notifications to mobile devices.</li>
</ul>
</li>
<li>
<strong>services/index.ts</strong>:

<ul>
<li>This file exports all service modules, facilitating easy import and access to service functionalities from other parts of the application.</li>
</ul>
</li>
<li>
<strong>middleware/index.ts</strong>:

<ul>
<li>This file houses and exports middleware functions used within the Notification Service, such as authentication middleware or error handling middleware.</li>
</ul>
</li>
<li>
<strong>utils/apiError.ts</strong>:

<ul>
<li>This file defines the <code>ApiError</code> class, which represents custom error objects used throughout the application to handle API-related errors.</li>
</ul>
</li>
<li>
<strong>utils/userStatusStore.ts</strong>:

<ul>
<li>This file contains the <code>UserStatusStore</code> class, which manages the online/offline status of users, facilitating real-time communication and notification delivery.</li>
</ul>
</li>
<li>
<strong>utils/index.ts</strong>:

<ul>
<li>This file exports utility functions and classes for easy access and use within the Notification Service.</li>
</ul>
</li>
<li>
<strong>server.ts</strong>:

<ul>
<li>This file initializes and starts the Express server for the Notification Service, defining routes, middleware, and server setup logic.</li>
</ul>
</li>
</ol>

<p>Next, lets set up our environment and install the necessary dependencies. Use the following command, ensuring youre in the <code>notification-service</code> root directory:</p>

<p>Initialize Node.js project:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>npm init <span class="nt">-y</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Install dependencies<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>npm <span class="nb">install </span>amqplib dotenv express firebase-admin nodemon ts-node typescript nodemailer sib-api-v3-typescript @types/express @types/amqplib @types/nodemailer
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This command sequence will create a <code>package.json</code> file and install the required Node.js packages for the Notification Service. </p>

<p>Now, let's proceed with the TypeScript configuration. Run the following command:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>tsc <span class="nt">--init</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Open the generated <code>tsconfig.json</code> file and update it with the following configuration:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">compilerOptions</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">target</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">es6</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">module</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">commonjs</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">outDir</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./build</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">strict</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">esModuleInterop</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">skipLibCheck</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">include</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
    <span class="dl">"</span><span class="s2">src/**/*</span><span class="dl">"</span>
  <span class="p">],</span>
  <span class="dl">"</span><span class="s2">exclude</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
    <span class="dl">"</span><span class="s2">node_modules</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">tests</span><span class="dl">"</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Next, add the following code to your <code>.env</code> file:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight make"><code><span class="c"># Environment variables for Notification Service
</span>
<span class="c"># Set the environment to development
</span><span class="nv">NODE_ENV</span><span class="o">=</span><span class="s2">"development"</span>

<span class="c"># Port for the Notification Service
</span><span class="nv">PORT</span><span class="o">=</span>8083

<span class="c"># Replace 'YOUR_MESSAGE_BROKER_URL' with the RabbitMQ message broker URL used in the User and Chat Service
</span><span class="nv">MESSAGE_BROKER_URL</span><span class="o">=</span><span class="s2">"{{YOUR_MESSAGE_BROKER_URL}}"</span>

<span class="c"># SMTP configuration for sending emails using SendInBlue (Brevo)
</span><span class="nv">SMTP_HOST</span><span class="o">=</span><span class="s2">"smtp-relay.brevo.com"</span>
<span class="nv">SMTP_PORT</span><span class="o">=</span>587

<span class="c"># Replace placeholders with your SendInBlue (Brevo) account details
</span><span class="nv">SMTP_USER</span><span class="o">=</span><span class="s2">"{{YOUR_SENDINBLUE_ACCOUNT_EMAIL}}"</span>
<span class="nv">SMTP_PASS</span><span class="o">=</span><span class="s2">"{{YOUR_SENDINBLUE_MASTER_PASSWORD}}"</span>

<span class="c"># Replace placeholders with your SendInBlue (Brevo) API key and email source
</span><span class="nv">SENDINBLUE_APIKEY</span><span class="o">=</span><span class="s2">"{{YOUR_SENDINBLUE_APIKEY}}"</span>
<span class="nv">EMAIL_FROM</span><span class="o">=</span><span class="s2">"{{YOUR_EMAIL_SOURCE}}"</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>To set up the <code>.env</code> file correctly:</p>

<ol>
<li>Replace <code>{{YOUR_MESSAGE_BROKER_URL}}</code> with the RabbitMQ message broker URL you used in the User and Chat Service.</li>
<li>Visit <a href="https://brevo.com/" target="_blank" rel="noopener noreferrer">Brevo's website</a> and log in or create an account if you don't have one.</li>
<li>Navigate to the SMTP &amp; API key page and create an SMTP key. Copy the value and replace <code>{{YOUR_SENDINBLUE_MASTER_PASSWORD}}</code> with this value.</li>
<li>Click on the <code>API KEYS</code> tab, create an API key, and copy the value. Replace <code>{{YOUR_SENDINBLUE_APIKEY}}</code> with this value.</li>
<li>Replace <code>{{YOUR_SENDINBLUE_ACCOUNT_EMAIL}}</code> with your Brevo account's email.</li>
<li>Replace <code>{{YOUR_EMAIL_SOURCE}}</code> with the email address you want the emails to be sent from.</li>
</ol>

<p>Now, lets set up the <code>config.ts</code> file in the <code>src/config</code> folder. It manages the configuration variables used throughout the Notification Service. Let's dive into the code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">config</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">dotenv</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">configFile</span> <span class="o">=</span> <span class="s2">`./.env`</span><span class="p">;</span>
<span class="nf">config</span><span class="p">({</span> <span class="na">path</span><span class="p">:</span> <span class="nx">configFile</span> <span class="p">});</span>

<span class="kd">const</span> <span class="p">{</span>
    <span class="nx">PORT</span><span class="p">,</span>
    <span class="nx">JWT_SECRET</span><span class="p">,</span>
    <span class="nx">NODE_ENV</span><span class="p">,</span>
    <span class="nx">MESSAGE_BROKER_URL</span><span class="p">,</span>
    <span class="nx">SENDINBLUE_APIKEY</span><span class="p">,</span>
    <span class="nx">EMAIL_FROM</span><span class="p">,</span>
    <span class="nx">SMTP_HOST</span><span class="p">,</span>
    <span class="nx">SMTP_PORT</span> <span class="o">=</span> <span class="mi">587</span><span class="p">,</span>
    <span class="nx">SMTP_USER</span><span class="p">,</span>
    <span class="nx">SMTP_PASS</span><span class="p">,</span>
<span class="p">}</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">queue</span> <span class="o">=</span> <span class="p">{</span> <span class="na">notifications</span><span class="p">:</span> <span class="dl">"</span><span class="s2">NOTIFICATIONS</span><span class="dl">"</span> <span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="nx">PORT</span><span class="p">,</span>
    <span class="nx">JWT_SECRET</span><span class="p">,</span>
    <span class="na">env</span><span class="p">:</span> <span class="nx">NODE_ENV</span><span class="p">,</span>
    <span class="na">msgBrokerURL</span><span class="p">:</span> <span class="nx">MESSAGE_BROKER_URL</span><span class="p">,</span>
    <span class="nx">SENDINBLUE_APIKEY</span><span class="p">,</span>
    <span class="nx">EMAIL_FROM</span><span class="p">,</span>
    <span class="nx">queue</span><span class="p">,</span>
    <span class="na">smtp</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">host</span><span class="p">:</span> <span class="nx">SMTP_HOST</span><span class="p">,</span>
        <span class="na">port</span><span class="p">:</span> <span class="nx">SMTP_PORT</span> <span class="k">as</span> <span class="kr">number</span><span class="p">,</span>
        <span class="na">user</span><span class="p">:</span> <span class="nx">SMTP_USER</span><span class="p">,</span>
        <span class="na">pass</span><span class="p">:</span> <span class="nx">SMTP_PASS</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>In our <code>config.ts</code> file, we handle the configuration settings for our Notification Service. Using the <code>dotenv</code> library, we load environment variables from the <code>.env</code> file, which contains crucial settings like the server port, JWT secret key, message broker URL, SMTP settings, and more. These variables are then deconstructed for convenient access within the configuration object. Within this object, we define the notification queue and SMTP settings, ensuring seamless integration with external services such as RabbitMQ and SendInBlue (Brevo) for email delivery. Ultimately, we export this configuration object, making it available for use throughout the Notification Service, ensuring consistent and reliable behavior across the application.</p>

<h3>
  <a name="utils" href="#utils">
  </a>
  Utils
</h3>

<p>With our configurations in place, lets work on our utils. Add the following code to the <code>apiError.ts</code> in the <code>src/utils</code> file:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>class ApiError extends Error {
    statusCode: number;
    isOperational: boolean;

    constructor(
        statusCode: number,
        message: string | undefined,
        isOperational = true,
        stack = ""
    ) {
        super(message);
        this.statusCode = statusCode;
        this.isOperational = isOperational;
        if (stack) {
            this.stack = stack;
        } else {
            Error.captureStackTrace(this, this.constructor);
        }
    }
}

export { ApiError };
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This <code>ApiError</code> class performs the same function as in our User and Chat services.</p>

<p>Next, add the following code to the <code>userStatusStore.ts</code> file:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">class</span> <span class="nc">UserStatusStore</span> <span class="p">{</span>
    <span class="k">private</span> <span class="k">static</span> <span class="nx">instance</span><span class="p">:</span> <span class="nx">UserStatusStore</span><span class="p">;</span>
    <span class="k">private</span> <span class="nx">userStatuses</span><span class="p">:</span> <span class="nb">Record</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="nx">boolean</span><span class="o">&gt;</span><span class="p">;</span>

    <span class="nf">constructor</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">userStatuses</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="nf">getInstance</span><span class="p">():</span> <span class="nx">UserStatusStore</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">UserStatusStore</span><span class="p">.</span><span class="nx">instance</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">UserStatusStore</span><span class="p">.</span><span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">UserStatusStore</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">UserStatusStore</span><span class="p">.</span><span class="nx">instance</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nf">setUserOnline</span><span class="p">(</span><span class="nx">userId</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">userStatuses</span><span class="p">[</span><span class="nx">userId</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nf">setUserOffline</span><span class="p">(</span><span class="nx">userId</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">userStatuses</span><span class="p">[</span><span class="nx">userId</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nf">isUserOnline</span><span class="p">(</span><span class="nx">userId</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!!</span><span class="k">this</span><span class="p">.</span><span class="nx">userStatuses</span><span class="p">[</span><span class="nx">userId</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This performs the same function as it does in our Chat Service.</p>

<p>Lastly, export the utils by adding the code below to the <code>index.ts</code> file:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">UserStatusStore</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./userStatusStore</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ApiError</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./apiError</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="p">{</span> <span class="nx">UserStatusStore</span><span class="p">,</span> <span class="nx">ApiError</span> <span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This code exports the <code>ApiError</code> and <code>UserStatusStore</code> from the utils, making them available for use in other parts of the application. With our utils in place, lets define our middleware.</p>

<h3>
  <a name="email-service" href="#email-service">
  </a>
  Email Service
</h3>

<p>Add the following code to the <code>EmailService.ts</code> file located in the <code>src/services</code> folder:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="nx">nodemailer</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">nodemailer</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">config</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../config/config</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nc">EmailService</span> <span class="p">{</span>
    <span class="k">private</span> <span class="nx">transporter</span><span class="p">;</span>

    <span class="nf">constructor</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">transporter</span> <span class="o">=</span> <span class="nx">nodemailer</span><span class="p">.</span><span class="nf">createTransport</span><span class="p">({</span>
            <span class="na">host</span><span class="p">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">smtp</span><span class="p">.</span><span class="nx">host</span><span class="p">,</span>
            <span class="na">port</span><span class="p">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">smtp</span><span class="p">.</span><span class="nx">port</span><span class="p">,</span>
            <span class="na">secure</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="na">auth</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">user</span><span class="p">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">smtp</span><span class="p">.</span><span class="nx">user</span><span class="p">,</span>
                <span class="na">pass</span><span class="p">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">smtp</span><span class="p">.</span><span class="nx">pass</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">async</span> <span class="nf">sendEmail</span><span class="p">(</span><span class="nx">to</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">subject</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">content</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">mailOptions</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">from</span><span class="p">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">EMAIL_FROM</span><span class="p">,</span>
            <span class="na">to</span><span class="p">:</span> <span class="nx">to</span><span class="p">,</span>
            <span class="na">subject</span><span class="p">:</span> <span class="nx">subject</span><span class="p">,</span>
            <span class="na">html</span><span class="p">:</span> <span class="nx">content</span><span class="p">,</span>
        <span class="p">};</span>

        <span class="k">try</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">info</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">transporter</span><span class="p">.</span><span class="nf">sendMail</span><span class="p">(</span><span class="nx">mailOptions</span><span class="p">);</span>
            <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Email sent: %s</span><span class="dl">"</span><span class="p">,</span> <span class="nx">info</span><span class="p">.</span><span class="nx">messageId</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error sending email:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>In the <code>EmailService.ts</code> file, we define the <code>EmailService</code> class responsible for handling email delivery. Upon instantiation, the constructor initializes a Nodemailer transporter instance using SMTP settings retrieved from the configuration file. The <code>sendEmail</code> method accepts the recipient's email address, subject, and content as parameters and constructs the email message options accordingly. Finally, it attempts to send the email using the transporter instance, logging success or error messages appropriately. This service ensures efficient and reliable email communication within our application.</p>

<h3>
  <a name="firebase-cloud-messaging-fcm-services" href="#firebase-cloud-messaging-fcm-services">
  </a>
  Firebase Cloud Messaging (FCM) Services
</h3>

<p>In our Notification Service, we're integrating Firebase Cloud Messaging (FCM) Services to enable push notification delivery to mobile devices. The <code>FCMService.ts</code> file contains the code responsible for sending push notifications using the Firebase Admin SDK.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="nx">admin</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">firebase-admin</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">admin</span><span class="p">.</span><span class="nf">initializeApp</span><span class="p">({</span>
    <span class="na">credential</span><span class="p">:</span> <span class="nx">admin</span><span class="p">.</span><span class="nx">credential</span><span class="p">.</span><span class="nf">applicationDefault</span><span class="p">(),</span>
<span class="p">});</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nc">FCMService</span> <span class="p">{</span>
    <span class="k">async</span> <span class="nf">sendPushNotification</span><span class="p">(</span><span class="nx">token</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">notification</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">New Message</span><span class="dl">"</span><span class="p">,</span>
                <span class="na">body</span><span class="p">:</span> <span class="nx">message</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="na">token</span><span class="p">:</span> <span class="nx">token</span><span class="p">,</span>
        <span class="p">};</span>

        <span class="k">try</span> <span class="p">{</span>
            <span class="k">await</span> <span class="nx">admin</span><span class="p">.</span><span class="nf">messaging</span><span class="p">().</span><span class="nf">send</span><span class="p">(</span><span class="nx">payload</span><span class="p">);</span>
            <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Notification sent successfully</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error sending notification</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The <code>FCMService</code> class initializes the Firebase Admin SDK with default application credentials upon instantiation. It provides a <code>sendPushNotification</code> method, which accepts a device token and message as parameters to construct the notification payload. The method then sends the notification using the Firebase Admin SDK's messaging functionality. Any errors encountered during the process are logged for further investigation. This service ensures seamless push notification delivery to mobile devices, enhancing user engagement and real-time interaction within our application.</p>

<h3>
  <a name="rabbitmq-services" href="#rabbitmq-services">
  </a>
  RabbitMQ Services
</h3>

<p>The <code>RabbitMQService.ts</code> file orchestrates the communication between the Notification Service and RabbitMQ message broker, enabling efficient message exchange for real-time notifications. This service integrates our Email and FCM (Firebase Cloud Messaging) services to deliver notifications via email or push notifications based on the user's online status.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="nx">amqp</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Channel</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">amqplib</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">config</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../config/config</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FCMService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./FCMService</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">EmailService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./EmailService</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">UserStatusStore</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../utils</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">RabbitMQService</span> <span class="p">{</span>
    <span class="k">private</span> <span class="nx">channel</span><span class="o">!</span><span class="p">:</span> <span class="nx">Channel</span><span class="p">;</span>
    <span class="k">private</span> <span class="nx">fcmService</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FCMService</span><span class="p">();</span>
    <span class="k">private</span> <span class="nx">emailService</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">EmailService</span><span class="p">();</span>
    <span class="k">private</span> <span class="nx">userStatusStore</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">UserStatusStore</span><span class="p">();</span>

    <span class="nf">constructor</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nf">init</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">async</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">connection</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">amqp</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">msgBrokerURL</span><span class="o">!</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">connection</span><span class="p">.</span><span class="nf">createChannel</span><span class="p">();</span>
        <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nf">consumeNotification</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">async</span> <span class="nf">consumeNotification</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">channel</span><span class="p">.</span><span class="nf">assertQueue</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">notifications</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">channel</span><span class="p">.</span><span class="nf">consume</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">notifications</span><span class="p">,</span> <span class="k">async </span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if </span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">const</span> <span class="p">{</span>
                    <span class="kd">type</span><span class="p">,</span>
                    <span class="nx">userId</span><span class="p">,</span>
                    <span class="nx">message</span><span class="p">,</span>
                    <span class="nx">userEmail</span><span class="p">,</span>
                    <span class="nx">userToken</span><span class="p">,</span>
                    <span class="nx">fromName</span><span class="p">,</span>
                <span class="p">}</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nf">toString</span><span class="p">());</span>

                <span class="k">if </span><span class="p">(</span><span class="kd">type</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">MESSAGE_RECEIVED</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="c1">// Check if the user is online</span>
                    <span class="kd">const</span> <span class="nx">isUserOnline</span> <span class="o">=</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">userStatusStore</span><span class="p">.</span><span class="nf">isUserOnline</span><span class="p">(</span><span class="nx">userId</span><span class="p">);</span>

                    <span class="k">if </span><span class="p">(</span><span class="nx">isUserOnline</span> <span class="o">&amp;&amp;</span> <span class="nx">userToken</span><span class="p">)</span> <span class="p">{</span>
                        <span class="c1">// User is online, send a push notification</span>
                        <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">fcmService</span><span class="p">.</span><span class="nf">sendPushNotification</span><span class="p">(</span>
                            <span class="nx">userToken</span><span class="p">,</span>
                            <span class="nx">message</span>
                        <span class="p">);</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="k">if </span><span class="p">(</span><span class="nx">userEmail</span><span class="p">)</span> <span class="p">{</span>
                        <span class="c1">// User is offline, send an email</span>
                        <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">emailService</span><span class="p">.</span><span class="nf">sendEmail</span><span class="p">(</span>
                            <span class="nx">userEmail</span><span class="p">,</span>
                            <span class="s2">`New Message from </span><span class="p">${</span><span class="nx">fromName</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
                            <span class="nx">message</span>
                        <span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">channel</span><span class="p">.</span><span class="nf">ack</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span> <span class="c1">// Acknowledge the message after processing</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">rabbitMQService</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RabbitMQService</span><span class="p">();</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The <code>RabbitMQService</code> class establishes a connection with the RabbitMQ message broker and consumes notifications from a designated queue. Upon receiving a notification, it parses the message content and determines the appropriate notification delivery method based on the user's online status. If the user is online and has a valid FCM token, the service sends a push notification using the <code>FCMService</code>. Otherwise, if the user is offline and an email address is provided, it dispatches an email notification using the <code>EmailService</code>. This integration ensures seamless and reliable delivery of notifications to users across different channels, enhancing the overall user experience.</p>

<p>Next, export the services:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">FCMService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./FCMService</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">EmailService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./EmailService</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="p">{</span> <span class="nx">FCMService</span><span class="p">,</span> <span class="nx">EmailService</span> <span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<h3>
  <a name="middleware" href="#middleware">
  </a>
  Middleware
</h3>

<p>With our services ready, open the <code>index.ts</code> file in the <code>src/middleware</code> folder and add the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">ErrorRequestHandler</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ApiError</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../utils</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">errorConverter</span><span class="p">:</span> <span class="nx">ErrorRequestHandler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">error</span> <span class="o">=</span> <span class="nx">err</span><span class="p">;</span>
    <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">error</span> <span class="k">instanceof</span> <span class="nx">ApiError</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">statusCode</span> <span class="o">=</span>
            <span class="nx">error</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">||</span>
            <span class="p">(</span><span class="nx">error</span> <span class="k">instanceof</span> <span class="nb">Error</span>
                <span class="p">?</span> <span class="mi">400</span> <span class="c1">// Bad Request</span>
                <span class="p">:</span> <span class="mi">500</span><span class="p">);</span> <span class="c1">// Internal Server Error</span>
        <span class="kd">const</span> <span class="nx">message</span> <span class="o">=</span>
            <span class="nx">error</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span>
            <span class="p">(</span><span class="nx">statusCode</span> <span class="o">===</span> <span class="mi">400</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">Bad Request</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Internal Server Error</span><span class="dl">"</span><span class="p">);</span>
        <span class="nx">error</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ApiError</span><span class="p">(</span><span class="nx">statusCode</span><span class="p">,</span> <span class="nx">message</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">.</span><span class="nf">toString</span><span class="p">());</span>
    <span class="p">}</span>
    <span class="nf">next</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">errorHandler</span><span class="p">:</span> <span class="nx">ErrorRequestHandler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="p">{</span> <span class="nx">statusCode</span><span class="p">,</span> <span class="nx">message</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">err</span><span class="p">;</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">err</span><span class="p">.</span><span class="nx">isOperational</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">500</span><span class="p">;</span> <span class="c1">// Internal Server Error</span>
        <span class="nx">message</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Internal Server Error</span><span class="dl">"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">res</span><span class="p">.</span><span class="nx">locals</span><span class="p">.</span><span class="nx">errorMessage</span> <span class="o">=</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>

    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">code</span><span class="p">:</span> <span class="nx">statusCode</span><span class="p">,</span>
        <span class="nx">message</span><span class="p">,</span>
        <span class="p">...(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">development</span><span class="dl">"</span> <span class="o">&amp;&amp;</span> <span class="p">{</span> <span class="na">stack</span><span class="p">:</span> <span class="nx">err</span><span class="p">.</span><span class="nx">stack</span> <span class="p">}),</span>
    <span class="p">};</span>

    <span class="k">if </span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">development</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">res</span><span class="p">.</span><span class="nf">status</span><span class="p">(</span><span class="nx">statusCode</span><span class="p">).</span><span class="nf">json</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
    <span class="nf">next</span><span class="p">();</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The <code>errorConverter</code> and <code>errorHandler</code> functions perform the same functions as in our User and Chat Services.</p>

<h3>
  <a name="server-setup-and-initialization" href="#server-setup-and-initialization">
  </a>
  <strong>Server Setup and Initialization</strong>
</h3>

<p>Well done so far. Its time to set up our server. Open the <code>server.ts</code> file located in the <code>src</code> folder and add the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="nx">express</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Express</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Server</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">http</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">errorConverter</span><span class="p">,</span> <span class="nx">errorHandler</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./middleware</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">config</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./config/config</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">rabbitMQService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./services/RabbitMQService</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">app</span><span class="p">:</span> <span class="nx">Express</span> <span class="o">=</span> <span class="nf">express</span><span class="p">();</span>
<span class="kd">let</span> <span class="nx">server</span><span class="p">:</span> <span class="nx">Server</span><span class="p">;</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nf">json</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nf">urlencoded</span><span class="p">({</span> <span class="na">extended</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}));</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">errorConverter</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">errorHandler</span><span class="p">);</span>

<span class="nx">server</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nf">listen</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">PORT</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`Server is running on port </span><span class="p">${</span><span class="nx">config</span><span class="p">.</span><span class="nx">PORT</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">initializeRabbitMQClient</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="k">await</span> <span class="nx">rabbitMQService</span><span class="p">.</span><span class="nf">init</span><span class="p">();</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">RabbitMQ client initialized and listening for messages.</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Failed to initialize RabbitMQ client:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nf">initializeRabbitMQClient</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">exitHandler</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">server</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">server</span><span class="p">.</span><span class="nf">close</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="dl">"</span><span class="s2">Server closed</span><span class="dl">"</span><span class="p">);</span>
            <span class="nx">process</span><span class="p">.</span><span class="nf">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">process</span><span class="p">.</span><span class="nf">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">unexpectedErrorHandler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">error</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="nf">exitHandler</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">process</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">uncaughtException</span><span class="dl">"</span><span class="p">,</span> <span class="nx">unexpectedErrorHandler</span><span class="p">);</span>
<span class="nx">process</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">unhandledRejection</span><span class="dl">"</span><span class="p">,</span> <span class="nx">unexpectedErrorHandler</span><span class="p">);</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This code initializes the Express application, sets up middleware for error handling, and starts the server to listen on the specified port. Additionally, it initializes the RabbitMQ client to handle messaging functionality and sets up handlers for process exits and unexpected errors to ensure graceful shutdown and error handling within the application.</p>

<h3>
  <a name="script-update" href="#script-update">
  </a>
  Script Update
</h3>

<p>To ensure proper execution of the Notification service, update the <code>"scripts"</code> tag in the <code>package.json</code> file as follows:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight json"><code><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"dev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NODE_ENV=development nodemon src/server.ts"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rm -rf build/ &amp;&amp; tsc -p ."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NODE_ENV=production nodemon build/server.js"</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span></code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Additionally, update the <code>"main"</code> tag by setting it to <code>"src/server.ts"</code>. This change ensures that the main entry point of the service is correctly identified.</p>

<p>To initiate the development server for your Notification service, run the following command:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>npm run dev
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Executing this command will start the development server, allowing it to listen to incoming messages and handle notifications effectively.</p>

<h2>
  <a name="api-gateway" href="#api-gateway">
  </a>
  API Gateway
</h2>

<p>Congratulations on completing the setup of the Notification service! Now that our microservices are ready, lets create our API Gateway. This will connect all our microservices ports to one gateway. </p>

<ol>
<li>Navigate to the <code>chat-server</code> root directory</li>
<li>Create and navigate to the <code>gateway</code> folder
</li>
</ol>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nb">mkdir </span>gateway <span class="o">&amp;&amp;</span> <span class="nb">cd </span>gateway
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<ol>
<li>Set up the development server:
</li>
</ol>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>npm init <span class="nt">-y</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<ol>
<li>Install dependencies
</li>
</ol>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>npm <span class="nb">install </span>nodemon express ts-node express-http-proxy @types/express @types/express-http-proxy
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<ol>
<li>Create the <code>index.ts</code> file:
</li>
</ol>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nb">touch </span>index.ts
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<ol>
<li>Add the following code to the <code>index.ts</code> file:
</li>
</ol>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="nx">express</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">proxy</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">express-http-proxy</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nf">express</span><span class="p">();</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nf">json</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nf">urlencoded</span><span class="p">({</span> <span class="na">extended</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}));</span>

<span class="kd">const</span> <span class="nx">auth</span> <span class="o">=</span> <span class="nf">proxy</span><span class="p">(</span><span class="dl">"</span><span class="s2">http://localhost:8081</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">messages</span> <span class="o">=</span> <span class="nf">proxy</span><span class="p">(</span><span class="dl">"</span><span class="s2">http://localhost:8082</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">notifications</span> <span class="o">=</span> <span class="nf">proxy</span><span class="p">(</span><span class="dl">"</span><span class="s2">http://localhost:8083</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="dl">"</span><span class="s2">/api/auth</span><span class="dl">"</span><span class="p">,</span> <span class="nx">auth</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="dl">"</span><span class="s2">/api/messages</span><span class="dl">"</span><span class="p">,</span> <span class="nx">messages</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="dl">"</span><span class="s2">/api/notifications</span><span class="dl">"</span><span class="p">,</span> <span class="nx">notifications</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nf">listen</span><span class="p">(</span><span class="mi">8080</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Gateway is Listening to Port 8080</span><span class="dl">"</span><span class="p">);</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">exitHandler</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">server</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">server</span><span class="p">.</span><span class="nf">close</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="dl">"</span><span class="s2">Server closed</span><span class="dl">"</span><span class="p">);</span>
            <span class="nx">process</span><span class="p">.</span><span class="nf">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">process</span><span class="p">.</span><span class="nf">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">unexpectedErrorHandler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">error</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="nf">exitHandler</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">process</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">uncaughtException</span><span class="dl">"</span><span class="p">,</span> <span class="nx">unexpectedErrorHandler</span><span class="p">);</span>
<span class="nx">process</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">unhandledRejection</span><span class="dl">"</span><span class="p">,</span> <span class="nx">unexpectedErrorHandler</span><span class="p">);</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>In the above file, we create an Express application to serve as our API Gateway. This application is responsible for routing incoming HTTP requests to the appropriate microservices based on the request path. We begin by importing the necessary modules: <code>express</code> for creating the server and <code>express-http-proxy</code> for proxying requests to other services.</p>

<p>Next, we instantiate an Express application and configure it to parse JSON and URL-encoded data from incoming requests using <code>express.json()</code> and <code>express.urlencoded()</code> middleware.</p>

<p>Then, we create proxy middleware instances for each of our microservices: <code>auth</code>, <code>messages</code>, and <code>notifications</code>. These proxy middleware are configured to forward incoming requests to the corresponding microservice running on different ports: <code>8081</code> for user, <code>8082</code> for chat, and <code>8083</code> for notification service.</p>

<p>After defining the proxy middleware, we mount them on specific routes using <code>app.use()</code>. For example, requests to <code>/api/auth</code> are forwarded to the User microservice, requests to <code>/api/messages</code> are forwarded to the Chat microservice, and requests to <code>/api/notifications</code> are forwarded to the Notification microservice.</p>

<p>Finally, we start the Express server on port <code>8080</code> to listen for incoming requests. We also define error handlers to gracefully handle uncaught exceptions and unhandled rejections to ensure the stability of our application. This completes the setup of our API Gateway, which now acts as a central entry point for accessing the functionalities provided by our microservices.</p>

<p>Next, update the <code>package.json</code> file. Update the <code>"script"</code> tag with the following:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="dl">"</span><span class="s2">scripts</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">dev</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">nodemon index.ts</span><span class="dl">"</span><span class="p">,</span>
<span class="p">},</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>and the <code>"main"</code> tag with <code>"index.ts"</code>.</p>

<p>Now, run the following command to start the Gateway server:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="nx">npm</span> <span class="nx">run</span> <span class="nx">dev</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<h3>
  <a name="testing-and-debugging" href="#testing-and-debugging">
  </a>
  Testing and Debugging
</h3>

<p>With the setup of our microservices and API Gateway complete, it's crucial to conduct thorough testing to ensure flawless functionality.</p>

<ol>
<li>
<p><strong>Microservice Verification:</strong></p>

<p>Confirm that each microservice is up and running. The user service should be accessible at <code>[http://localhost:8081](http://localhost:8081)</code>, the chat service at <code>[http://localhost:8082](http://localhost:8082/)</code>, and the notification service at <code>[http://localhost:8083](http://localhost:8083/)</code>.</p>
</li>
<li><p>With your Postman or any other API tool of your choice. Wed be using Postman in this tutorial.</p></li>
<li>
<p><strong>User Registration and Authentication:</strong></p>

<p>Register a new user by sending a <code>POST</code> request to <code>http://localhost:8080/user/register</code> with the following JSON data:<br>
</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test User"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{REAL_EMAIL_ADDRESS}}"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>


<p>Replace <code>REAL_EMAIL_ADDRESS</code> with a valid email address (well need this to send emails). Upon successful registration, proceed to log in by sending a <code>POST</code> request to <code>[http://localhost:8080/user/login](http://localhost:8080/user/login)</code> with the registered email and password.</p>
</li>
<li>
<p><strong>Message Sending:</strong></p>

<p>Test the message-sending functionality by making a <code>POST</code> request to <code>[http://localhost:8080/chat/send](http://localhost:8080/chat/send)</code> with the following JSON data:<br>
</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"receiverId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{RECEIVER_ID}}"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello there!"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>


<p>Replace <code>RECEIVER_ID</code> with the ID of another registered user obtained from the registration response. Upon sending the message, an email notification will be dispatched to the recipient's email address.</p>
</li>
</ol>

<p>By meticulously executing these testing steps, we ensure that our microservices operate seamlessly and deliver the desired functionality. Any encountered issues or discrepancies will be addressed promptly, ensuring the reliability and robustness of our system.</p>

<h2>
  <a name="nginx-configuration" href="#nginx-configuration">
  </a>
  Nginx Configuration
</h2>

<p>Configure Nginx by following these steps:</p>

<ol>
<li>Create the necessary files and folders by running the following code in the <code>chat-server</code> root folder:
</li>
</ol>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nb">mkdir </span>nginx <span class="o">&amp;&amp;</span> <span class="nb">cd </span>nginx
<span class="nb">touch </span>Dockerfile nginx.conf
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This command creates the <code>nginx</code> folder to house our Nginx configurations and creates both the <code>Dockerfile</code> and <code>nginx.conf</code> files.</p>

<ol>
<li>Add the following code to the <code>Dockerfile</code>:
</li>
</ol>

<div class="highlight js-code-highlight">
<pre class="highlight docker"><code><span class="k">FROM</span><span class="s"> nginx:latest</span>

<span class="k">RUN </span><span class="nb">rm</span> /etc/nginx/nginx.conf

<span class="k">COPY</span><span class="s"> nginx.conf /etc/nginx/nginx.conf</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<ol>
<li>Add the following code to the <code>nginx.conf</code> file:
</li>
</ol>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>http <span class="o">{</span>
    upstream user <span class="o">{</span>
        server user:8081<span class="p">;</span>
    <span class="o">}</span>
    upstream chat <span class="o">{</span>
        server chat:8082<span class="p">;</span>
    <span class="o">}</span>
    upstream notification <span class="o">{</span>
        server notification:8083<span class="p">;</span>
    <span class="o">}</span>

    server <span class="o">{</span>
        listen 85<span class="p">;</span>

        location /user/ <span class="o">{</span>
            proxy_pass http://user/<span class="p">;</span>
        <span class="o">}</span>

        location /chat/ <span class="o">{</span>
            proxy_pass http://chat/<span class="p">;</span>
        <span class="o">}</span>

        location /notification/ <span class="o">{</span>
            proxy_pass http://notification/<span class="p">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
events <span class="o">{}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This configuration uses Nginx as a reverse proxy to route requests to the appropriate microservices based on the URL path. Each microservice is defined as an upstream server, and Nginx listens on port <code>85</code> for incoming requests. Requests to <code>/user/</code>, <code>/chat/</code>, and <code>/notification/</code> are proxied to the respective microservices running on ports <code>8081</code>, <code>8082</code>, and <code>8083</code>.</p>

<h2>
  <a name="docker-and-containerization" href="#docker-and-containerization">
  </a>
  Docker and Containerization
</h2>

<p>With everything working perfectly, its time to containerize our microservices. Containerization is pivotal for deploying and managing our services efficiently. Let's proceed with containerizing each microservice using Docker. Follow these steps:</p>

<ol>
<li>Open the <code>Dockerfile</code> located in the <code>user-service</code> folder, and add the following code:
</li>
</ol>

<div class="highlight js-code-highlight">
<pre class="highlight docker"><code><span class="k">FROM</span><span class="s"> node:18-alpine</span>

<span class="k">WORKDIR</span><span class="s"> /usr/src/app</span>

<span class="k">COPY</span><span class="s"> package*.json ./</span>

<span class="k">RUN </span>npm <span class="nb">install</span>

<span class="k">COPY</span><span class="s"> . .</span>

<span class="k">RUN </span>npm run build

<span class="k">EXPOSE</span><span class="s"> 8081</span>

<span class="k">CMD</span><span class="s"> [ "npm", "start" ]</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This Dockerfile configures a lightweight Node.js environment, copies the necessary files, installs dependencies, builds the application, exposes port <code>8081</code>, and starts the user service upon container initialization.</p>

<ol>
<li>Open the <code>Dockerfile</code> located in the <code>chat-service</code> folder, and append the following code:
</li>
</ol>

<div class="highlight js-code-highlight">
<pre class="highlight docker"><code><span class="k">FROM</span><span class="s"> node:18-alpine</span>

<span class="k">WORKDIR</span><span class="s"> /usr/src/app</span>

<span class="k">COPY</span><span class="s"> package*.json ./</span>

<span class="k">RUN </span>npm <span class="nb">install</span>

<span class="k">COPY</span><span class="s"> . .</span>

<span class="k">RUN </span>npm run build

<span class="k">EXPOSE</span><span class="s"> 8082</span>

<span class="k">CMD</span><span class="s"> [ "npm", "start" ]</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Similarly, this exposes port <code>8082</code> and starts the chat service upon container initialization.</p>

<ol>
<li>Open the <code>Dockerfile</code> located in the <code>notification-service</code> folder, and add the following code:
</li>
</ol>

<div class="highlight js-code-highlight">
<pre class="highlight docker"><code><span class="k">FROM</span><span class="s"> node:18-alpine</span>

<span class="k">WORKDIR</span><span class="s"> /usr/src/app</span>

<span class="k">COPY</span><span class="s"> package*.json ./</span>

<span class="k">RUN </span>npm <span class="nb">install</span>

<span class="k">COPY</span><span class="s"> . .</span>

<span class="k">RUN </span>npm run build

<span class="k">EXPOSE</span><span class="s"> 8083</span>

<span class="k">CMD</span><span class="s"> [ "npm", "start" ]</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This also exposes port <code>8083</code> and starts the notification service upon container initialization.</p>

<ol>
<li>Update the <code>.dockerignore</code> file of every microservice with the following code:
</li>
</ol>

<div class="highlight js-code-highlight">
<pre class="highlight docker"><code>node_modules
npm-debug.log
Dockerfile
.dockerignore
.git
.gitignore
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This excludes the above-mentioned files from being included in the Docker image creation process for each microservice. This helps reduce the size of the Docker image and ensures that only necessary files are included.</p>

<ol>
<li>Open the <code>docker-compose.yml</code> file in the <code>chat-server</code> folder (the parent folder) and add the following code:
</li>
</ol>

<div class="highlight js-code-highlight">
<pre class="highlight docker"><code>version: '3.8'
services:
  mongodb:
    image: mongo:latest
    restart: unless-stopped
    ports:
      - "27017:27017"
    volumes:
      - mongo-data:/data/db

  user:
    build:
      context: ./user-service
      dockerfile: Dockerfile
    ports:
      - "8081:8081"
    restart: always
    depends_on:
      - "mongodb"
    environment:
      - NODE_ENV=production

  chat:
    build:
      context: ./chat-service
      dockerfile: Dockerfile
    ports:
      - "8082:8082"
    depends_on:
      - "mongodb"
    environment:
      - NODE_ENV=production

  notification:
    build:
      context: ./notification-service
      dockerfile: Dockerfile
    ports:
      - "8083:8083"
    depends_on:
      - "mongodb"
    environment:
      - NODE_ENV=production

  nginx:
    build:
      context: ./nginx
      dockerfile: Dockerfile
    ports:
      - "85:85"
    depends_on:
      - user
      - chat
      - notification

volumes:
  mongo-data:
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This Docker Compose configuration defines several services:</p>

<ul>
<li>
<code>mongodb</code>: Runs a MongoDB container.</li>
<li>
<code>user</code>, <code>chat</code>, and <code>notification</code>: Build and run containers for the user service, chat service, and notification service, respectively.</li>
<li>
<code>nginx</code>: Configures an NGINX server for routing requests to the appropriate microservices.</li>
</ul>

<p>Each service has its configuration for building the Docker image, specifying ports to expose, and setting environment variables. Additionally, dependencies are defined to ensure that the services start-up in the correct order. Finally, a volume is specified to persist MongoDB data between container restarts.</p>

<ol>
<li>To start up our application in a containerized environment, run the following command:
</li>
</ol>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>docker-compose up <span class="nt">--build</span> 
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This command will build and start all the services defined in the <code>docker-compose.yml</code> file. It will also ensure that any changes made to the Dockerfiles or other configurations are applied during the build process.</p>

<p><a href="https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fibi3kafly1ofqq63o10x.png" class="article-body-image-wrapper"><img src="https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fibi3kafly1ofqq63o10x.png" alt="Docker logs" loading="lazy" width="800" height="331"></a></p>

<h2>
  <a name="conclusion" href="#conclusion">
  </a>
  Conclusion
</h2>

<p>We have successfully designed, developed, and containerized a microservices-based chat application server. Through a step-by-step approach, we tackled each component of the system, including the User Service, Chat Service, Notification Service, API Gateway, Docker, and Nginx configuration.</p>

<p>We began by structuring our project directory and setting up each microservice individually. The User Service facilitated user registration and authentication, while the Chat Service enabled real-time communication between users. The Notification Service handled email notifications and push notifications using RabbitMQ for message queuing.</p>

<p>To ensure seamless communication between microservices, we implemented an API Gateway using <code>Express.js</code>, which served as a single entry point for our application. This allowed us to centralize access to our microservices and manage routing efficiently.</p>

<p>Following the development phase, we containerized our microservices using Docker, ensuring consistent deployment across different environments. We configured Nginx as a reverse proxy to route incoming requests to the appropriate microservice based on the URL path.</p>

<p>Throughout the tutorial, we emphasized the importance of testing and debugging to ensure the reliability and functionality of our application. By conducting manual testing and leveraging tools like Postman, we verified the behavior of each microservice and API endpoint, addressing any issues that arose along the way.</p>

<p>In conclusion, this tutorial serves as an introductory guide to microservices, providing foundational knowledge and practical experience in building and deploying microservices-based applications. While it covers essential concepts and implementation steps, it's important to recognize that microservices entail a vast and nuanced ecosystem beyond the scope of this tutorial. By following along with this tutorial, beginners can gain valuable insights into microservices architecture, containerization, and best practices for developing scalable and resilient applications. For experienced developers, this tutorial offers a refresher on key principles and an opportunity to explore modern technologies in the context of microservices development. To access the full code of this tutorial, please visit <a href="https://github.com/davydocsurg/chat-server/tree/develop" target="_blank" rel="noopener noreferrer">this repository</a>.</p>


          </div>

            <div class="js-billboard-container body-billboard-container" data-async-url="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/billboards/post_body_bottom"></div>
        </div>
          <section id="comments" data-follow-button-container="true" data-updated-at="2024-12-30 20:45:35 UTC" class="text-padding mb-4 border-t-1 border-0 border-solid border-base-10">
      <header class="relative flex justify-between items-center mb-6">
        <div class="flex items-center">
          <h2 class="crayons-subtitle-1">
            Top comments <span class="js-comments-count" data-comments-count="13">(13)</span>
          </h2>
            <button class="c-btn c-btn--ghost crayons-btn--icon-left" id="toggle-comments-sort-dropdown" aria-controls="comments-sort-dropdown-container" aria-expanded="false" aria-label="Sort comments" aria-haspopup="true">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" class="mt-2"><title>Crown</title>
    <path d="M12 18l-4-3.771 1-.943 3 2.829 3-2.829 1 .943L12 18zm0-10.115l-3 2.829-1-.943L12 6l4 3.771-1 .942-3-2.828z"></path>
</svg>

            </button>
        </div>

          <nav class="crayons-dropdown p-4" id="comments-sort-dropdown-container" aria-labelledby="comments-sort-title">
              <h3 id="comments-sort-title" class="mb-3">Sort discussion: </h3>
              <ul class="comments-sort-dropdown__list">
                <li class="comment-sort-option">
  <a
    href="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f?comments_sort=top#toggle-comments-sort-dropdown"
    class="comment-sort-option__header pl-7 pb-0 crayons-link--block block"
    aria-describedby="top-description-text"
    aria-current="page">
    <div>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" role="img" aria-labelledby="ah3v994o3tnkabtn7ib46qg8z18520th" aria-hidden="true" class="crayons-icon"><title id="ah3v994o3tnkabtn7ib46qg8z18520th">Selected Sort Option</title>
    <path d="M10 15.172l9.192-9.193 1.415 1.414L10 18l-6.364-6.364 1.414-1.414 4.95 4.95z"></path>
</svg>

       Top
    </div>
     <div id="top-description-text" class="crayons-field__description">
      Most upvoted and relevant comments will be first
    </div>
  </a>
</li>

                <li class="comment-sort-option">
  <a
    href="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f?comments_sort=latest#toggle-comments-sort-dropdown"
    class="comment-sort-option__header pl-7 pb-0 crayons-link--block block"
    aria-describedby="latest-description-text"
    aria-current="">
    <div>
      
       Latest
    </div>
     <div id="latest-description-text" class="crayons-field__description">
      Most recent comments will be first
    </div>
  </a>
</li>

                <li class="comment-sort-option">
  <a
    href="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f?comments_sort=oldest#toggle-comments-sort-dropdown"
    class="comment-sort-option__header pl-7 pb-0 crayons-link--block block"
    aria-describedby="oldest-description-text"
    aria-current="">
    <div>
      
       Oldest
    </div>
     <div id="oldest-description-text" class="crayons-field__description">
      The oldest comments will be first
    </div>
  </a>
</li>

              </ul>
          </nav>

        <div id="comment-subscription" class="print-hidden">
          <div class="crayons-btn-group">
            <span class="crayons-btn crayons-btn--outlined">Subscribe</span>
          </div>
        </div>
      </header>
      <div id="billboard_delay_trigger"></div>
      <div
        id="comments-container"
        data-testid="comments-container"
        data-commentable-id="1755905"
        data-commentable-type="Article"
        data-has-recent-comment-activity="true">

          <div id="response-templates-data" class="hidden"></div>
  <script src="https://assets.dev.to/assets/validateFileInputs-05463b69aba668ec087524d53e9deab577f336983b4d93a14610fac314340d19.js" defer="defer"></script>


<form class="comment-form print-hidden" id="new_comment" action="/comments" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" autocomplete="off" />

  <input type="hidden" name="authenticity_token" value="NOTHING" id="new_comment_authenticity_token">

    <input value="1755905" autocomplete="off" type="hidden" name="comment[commentable_id]" id="comment_commentable_id" />
    <input value="Article" autocomplete="off" type="hidden" name="comment[commentable_type]" id="comment_commentable_type" />
    

  <span class="crayons-avatar m:crayons-avatar--l mr-2 shrink-0">
    <img src="https://media2.dev.to/dynamic/image/width=256,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png" width="32" height="32" alt="pic" class="crayons-avatar__image overflow-hidden" id="comment-primary-user-profile--avatar" loading="lazy" />
  </span>
  <div class="comment-form__inner">
    <div class="comment-form__field" data-tracking-name="comment_form_textfield">
      <textarea placeholder="Add to the discussion" onfocus="handleFocus(event)" onkeyup="handleKeyUp(event)" onkeydown="handleKeyDown(event)" oninput="handleChange(event)" id="text-area" required="required" class="crayons-textfield comment-textarea crayons-textfield--ghost" aria-label="Add a comment to the discussion" name="comment[body_markdown]">
</textarea>

    </div>

    <div class="response-templates-container crayons-card crayons-card--secondary p-4 mb-4 comment-form__templates fs-base hidden">
      <header class="mb-3">
        <button type="button" class="crayons-btn personal-template-button active" data-target-type="personal" data-form-id="new_comment">Personal</button>
        <button type="button" class="crayons-btn moderator-template-button hidden" data-target-type="moderator" data-form-id="new_comment">Trusted User</button>
      </header>

      <div class="personal-responses-container">
      </div>
      <div class="moderator-responses-container hidden">
      </div>

      <a target="_blank" rel="noopener nofollow" href="/settings/response-templates">
        Create template
      </a>
      <p>Templates let you quickly answer FAQs or store snippets for re-use.</p>
    </div>

    <div class="comment-form__preview text-styles text-styles--secondary" id="preview-div"></div>

    <div class="comment-form__buttons mb-4">
      <button type="submit" class="crayons-btn mr-2 js-btn-enable" onclick="validateField(event)" data-tracking-name="comment_submit_button" disabled>Submit</button>
      <button type="button" class="preview-toggle crayons-btn crayons-btn--secondary comment-action-preview js-btn-enable mr-2" data-tracking-name="comment_preview_button" disabled>Preview</button>
      <a href="/404.html" class="dismiss-edit-comment crayons-btn crayons-btn--ghost js-btn-dismiss hidden">Dismiss</a>
    </div>
  </div>

  <div class="code-of-conduct" id="toggle-code-of-conduct-checkbox"></div>
</form>


        <div class="comments" id="comment-trees-container">
                <details class="comment-wrapper js-comment-wrapper comment-wrapper--deep-0
                    root
                    " open>
      <summary aria-label="Toggle this comment (and replies)" data-tracking-name="expand_comment_toggle">
        <span class="m:mx-1 inline-block align-middle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="afy8d5smdhxg7l88aq1t4hbncnz5ckl2" class="crayons-icon expanded"><title id="afy8d5smdhxg7l88aq1t4hbncnz5ckl2">Collapse</title>
    <path d="M12 10.677L8 6.935 9 6l3 2.807L15 6l1 .935-4 3.742zm0 4.517L9 18l-1-.935 4-3.742 4 3.742-1 .934-3-2.805z"></path>
</svg>

          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="ah3q73qtgzemsnyyk168x7mdw26ge14z" class="crayons-icon collapsed"><title id="ah3q73qtgzemsnyyk168x7mdw26ge14z">Expand</title>
    <path d="M12 18l-4-3.771 1-.943 3 2.829 3-2.829 1 .943L12 18zm0-10.115l-3 2.829-1-.943L12 6l4 3.771-1 .942-3-2.828z"></path>
</svg>

        </span>
        <span class="js-collapse-comment-content inline-block align-middle"></span>
      </summary>
  <div
    id="comment-node-1182700"
    class="
      comment single-comment-node
      
      root
      comment--deep-0
      
    "
    data-comment-id="1182700"
    data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2f7ec"
    data-comment-author-id="1503825"
    data-content-user-id="1503825">
    <a name="comment-2f7ec" style="position: absolute; top: -8px;">&nbsp;</a>
    
<div class="comment__inner">
    <a href="https://dev.to/raoudha_hamdi" class="shrink-0 crayons-avatar m:crayons-avatar--l mt-4 m:mt-3">
    <img class="crayons-avatar__image" width="32" height="32" src="https://media2.dev.to/dynamic/image/width=50,height=50,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F1503825%2Ff39d7900-e407-4397-87ee-56eb7b285fb2.png" alt="raoudha_hamdi profile image" loading="lazy" />
  </a>


  <div class="inner-comment comment__details">
    <div class="comment__content crayons-card">
        


        <div class="comment__header">
  <a href="https://dev.to/raoudha_hamdi" class="crayons-link crayons-link--secondary flex items-center fw-medium m:hidden">
    <span class="js-comment-username">raoudha hamdi</span>
  </a>
  <div class="profile-preview-card relative mb-4 s:mb-0 fw-medium hidden m:block">
    <button id="comment-profile-preview-trigger-1182700" aria-controls="comment-profile-preview-content-1182700" class="profile-preview-card__trigger p-1 -my-1 -ml-1 crayons-btn crayons-btn--ghost" aria-label="raoudha hamdi profile details">
      raoudha hamdi
      
    </button>
    <div id="comment-profile-preview-content-1182700" class="profile-preview-card__content p-4 pt-0 branded-7 crayons-dropdown" style="--card-color: #000000; border-top-color: var(--card-color);" data-testid="profile-preview-card" data-repositioning-dropdown="true">
    <div class="gap-4 grid">
        <div class="-mt-4">
  <a href="/raoudha_hamdi" class="flex">
    <span class="crayons-avatar crayons-avatar--xl  mr-2 shrink-0">
      <img src="https://media2.dev.to/dynamic/image/width=90,height=90,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F1503825%2Ff39d7900-e407-4397-87ee-56eb7b285fb2.png" class="crayons-avatar__image" alt="" loading="lazy" />
    </span>
    <span class="crayons-link crayons-subtitle-2 mt-5">
      raoudha hamdi
      
    </span>
  </a>
</div>

<div class="print-hidden">
  <button name="button" type="button" data-info="{&quot;className&quot;:&quot;User&quot;,&quot;style&quot;:&quot;&quot;,&quot;id&quot;:1503825,&quot;name&quot;:&quot;raoudha hamdi&quot;}" class="crayons-btn follow-action-button whitespace-nowrap w-100 follow-user" aria-label="Follow user: raoudha hamdi" aria-pressed="false">Follow</button>
</div>
  <div class="color-base-70">
    A skilled backend developer with experience in building  web applications. Proficient in Node.js, TypeScript, ECMAScript 6, and MongoDB.
  </div>

  <div class="user-metadata-details">
    <ul class="user-metadata-details-inner">
      <li>
        <div class="key">
          Joined
        </div>
        <div class="value">
          <time datetime="2024-05-18T11:06:58Z" class="date">May 18, 2024</time>
        </div>
      </li>
    </ul>
  </div>

    </div>
</div>

  </div>

  <span class="color-base-30 px-2 m:pl-0" role="presentation">&bull;</span>

<a href="https://dev.to/raoudha_hamdi/comment/2f7ec" class="comment-date crayons-link crayons-link--secondary fs-s">
  <time datetime="2024-05-18T11:17:37Z" class=date-no-year>
    May 18
  </time>

</a>


  <div class="comment__dropdown" data-tracking-name="comment_dropdown">
    <button id="comment-dropdown-trigger-1182700" aria-controls="comment-dropdown-1182700" aria-expanded="false"
      class="dropbtn comment__dropdown-trigger crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon "
      aria-label="Toggle dropdown menu" aria-haspopup="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="aqdfpixpazdvc8jk5ngdwe2wyfbmrc3g" class="crayons-icon pointer-events-none"><title id="aqdfpixpazdvc8jk5ngdwe2wyfbmrc3g">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

    </button>
    <div id="comment-dropdown-1182700" class="crayons-dropdown right-1 s:right-0 s:left-auto fs-base dropdown">
      <ul class="m-0">
        <li><a href="https://dev.to/raoudha_hamdi/comment/2f7ec" class="crayons-link crayons-link--block permalink-copybtn" aria-label="Copy link to raoudha hamdi&#39;s comment" data-no-instant>Copy link</a></li>
        <li class="comment-actions hidden" data-user-id="1503825" data-action="settings-button" data-path="https://dev.to/raoudha_hamdi/comment/2f7ec/settings" aria-label="Go to raoudha hamdi&#39;s comment settings"></li>
          <li class="comment-actions hidden" data-action="hide-button" data-commentable-user-id="465107" data-user-id="1503825">
              <button
                class="flex justify-between crayons-link crayons-link--block w-100 bg-transparent border-0 hide-comment"
                data-hide-type="hide"
                data-comment-id="1182700"
                data-comment-url="https://dev.to/raoudha_hamdi/comment/2f7ec"
                aria-label="Hide raoudha hamdi&#39;s comment">
                Hide
              </button>
          </li>
        <li class="mod-actions hidden mod-actions-comment-button" data-path="https://dev.to/raoudha_hamdi/comment/2f7ec/mod" aria-label="Moderate raoudha hamdi&#39;s comment"></li>
        <li class="report-abuse-link-wrapper" data-path="/report-abuse?url=https://dev.to/raoudha_hamdi/comment/2f7ec" aria-label="Report raoudha hamdi&#39;s comment as abusive or violating our code of conduct and/or terms and conditions"></li>
        <li class="current-user-actions"></li>
      </ul>
    </div>
  </div>
</div>


        <div
          class="
            comment__body
            text-styles
            text-styles--secondary
            body
            
            
          ">
          <p>Thanks for the clear explanation.Much appreciated.</p>


        </div>

    </div>

    <script>
    </script>

    <footer class="comment__footer print-hidden">
  <button
    class="crayons-tooltip__activator crayons-btn crayons-btn--ghost crayons-btn--icon-left crayons-btn--s mr-1 reaction-like inline-flex reaction-button"
    id="button-for-comment-1182700"
    data-comment-id="1182700"
    aria-label="like"
    data-tracking-name="comment_heart_button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="atmu9t647j0diu0f0gbxu349qtvtqutr" class="crayons-icon reaction-icon not-reacted"><title id="atmu9t647j0diu0f0gbxu349qtvtqutr">Like comment: </title><path d="M18.884 12.595l.01.011L12 19.5l-6.894-6.894.01-.01A4.875 4.875 0 0112 5.73a4.875 4.875 0 016.884 6.865zM6.431 7.037a3.375 3.375 0 000 4.773L12 17.38l5.569-5.569a3.375 3.375 0 10-4.773-4.773L9.613 10.22l-1.06-1.062 2.371-2.372a3.375 3.375 0 00-4.492.25v.001z"></path></svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="ahem9gdnc80rui3i3s731wi7tc30wpdb" class="crayons-icon crayons-icon reaction-icon--like reaction-icon reacted"><title id="ahem9gdnc80rui3i3s731wi7tc30wpdb">Like comment: </title>
    <path d="M5.116 12.595a4.875 4.875 0 015.56-7.68h-.002L7.493 8.098l1.06 1.061 3.181-3.182a4.875 4.875 0 016.895 6.894L12 19.5l-6.894-6.894.01-.01z"></path>
</svg>

    <span class="reactions-count">3</span><span class="reactions-label hidden m:inline-block">&nbsp;likes</span>
    <span data-testid="tooltip" class="crayons-tooltip__content">
      Like
    </span>
  </button>

      <a
        class="actions crayons-btn crayons-btn--ghost crayons-btn--s crayons-btn--icon-left toggle-reply-form mr-1 inline-flex"
        href="#/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/new/2f7ec"
        data-comment-id="1182700"
        data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2f7ec"
        data-tracking-name="comment_reply_button"
        data-testid="reply-button-1182700"
        rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="amag994su50kzbo48zig1vis1uderrpx" class="crayons-icon reaction-icon not-reacted"><title id="amag994su50kzbo48zig1vis1uderrpx">Comment button</title><path d="M10.5 5h3a6 6 0 110 12v2.625c-3.75-1.5-9-3.75-9-8.625a6 6 0 016-6zM12 15.5h1.5a4.501 4.501 0 001.722-8.657A4.5 4.5 0 0013.5 6.5h-3A4.5 4.5 0 006 11c0 2.707 1.846 4.475 6 6.36V15.5z"></path></svg>

        <span class="hidden m:inline-block">Reply</span>
      </a>

</footer>

  </div>
</div>
    <details class="comment-wrapper js-comment-wrapper comment-wrapper--deep-1
                    child
                    " open>
      <summary aria-label="Toggle this comment (and replies)" data-tracking-name="expand_comment_toggle">
        <span class="mx-0 inline-block align-middle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a7doyiq5fhf7lp468drcqac2mdylaz7p" class="crayons-icon expanded"><title id="a7doyiq5fhf7lp468drcqac2mdylaz7p">Collapse</title>
    <path d="M12 10.677L8 6.935 9 6l3 2.807L15 6l1 .935-4 3.742zm0 4.517L9 18l-1-.935 4-3.742 4 3.742-1 .934-3-2.805z"></path>
</svg>

          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="aqrigwrgfw3i5g6s8gy5y66j4opfqmv" class="crayons-icon collapsed"><title id="aqrigwrgfw3i5g6s8gy5y66j4opfqmv">Expand</title>
    <path d="M12 18l-4-3.771 1-.943 3 2.829 3-2.829 1 .943L12 18zm0-10.115l-3 2.829-1-.943L12 6l4 3.771-1 .942-3-2.828z"></path>
</svg>

        </span>
        <span class="js-collapse-comment-content inline-block align-middle"></span>
      </summary>
  <div
    id="comment-node-1182829"
    class="
      comment single-comment-node
      
      child
      comment--deep-1
      
    "
    data-comment-id="1182829"
    data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2f7jb"
    data-comment-author-id="465107"
    data-content-user-id="465107">
    <a name="comment-2f7jb" style="position: absolute; top: -8px;">&nbsp;</a>
    
<div class="comment__inner">
    <a href="https://dev.to/davydocsurg" class="shrink-0 crayons-avatar mt-4">
    <img class="crayons-avatar__image" width="32" height="32" src="https://media2.dev.to/dynamic/image/width=50,height=50,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F465107%2F9de75c19-16ab-4402-a8a2-cf7db85192d7.jpg" alt="davydocsurg profile image" loading="lazy" />
  </a>


  <div class="inner-comment comment__details">
    <div class="comment__content crayons-card">
        


        <div class="comment__header">
  <a href="https://dev.to/davydocsurg" class="crayons-link crayons-link--secondary flex items-center fw-medium m:hidden">
    <span class="js-comment-username">David Chibueze Ndubuisi</span>
      <span class="crayons-hover-tooltip inline-block spec-op-author -mr-2" data-tooltip="Author">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" class="crayons-icon">
    <path d="M12 8.25a6 6 0 110 12 6 6 0 010-12zm0 2.625l-.992 2.01-2.218.322 1.605 1.564-.379 2.21L12 15.937l1.984 1.043-.379-2.209 1.605-1.564-2.218-.323L12 10.875zm.75-6.376l3.75.001v2.25l-1.022.854a7.45 7.45 0 00-2.728-.817V4.5zm-1.5 0v2.288a7.451 7.451 0 00-2.727.816L7.5 6.75V4.5h3.75z"></path>
</svg>

      </span>
  </a>
  <div class="profile-preview-card relative mb-4 s:mb-0 fw-medium hidden m:block">
    <button id="comment-profile-preview-trigger-1182829" aria-controls="comment-profile-preview-content-1182829" class="profile-preview-card__trigger p-1 -my-1 -ml-1 crayons-btn crayons-btn--ghost" aria-label="David Chibueze Ndubuisi profile details">
      David Chibueze Ndubuisi
      
    </button>
    <div id="comment-profile-preview-content-1182829" class="profile-preview-card__content p-4 pt-0 branded-7 crayons-dropdown" style="--card-color: #0c0407; border-top-color: var(--card-color);" data-testid="profile-preview-card" data-repositioning-dropdown="true">
    <div class="gap-4 grid">
        <div class="-mt-4">
  <a href="/davydocsurg" class="flex">
    <span class="crayons-avatar crayons-avatar--xl  mr-2 shrink-0">
      <img src="https://media2.dev.to/dynamic/image/width=90,height=90,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F465107%2F9de75c19-16ab-4402-a8a2-cf7db85192d7.jpg" class="crayons-avatar__image" alt="" loading="lazy" />
    </span>
    <span class="crayons-link crayons-subtitle-2 mt-5">
      David Chibueze Ndubuisi
      
    </span>
  </a>
</div>

<div class="print-hidden">
  <button name="button" type="button" data-info="{&quot;className&quot;:&quot;User&quot;,&quot;style&quot;:&quot;&quot;,&quot;id&quot;:465107,&quot;name&quot;:&quot;David Chibueze Ndubuisi&quot;}" class="crayons-btn follow-action-button whitespace-nowrap w-100 follow-user" aria-label="Follow user: David Chibueze Ndubuisi" aria-pressed="false">Follow</button>
</div>
  <div class="color-base-70">
    Software Engineer with solid troubleshooting skills and proven experience in creating and designing software in a test-driven environment.
  </div>

  <div class="user-metadata-details">
    <ul class="user-metadata-details-inner">
        <li>
          <div class="key">
            Email
          </div>
          <div class="value">
            <a href="mailto:davydocsurg@gmail.com">davydocsurg@gmail.com</a>
          </div>
        </li>
          <li>
            <div class="key">
              Work
            </div>
            <div class="value">
              Software Engineer
            </div>
          </li>
      <li>
        <div class="key">
          Joined
        </div>
        <div class="value">
          <time datetime="2020-09-07T14:20:04Z" class="date">Sep 7, 2020</time>
        </div>
      </li>
    </ul>
  </div>

    </div>
</div>

      <span class="crayons-hover-tooltip inline-block spec-op-author -ml-2" data-tooltip="Author">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" class="crayons-icon">
    <path d="M12 8.25a6 6 0 110 12 6 6 0 010-12zm0 2.625l-.992 2.01-2.218.322 1.605 1.564-.379 2.21L12 15.937l1.984 1.043-.379-2.209 1.605-1.564-2.218-.323L12 10.875zm.75-6.376l3.75.001v2.25l-1.022.854a7.45 7.45 0 00-2.728-.817V4.5zm-1.5 0v2.288a7.451 7.451 0 00-2.727.816L7.5 6.75V4.5h3.75z"></path>
</svg>

      </span>
  </div>

  <span class="color-base-30 px-2 m:pl-0" role="presentation">&bull;</span>

<a href="https://dev.to/davydocsurg/comment/2f7jb" class="comment-date crayons-link crayons-link--secondary fs-s">
  <time datetime="2024-05-18T18:20:53Z" class=date-no-year>
    May 18
  </time>

</a>


  <div class="comment__dropdown" data-tracking-name="comment_dropdown">
    <button id="comment-dropdown-trigger-1182829" aria-controls="comment-dropdown-1182829" aria-expanded="false"
      class="dropbtn comment__dropdown-trigger crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon "
      aria-label="Toggle dropdown menu" aria-haspopup="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a600qvijsthi5rw4jxabpfz6n2w88k" class="crayons-icon pointer-events-none"><title id="a600qvijsthi5rw4jxabpfz6n2w88k">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

    </button>
    <div id="comment-dropdown-1182829" class="crayons-dropdown right-1 s:right-0 s:left-auto fs-base dropdown">
      <ul class="m-0">
        <li><a href="https://dev.to/davydocsurg/comment/2f7jb" class="crayons-link crayons-link--block permalink-copybtn" aria-label="Copy link to David Chibueze Ndubuisi&#39;s comment" data-no-instant>Copy link</a></li>
        <li class="comment-actions hidden" data-user-id="465107" data-action="settings-button" data-path="https://dev.to/davydocsurg/comment/2f7jb/settings" aria-label="Go to David Chibueze Ndubuisi&#39;s comment settings"></li>
          <li class="comment-actions hidden" data-action="hide-button" data-commentable-user-id="465107" data-user-id="465107">
              <button
                class="flex justify-between crayons-link crayons-link--block w-100 bg-transparent border-0 hide-comment"
                data-hide-type="hide"
                data-comment-id="1182829"
                data-comment-url="https://dev.to/davydocsurg/comment/2f7jb"
                aria-label="Hide David Chibueze Ndubuisi&#39;s comment">
                Hide
              </button>
          </li>
        <li class="mod-actions hidden mod-actions-comment-button" data-path="https://dev.to/davydocsurg/comment/2f7jb/mod" aria-label="Moderate David Chibueze Ndubuisi&#39;s comment"></li>
        <li class="report-abuse-link-wrapper" data-path="/report-abuse?url=https://dev.to/davydocsurg/comment/2f7jb" aria-label="Report David Chibueze Ndubuisi&#39;s comment as abusive or violating our code of conduct and/or terms and conditions"></li>
        <li class="current-user-actions"></li>
      </ul>
    </div>
  </div>
</div>


        <div
          class="
            comment__body
            text-styles
            text-styles--secondary
            body
            
            
          ">
          <p>My pleasure, glad you found it helpful.</p>


        </div>

    </div>

    <script>
    </script>

    <footer class="comment__footer print-hidden">
  <button
    class="crayons-tooltip__activator crayons-btn crayons-btn--ghost crayons-btn--icon-left crayons-btn--s mr-1 reaction-like inline-flex reaction-button"
    id="button-for-comment-1182829"
    data-comment-id="1182829"
    aria-label="like"
    data-tracking-name="comment_heart_button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="aluvnf2c87zqn16pqz804g2wqhml6ruh" class="crayons-icon reaction-icon not-reacted"><title id="aluvnf2c87zqn16pqz804g2wqhml6ruh">Like comment: </title><path d="M18.884 12.595l.01.011L12 19.5l-6.894-6.894.01-.01A4.875 4.875 0 0112 5.73a4.875 4.875 0 016.884 6.865zM6.431 7.037a3.375 3.375 0 000 4.773L12 17.38l5.569-5.569a3.375 3.375 0 10-4.773-4.773L9.613 10.22l-1.06-1.062 2.371-2.372a3.375 3.375 0 00-4.492.25v.001z"></path></svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="an5jeeebei906os5zjmly9k6c4yg8w8k" class="crayons-icon crayons-icon reaction-icon--like reaction-icon reacted"><title id="an5jeeebei906os5zjmly9k6c4yg8w8k">Like comment: </title>
    <path d="M5.116 12.595a4.875 4.875 0 015.56-7.68h-.002L7.493 8.098l1.06 1.061 3.181-3.182a4.875 4.875 0 016.895 6.894L12 19.5l-6.894-6.894.01-.01z"></path>
</svg>

    <span class="reactions-count">2</span><span class="reactions-label hidden m:inline-block">&nbsp;likes</span>
    <span data-testid="tooltip" class="crayons-tooltip__content">
      Like
    </span>
  </button>

      <a
        class="actions crayons-btn crayons-btn--ghost crayons-btn--s crayons-btn--icon-left toggle-reply-form mr-1 inline-flex"
        href="#/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/new/2f7jb"
        data-comment-id="1182829"
        data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2f7jb"
        data-tracking-name="comment_reply_button"
        data-testid="reply-button-1182829"
        rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="atozgive4imbdnx24g4hsnib3hgtrxog" class="crayons-icon reaction-icon not-reacted"><title id="atozgive4imbdnx24g4hsnib3hgtrxog">Comment button</title><path d="M10.5 5h3a6 6 0 110 12v2.625c-3.75-1.5-9-3.75-9-8.625a6 6 0 016-6zM12 15.5h1.5a4.501 4.501 0 001.722-8.657A4.5 4.5 0 0013.5 6.5h-3A4.5 4.5 0 006 11c0 2.707 1.846 4.475 6 6.36V15.5z"></path></svg>

        <span class="hidden m:inline-block">Reply</span>
      </a>

</footer>

  </div>
</div>


  </div>
    </details>


  </div>
    </details>

    <details class="comment-wrapper js-comment-wrapper comment-wrapper--deep-0
                    root
                    " open>
      <summary aria-label="Toggle this comment (and replies)" data-tracking-name="expand_comment_toggle">
        <span class="m:mx-1 inline-block align-middle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="akxt3ywcjm3l7no03fom7cgfr6ep199d" class="crayons-icon expanded"><title id="akxt3ywcjm3l7no03fom7cgfr6ep199d">Collapse</title>
    <path d="M12 10.677L8 6.935 9 6l3 2.807L15 6l1 .935-4 3.742zm0 4.517L9 18l-1-.935 4-3.742 4 3.742-1 .934-3-2.805z"></path>
</svg>

          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="ae4low8cktfqw9mjtnjiuj9wfmame81k" class="crayons-icon collapsed"><title id="ae4low8cktfqw9mjtnjiuj9wfmame81k">Expand</title>
    <path d="M12 18l-4-3.771 1-.943 3 2.829 3-2.829 1 .943L12 18zm0-10.115l-3 2.829-1-.943L12 6l4 3.771-1 .942-3-2.828z"></path>
</svg>

        </span>
        <span class="js-collapse-comment-content inline-block align-middle"></span>
      </summary>
  <div
    id="comment-node-1225055"
    class="
      comment single-comment-node
      
      root
      comment--deep-0
      
    "
    data-comment-id="1225055"
    data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2hi5d"
    data-comment-author-id="1359910"
    data-content-user-id="1359910">
    <a name="comment-2hi5d" style="position: absolute; top: -8px;">&nbsp;</a>
    
<div class="comment__inner">
    <a href="https://dev.to/stevendemer" class="shrink-0 crayons-avatar m:crayons-avatar--l mt-4 m:mt-3">
    <img class="crayons-avatar__image" width="32" height="32" src="https://media2.dev.to/dynamic/image/width=50,height=50,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F1359910%2F6b59fa6e-84eb-49cb-8db1-4662393a20d5.jpeg" alt="stevendemer profile image" loading="lazy" />
  </a>


  <div class="inner-comment comment__details">
    <div class="comment__content crayons-card">
        


        <div class="comment__header">
  <a href="https://dev.to/stevendemer" class="crayons-link crayons-link--secondary flex items-center fw-medium m:hidden">
    <span class="js-comment-username">Steven Demertzis</span>
  </a>
  <div class="profile-preview-card relative mb-4 s:mb-0 fw-medium hidden m:block">
    <button id="comment-profile-preview-trigger-1225055" aria-controls="comment-profile-preview-content-1225055" class="profile-preview-card__trigger p-1 -my-1 -ml-1 crayons-btn crayons-btn--ghost" aria-label="Steven Demertzis profile details">
      Steven Demertzis
      
    </button>
    <div id="comment-profile-preview-content-1225055" class="profile-preview-card__content p-4 pt-0 branded-7 crayons-dropdown" style="--card-color: #000000; border-top-color: var(--card-color);" data-testid="profile-preview-card" data-repositioning-dropdown="true">
    <div class="gap-4 grid">
        <div class="-mt-4">
  <a href="/stevendemer" class="flex">
    <span class="crayons-avatar crayons-avatar--xl  mr-2 shrink-0">
      <img src="https://media2.dev.to/dynamic/image/width=90,height=90,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F1359910%2F6b59fa6e-84eb-49cb-8db1-4662393a20d5.jpeg" class="crayons-avatar__image" alt="" loading="lazy" />
    </span>
    <span class="crayons-link crayons-subtitle-2 mt-5">
      Steven Demertzis
      
    </span>
  </a>
</div>

<div class="print-hidden">
  <button name="button" type="button" data-info="{&quot;className&quot;:&quot;User&quot;,&quot;style&quot;:&quot;&quot;,&quot;id&quot;:1359910,&quot;name&quot;:&quot;Steven Demertzis&quot;}" class="crayons-btn follow-action-button whitespace-nowrap w-100 follow-user" aria-label="Follow user: Steven Demertzis" aria-pressed="false">Follow</button>
</div>

  <div class="user-metadata-details">
    <ul class="user-metadata-details-inner">
      <li>
        <div class="key">
          Joined
        </div>
        <div class="value">
          <time datetime="2024-03-17T17:39:23Z" class="date">Mar 17, 2024</time>
        </div>
      </li>
    </ul>
  </div>

    </div>
</div>

  </div>

  <span class="color-base-30 px-2 m:pl-0" role="presentation">&bull;</span>

<a href="https://dev.to/stevendemer/comment/2hi5d" class="comment-date crayons-link crayons-link--secondary fs-s">
  <time datetime="2024-08-26T19:21:43Z" class=date-no-year>
    Aug 26
  </time>

</a>


  <div class="comment__dropdown" data-tracking-name="comment_dropdown">
    <button id="comment-dropdown-trigger-1225055" aria-controls="comment-dropdown-1225055" aria-expanded="false"
      class="dropbtn comment__dropdown-trigger crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon "
      aria-label="Toggle dropdown menu" aria-haspopup="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a1halibk4ouf07jvgvwb2551zla3a9fv" class="crayons-icon pointer-events-none"><title id="a1halibk4ouf07jvgvwb2551zla3a9fv">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

    </button>
    <div id="comment-dropdown-1225055" class="crayons-dropdown right-1 s:right-0 s:left-auto fs-base dropdown">
      <ul class="m-0">
        <li><a href="https://dev.to/stevendemer/comment/2hi5d" class="crayons-link crayons-link--block permalink-copybtn" aria-label="Copy link to Steven Demertzis&#39;s comment" data-no-instant>Copy link</a></li>
        <li class="comment-actions hidden" data-user-id="1359910" data-action="settings-button" data-path="https://dev.to/stevendemer/comment/2hi5d/settings" aria-label="Go to Steven Demertzis&#39;s comment settings"></li>
          <li class="comment-actions hidden" data-action="hide-button" data-commentable-user-id="465107" data-user-id="1359910">
              <button
                class="flex justify-between crayons-link crayons-link--block w-100 bg-transparent border-0 hide-comment"
                data-hide-type="hide"
                data-comment-id="1225055"
                data-comment-url="https://dev.to/stevendemer/comment/2hi5d"
                aria-label="Hide Steven Demertzis&#39;s comment">
                Hide
              </button>
          </li>
        <li class="mod-actions hidden mod-actions-comment-button" data-path="https://dev.to/stevendemer/comment/2hi5d/mod" aria-label="Moderate Steven Demertzis&#39;s comment"></li>
        <li class="report-abuse-link-wrapper" data-path="/report-abuse?url=https://dev.to/stevendemer/comment/2hi5d" aria-label="Report Steven Demertzis&#39;s comment as abusive or violating our code of conduct and/or terms and conditions"></li>
        <li class="current-user-actions"></li>
      </ul>
    </div>
  </div>
</div>


        <div
          class="
            comment__body
            text-styles
            text-styles--secondary
            body
            
            
          ">
          <p>Thank you, cleared a lot of things up for me !</p>


        </div>

    </div>

    <script>
    </script>

    <footer class="comment__footer print-hidden">
  <button
    class="crayons-tooltip__activator crayons-btn crayons-btn--ghost crayons-btn--icon-left crayons-btn--s mr-1 reaction-like inline-flex reaction-button"
    id="button-for-comment-1225055"
    data-comment-id="1225055"
    aria-label="like"
    data-tracking-name="comment_heart_button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="aft9ofvyvcp2mkoas0z2qu38e6mk3pjs" class="crayons-icon reaction-icon not-reacted"><title id="aft9ofvyvcp2mkoas0z2qu38e6mk3pjs">Like comment: </title><path d="M18.884 12.595l.01.011L12 19.5l-6.894-6.894.01-.01A4.875 4.875 0 0112 5.73a4.875 4.875 0 016.884 6.865zM6.431 7.037a3.375 3.375 0 000 4.773L12 17.38l5.569-5.569a3.375 3.375 0 10-4.773-4.773L9.613 10.22l-1.06-1.062 2.371-2.372a3.375 3.375 0 00-4.492.25v.001z"></path></svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a41b72t29w2l6wg0es2olxymqr29adf2" class="crayons-icon crayons-icon reaction-icon--like reaction-icon reacted"><title id="a41b72t29w2l6wg0es2olxymqr29adf2">Like comment: </title>
    <path d="M5.116 12.595a4.875 4.875 0 015.56-7.68h-.002L7.493 8.098l1.06 1.061 3.181-3.182a4.875 4.875 0 016.895 6.894L12 19.5l-6.894-6.894.01-.01z"></path>
</svg>

    <span class="reactions-count">2</span><span class="reactions-label hidden m:inline-block">&nbsp;likes</span>
    <span data-testid="tooltip" class="crayons-tooltip__content">
      Like
    </span>
  </button>

      <a
        class="actions crayons-btn crayons-btn--ghost crayons-btn--s crayons-btn--icon-left toggle-reply-form mr-1 inline-flex"
        href="#/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/new/2hi5d"
        data-comment-id="1225055"
        data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2hi5d"
        data-tracking-name="comment_reply_button"
        data-testid="reply-button-1225055"
        rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="ae3c241y0qc4iyq2145kgq2va7l4m7jb" class="crayons-icon reaction-icon not-reacted"><title id="ae3c241y0qc4iyq2145kgq2va7l4m7jb">Comment button</title><path d="M10.5 5h3a6 6 0 110 12v2.625c-3.75-1.5-9-3.75-9-8.625a6 6 0 016-6zM12 15.5h1.5a4.501 4.501 0 001.722-8.657A4.5 4.5 0 0013.5 6.5h-3A4.5 4.5 0 006 11c0 2.707 1.846 4.475 6 6.36V15.5z"></path></svg>

        <span class="hidden m:inline-block">Reply</span>
      </a>

</footer>

  </div>
</div>


  </div>
    </details>

    <details class="comment-wrapper js-comment-wrapper comment-wrapper--deep-0
                    root
                    " open>
      <summary aria-label="Toggle this comment (and replies)" data-tracking-name="expand_comment_toggle">
        <span class="m:mx-1 inline-block align-middle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="acd3di3oe4fhc5wxf8b8lnck789odgi9" class="crayons-icon expanded"><title id="acd3di3oe4fhc5wxf8b8lnck789odgi9">Collapse</title>
    <path d="M12 10.677L8 6.935 9 6l3 2.807L15 6l1 .935-4 3.742zm0 4.517L9 18l-1-.935 4-3.742 4 3.742-1 .934-3-2.805z"></path>
</svg>

          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="ap5xt9c4o2tf5x2dsxu8c2rq0o5r7iqc" class="crayons-icon collapsed"><title id="ap5xt9c4o2tf5x2dsxu8c2rq0o5r7iqc">Expand</title>
    <path d="M12 18l-4-3.771 1-.943 3 2.829 3-2.829 1 .943L12 18zm0-10.115l-3 2.829-1-.943L12 6l4 3.771-1 .942-3-2.828z"></path>
</svg>

        </span>
        <span class="js-collapse-comment-content inline-block align-middle"></span>
      </summary>
  <div
    id="comment-node-1218328"
    class="
      comment single-comment-node
      
      root
      comment--deep-0
      
    "
    data-comment-id="1218328"
    data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2h86k"
    data-comment-author-id="362099"
    data-content-user-id="362099">
    <a name="comment-2h86k" style="position: absolute; top: -8px;">&nbsp;</a>
    
<div class="comment__inner">
    <a href="https://dev.to/danoseun" class="shrink-0 crayons-avatar m:crayons-avatar--l mt-4 m:mt-3">
    <img class="crayons-avatar__image" width="32" height="32" src="https://media2.dev.to/dynamic/image/width=50,height=50,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F362099%2Fcb936505-b804-4aca-b9e3-e9978ad68a72.png" alt="danoseun profile image" loading="lazy" />
  </a>


  <div class="inner-comment comment__details">
    <div class="comment__content crayons-card">
        


        <div class="comment__header">
  <a href="https://dev.to/danoseun" class="crayons-link crayons-link--secondary flex items-center fw-medium m:hidden">
    <span class="js-comment-username">&#39;Seun Somefun</span>
  </a>
  <div class="profile-preview-card relative mb-4 s:mb-0 fw-medium hidden m:block">
    <button id="comment-profile-preview-trigger-1218328" aria-controls="comment-profile-preview-content-1218328" class="profile-preview-card__trigger p-1 -my-1 -ml-1 crayons-btn crayons-btn--ghost" aria-label="&#39;Seun Somefun profile details">
      &#39;Seun Somefun
      
    </button>
    <div id="comment-profile-preview-content-1218328" class="profile-preview-card__content p-4 pt-0 branded-7 crayons-dropdown" style="--card-color: #15a215; border-top-color: var(--card-color);" data-testid="profile-preview-card" data-repositioning-dropdown="true">
    <div class="gap-4 grid">
        <div class="-mt-4">
  <a href="/danoseun" class="flex">
    <span class="crayons-avatar crayons-avatar--xl  mr-2 shrink-0">
      <img src="https://media2.dev.to/dynamic/image/width=90,height=90,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F362099%2Fcb936505-b804-4aca-b9e3-e9978ad68a72.png" class="crayons-avatar__image" alt="" loading="lazy" />
    </span>
    <span class="crayons-link crayons-subtitle-2 mt-5">
      &#39;Seun Somefun
      
    </span>
  </a>
</div>

<div class="print-hidden">
  <button name="button" type="button" data-info="{&quot;className&quot;:&quot;User&quot;,&quot;style&quot;:&quot;&quot;,&quot;id&quot;:362099,&quot;name&quot;:&quot;&#39;Seun Somefun&quot;}" class="crayons-btn follow-action-button whitespace-nowrap w-100 follow-user" aria-label="Follow user: &#39;Seun Somefun" aria-pressed="false">Follow</button>
</div>
  <div class="color-base-70">
    I am a happy-go-merry person who loves solving problems and building products with software engineering while drinking water and minding my business.
  </div>

  <div class="user-metadata-details">
    <ul class="user-metadata-details-inner">
        <li>
          <div class="key">
            Location
          </div>
          <div class="value">
            Lagos
          </div>
        </li>
          <li>
            <div class="key">
              Work
            </div>
            <div class="value">
              Software Engineer
            </div>
          </li>
      <li>
        <div class="key">
          Joined
        </div>
        <div class="value">
          <time datetime="2020-04-07T01:11:03Z" class="date">Apr 7, 2020</time>
        </div>
      </li>
    </ul>
  </div>

    </div>
</div>

  </div>

  <span class="color-base-30 px-2 m:pl-0" role="presentation">&bull;</span>

<a href="https://dev.to/danoseun/comment/2h86k" class="comment-date crayons-link crayons-link--secondary fs-s">
  <time datetime="2024-08-10T20:21:54Z" class=date-no-year>
    Aug 10
  </time>

</a>


  <div class="comment__dropdown" data-tracking-name="comment_dropdown">
    <button id="comment-dropdown-trigger-1218328" aria-controls="comment-dropdown-1218328" aria-expanded="false"
      class="dropbtn comment__dropdown-trigger crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon "
      aria-label="Toggle dropdown menu" aria-haspopup="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="amz5uzzvddjkbusbwxnga9nmu6u17nrt" class="crayons-icon pointer-events-none"><title id="amz5uzzvddjkbusbwxnga9nmu6u17nrt">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

    </button>
    <div id="comment-dropdown-1218328" class="crayons-dropdown right-1 s:right-0 s:left-auto fs-base dropdown">
      <ul class="m-0">
        <li><a href="https://dev.to/danoseun/comment/2h86k" class="crayons-link crayons-link--block permalink-copybtn" aria-label="Copy link to &#39;Seun Somefun&#39;s comment" data-no-instant>Copy link</a></li>
        <li class="comment-actions hidden" data-user-id="362099" data-action="settings-button" data-path="https://dev.to/danoseun/comment/2h86k/settings" aria-label="Go to &#39;Seun Somefun&#39;s comment settings"></li>
          <li class="comment-actions hidden" data-action="hide-button" data-commentable-user-id="465107" data-user-id="362099">
              <button
                class="flex justify-between crayons-link crayons-link--block w-100 bg-transparent border-0 hide-comment"
                data-hide-type="hide"
                data-comment-id="1218328"
                data-comment-url="https://dev.to/danoseun/comment/2h86k"
                aria-label="Hide &#39;Seun Somefun&#39;s comment">
                Hide
              </button>
          </li>
        <li class="mod-actions hidden mod-actions-comment-button" data-path="https://dev.to/danoseun/comment/2h86k/mod" aria-label="Moderate &#39;Seun Somefun&#39;s comment"></li>
        <li class="report-abuse-link-wrapper" data-path="/report-abuse?url=https://dev.to/danoseun/comment/2h86k" aria-label="Report &#39;Seun Somefun&#39;s comment as abusive or violating our code of conduct and/or terms and conditions"></li>
        <li class="current-user-actions"></li>
      </ul>
    </div>
  </div>
</div>


        <div
          class="
            comment__body
            text-styles
            text-styles--secondary
            body
            
            
          ">
          <p>Kudos on the effort put into this bro!</p>


        </div>

    </div>

    <script>
    </script>

    <footer class="comment__footer print-hidden">
  <button
    class="crayons-tooltip__activator crayons-btn crayons-btn--ghost crayons-btn--icon-left crayons-btn--s mr-1 reaction-like inline-flex reaction-button"
    id="button-for-comment-1218328"
    data-comment-id="1218328"
    aria-label="like"
    data-tracking-name="comment_heart_button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="a55fp6qhnz49hnsy5ds16vthv1yi5f0v" class="crayons-icon reaction-icon not-reacted"><title id="a55fp6qhnz49hnsy5ds16vthv1yi5f0v">Like comment: </title><path d="M18.884 12.595l.01.011L12 19.5l-6.894-6.894.01-.01A4.875 4.875 0 0112 5.73a4.875 4.875 0 016.884 6.865zM6.431 7.037a3.375 3.375 0 000 4.773L12 17.38l5.569-5.569a3.375 3.375 0 10-4.773-4.773L9.613 10.22l-1.06-1.062 2.371-2.372a3.375 3.375 0 00-4.492.25v.001z"></path></svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="afc55v6dn4okxfcpkho57lkc725j2ai6" class="crayons-icon crayons-icon reaction-icon--like reaction-icon reacted"><title id="afc55v6dn4okxfcpkho57lkc725j2ai6">Like comment: </title>
    <path d="M5.116 12.595a4.875 4.875 0 015.56-7.68h-.002L7.493 8.098l1.06 1.061 3.181-3.182a4.875 4.875 0 016.895 6.894L12 19.5l-6.894-6.894.01-.01z"></path>
</svg>

    <span class="reactions-count">2</span><span class="reactions-label hidden m:inline-block">&nbsp;likes</span>
    <span data-testid="tooltip" class="crayons-tooltip__content">
      Like
    </span>
  </button>

      <a
        class="actions crayons-btn crayons-btn--ghost crayons-btn--s crayons-btn--icon-left toggle-reply-form mr-1 inline-flex"
        href="#/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/new/2h86k"
        data-comment-id="1218328"
        data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2h86k"
        data-tracking-name="comment_reply_button"
        data-testid="reply-button-1218328"
        rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="agtvputl4mw9fdql7ryotiwisn1ew9vb" class="crayons-icon reaction-icon not-reacted"><title id="agtvputl4mw9fdql7ryotiwisn1ew9vb">Comment button</title><path d="M10.5 5h3a6 6 0 110 12v2.625c-3.75-1.5-9-3.75-9-8.625a6 6 0 016-6zM12 15.5h1.5a4.501 4.501 0 001.722-8.657A4.5 4.5 0 0013.5 6.5h-3A4.5 4.5 0 006 11c0 2.707 1.846 4.475 6 6.36V15.5z"></path></svg>

        <span class="hidden m:inline-block">Reply</span>
      </a>

</footer>

  </div>
</div>


  </div>
    </details>

    <details class="comment-wrapper js-comment-wrapper comment-wrapper--deep-0
                    root
                    " open>
      <summary aria-label="Toggle this comment (and replies)" data-tracking-name="expand_comment_toggle">
        <span class="m:mx-1 inline-block align-middle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a4ikfr3jubh62h7uh7pc96gjpiywtvq3" class="crayons-icon expanded"><title id="a4ikfr3jubh62h7uh7pc96gjpiywtvq3">Collapse</title>
    <path d="M12 10.677L8 6.935 9 6l3 2.807L15 6l1 .935-4 3.742zm0 4.517L9 18l-1-.935 4-3.742 4 3.742-1 .934-3-2.805z"></path>
</svg>

          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="atnbniauall0np92et4fhn897agt79q" class="crayons-icon collapsed"><title id="atnbniauall0np92et4fhn897agt79q">Expand</title>
    <path d="M12 18l-4-3.771 1-.943 3 2.829 3-2.829 1 .943L12 18zm0-10.115l-3 2.829-1-.943L12 6l4 3.771-1 .942-3-2.828z"></path>
</svg>

        </span>
        <span class="js-collapse-comment-content inline-block align-middle"></span>
      </summary>
  <div
    id="comment-node-1255485"
    class="
      comment single-comment-node
      
      root
      comment--deep-0
      
    "
    data-comment-id="1255485"
    data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2jb5n"
    data-comment-author-id="2352386"
    data-content-user-id="2352386">
    <a name="comment-2jb5n" style="position: absolute; top: -8px;">&nbsp;</a>
    
<div class="comment__inner">
    <a href="https://dev.to/chandran_mahesh" class="shrink-0 crayons-avatar m:crayons-avatar--l mt-4 m:mt-3">
    <img class="crayons-avatar__image" width="32" height="32" src="https://media2.dev.to/dynamic/image/width=50,height=50,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F2352386%2F339fa4ac-b43a-4403-a4d2-65bb08cd088e.jpg" alt="chandran_mahesh profile image" loading="lazy" />
  </a>


  <div class="inner-comment comment__details">
    <div class="comment__content crayons-card">
        


        <div class="comment__header">
  <a href="https://dev.to/chandran_mahesh" class="crayons-link crayons-link--secondary flex items-center fw-medium m:hidden">
    <span class="js-comment-username">Mahesh Chandran</span>
  </a>
  <div class="profile-preview-card relative mb-4 s:mb-0 fw-medium hidden m:block">
    <button id="comment-profile-preview-trigger-1255485" aria-controls="comment-profile-preview-content-1255485" class="profile-preview-card__trigger p-1 -my-1 -ml-1 crayons-btn crayons-btn--ghost" aria-label="Mahesh Chandran profile details">
      Mahesh Chandran
      
    </button>
    <div id="comment-profile-preview-content-1255485" class="profile-preview-card__content p-4 pt-0 branded-7 crayons-dropdown" style="--card-color: #000000; border-top-color: var(--card-color);" data-testid="profile-preview-card" data-repositioning-dropdown="true">
    <div class="gap-4 grid">
        <div class="-mt-4">
  <a href="/chandran_mahesh" class="flex">
    <span class="crayons-avatar crayons-avatar--xl  mr-2 shrink-0">
      <img src="https://media2.dev.to/dynamic/image/width=90,height=90,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F2352386%2F339fa4ac-b43a-4403-a4d2-65bb08cd088e.jpg" class="crayons-avatar__image" alt="" loading="lazy" />
    </span>
    <span class="crayons-link crayons-subtitle-2 mt-5">
      Mahesh Chandran
      
    </span>
  </a>
</div>

<div class="print-hidden">
  <button name="button" type="button" data-info="{&quot;className&quot;:&quot;User&quot;,&quot;style&quot;:&quot;&quot;,&quot;id&quot;:2352386,&quot;name&quot;:&quot;Mahesh Chandran&quot;}" class="crayons-btn follow-action-button whitespace-nowrap w-100 follow-user" aria-label="Follow user: Mahesh Chandran" aria-pressed="false">Follow</button>
</div>
  <div class="color-base-70">
    still learning
  </div>

  <div class="user-metadata-details">
    <ul class="user-metadata-details-inner">
      <li>
        <div class="key">
          Joined
        </div>
        <div class="value">
          <time datetime="2024-11-05T10:21:24Z" class="date">Nov 5, 2024</time>
        </div>
      </li>
    </ul>
  </div>

    </div>
</div>

  </div>

  <span class="color-base-30 px-2 m:pl-0" role="presentation">&bull;</span>

<a href="https://dev.to/chandran_mahesh/comment/2jb5n" class="comment-date crayons-link crayons-link--secondary fs-s">
  <time datetime="2024-11-05T10:24:53Z" class=date-no-year>
    Nov 5
  </time>

</a>


  <div class="comment__dropdown" data-tracking-name="comment_dropdown">
    <button id="comment-dropdown-trigger-1255485" aria-controls="comment-dropdown-1255485" aria-expanded="false"
      class="dropbtn comment__dropdown-trigger crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon "
      aria-label="Toggle dropdown menu" aria-haspopup="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="ajvmyo00rqetkf6kclf85j7ykwycb0eb" class="crayons-icon pointer-events-none"><title id="ajvmyo00rqetkf6kclf85j7ykwycb0eb">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

    </button>
    <div id="comment-dropdown-1255485" class="crayons-dropdown right-1 s:right-0 s:left-auto fs-base dropdown">
      <ul class="m-0">
        <li><a href="https://dev.to/chandran_mahesh/comment/2jb5n" class="crayons-link crayons-link--block permalink-copybtn" aria-label="Copy link to Mahesh Chandran&#39;s comment" data-no-instant>Copy link</a></li>
        <li class="comment-actions hidden" data-user-id="2352386" data-action="settings-button" data-path="https://dev.to/chandran_mahesh/comment/2jb5n/settings" aria-label="Go to Mahesh Chandran&#39;s comment settings"></li>
          <li class="comment-actions hidden" data-action="hide-button" data-commentable-user-id="465107" data-user-id="2352386">
              <button
                class="flex justify-between crayons-link crayons-link--block w-100 bg-transparent border-0 hide-comment"
                data-hide-type="hide"
                data-comment-id="1255485"
                data-comment-url="https://dev.to/chandran_mahesh/comment/2jb5n"
                aria-label="Hide Mahesh Chandran&#39;s comment">
                Hide
              </button>
          </li>
        <li class="mod-actions hidden mod-actions-comment-button" data-path="https://dev.to/chandran_mahesh/comment/2jb5n/mod" aria-label="Moderate Mahesh Chandran&#39;s comment"></li>
        <li class="report-abuse-link-wrapper" data-path="/report-abuse?url=https://dev.to/chandran_mahesh/comment/2jb5n" aria-label="Report Mahesh Chandran&#39;s comment as abusive or violating our code of conduct and/or terms and conditions"></li>
        <li class="current-user-actions"></li>
      </ul>
    </div>
  </div>
</div>


        <div
          class="
            comment__body
            text-styles
            text-styles--secondary
            body
            
            
          ">
          <p>good innovation at work.</p>


        </div>

    </div>

    <script>
    </script>

    <footer class="comment__footer print-hidden">
  <button
    class="crayons-tooltip__activator crayons-btn crayons-btn--ghost crayons-btn--icon-left crayons-btn--s mr-1 reaction-like inline-flex reaction-button"
    id="button-for-comment-1255485"
    data-comment-id="1255485"
    aria-label="like"
    data-tracking-name="comment_heart_button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="a1sl3rsvsb1myvbocrzjy88la3zew1m8" class="crayons-icon reaction-icon not-reacted"><title id="a1sl3rsvsb1myvbocrzjy88la3zew1m8">Like comment: </title><path d="M18.884 12.595l.01.011L12 19.5l-6.894-6.894.01-.01A4.875 4.875 0 0112 5.73a4.875 4.875 0 016.884 6.865zM6.431 7.037a3.375 3.375 0 000 4.773L12 17.38l5.569-5.569a3.375 3.375 0 10-4.773-4.773L9.613 10.22l-1.06-1.062 2.371-2.372a3.375 3.375 0 00-4.492.25v.001z"></path></svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a1fltx4pwk974pgncspc0gjfq65cxtxy" class="crayons-icon crayons-icon reaction-icon--like reaction-icon reacted"><title id="a1fltx4pwk974pgncspc0gjfq65cxtxy">Like comment: </title>
    <path d="M5.116 12.595a4.875 4.875 0 015.56-7.68h-.002L7.493 8.098l1.06 1.061 3.181-3.182a4.875 4.875 0 016.895 6.894L12 19.5l-6.894-6.894.01-.01z"></path>
</svg>

    <span class="reactions-count">2</span><span class="reactions-label hidden m:inline-block">&nbsp;likes</span>
    <span data-testid="tooltip" class="crayons-tooltip__content">
      Like
    </span>
  </button>

      <a
        class="actions crayons-btn crayons-btn--ghost crayons-btn--s crayons-btn--icon-left toggle-reply-form mr-1 inline-flex"
        href="#/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/new/2jb5n"
        data-comment-id="1255485"
        data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2jb5n"
        data-tracking-name="comment_reply_button"
        data-testid="reply-button-1255485"
        rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="a14mhxd7b1i16wufoynocrr4dcxmgodj" class="crayons-icon reaction-icon not-reacted"><title id="a14mhxd7b1i16wufoynocrr4dcxmgodj">Comment button</title><path d="M10.5 5h3a6 6 0 110 12v2.625c-3.75-1.5-9-3.75-9-8.625a6 6 0 016-6zM12 15.5h1.5a4.501 4.501 0 001.722-8.657A4.5 4.5 0 0013.5 6.5h-3A4.5 4.5 0 006 11c0 2.707 1.846 4.475 6 6.36V15.5z"></path></svg>

        <span class="hidden m:inline-block">Reply</span>
      </a>

</footer>

  </div>
</div>


  </div>
    </details>

    <details class="comment-wrapper js-comment-wrapper comment-wrapper--deep-0
                    root
                    " open>
      <summary aria-label="Toggle this comment (and replies)" data-tracking-name="expand_comment_toggle">
        <span class="m:mx-1 inline-block align-middle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a2wkcbh0ucrdy09u7peyap6zvdh22543" class="crayons-icon expanded"><title id="a2wkcbh0ucrdy09u7peyap6zvdh22543">Collapse</title>
    <path d="M12 10.677L8 6.935 9 6l3 2.807L15 6l1 .935-4 3.742zm0 4.517L9 18l-1-.935 4-3.742 4 3.742-1 .934-3-2.805z"></path>
</svg>

          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="allqr2a1gn36xppnelmg60dtsfc5nt5p" class="crayons-icon collapsed"><title id="allqr2a1gn36xppnelmg60dtsfc5nt5p">Expand</title>
    <path d="M12 18l-4-3.771 1-.943 3 2.829 3-2.829 1 .943L12 18zm0-10.115l-3 2.829-1-.943L12 6l4 3.771-1 .942-3-2.828z"></path>
</svg>

        </span>
        <span class="js-collapse-comment-content inline-block align-middle"></span>
      </summary>
  <div
    id="comment-node-1224984"
    class="
      comment single-comment-node
      
      root
      comment--deep-0
      
    "
    data-comment-id="1224984"
    data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2hi2k"
    data-comment-author-id="674680"
    data-content-user-id="674680">
    <a name="comment-2hi2k" style="position: absolute; top: -8px;">&nbsp;</a>
    
<div class="comment__inner">
    <a href="https://dev.to/codepriest" class="shrink-0 crayons-avatar m:crayons-avatar--l mt-4 m:mt-3">
    <img class="crayons-avatar__image" width="32" height="32" src="https://media2.dev.to/dynamic/image/width=50,height=50,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F674680%2Fb4be7c77-f98c-4c5b-98eb-7165ce1d8a88.jpg" alt="codepriest profile image" loading="lazy" />
  </a>


  <div class="inner-comment comment__details">
    <div class="comment__content crayons-card">
        


        <div class="comment__header">
  <a href="https://dev.to/codepriest" class="crayons-link crayons-link--secondary flex items-center fw-medium m:hidden">
    <span class="js-comment-username">Josh-Savvy</span>
  </a>
  <div class="profile-preview-card relative mb-4 s:mb-0 fw-medium hidden m:block">
    <button id="comment-profile-preview-trigger-1224984" aria-controls="comment-profile-preview-content-1224984" class="profile-preview-card__trigger p-1 -my-1 -ml-1 crayons-btn crayons-btn--ghost" aria-label="Josh-Savvy profile details">
      Josh-Savvy
      
    </button>
    <div id="comment-profile-preview-content-1224984" class="profile-preview-card__content p-4 pt-0 branded-7 crayons-dropdown" style="--card-color: #000000; border-top-color: var(--card-color);" data-testid="profile-preview-card" data-repositioning-dropdown="true">
    <div class="gap-4 grid">
        <div class="-mt-4">
  <a href="/codepriest" class="flex">
    <span class="crayons-avatar crayons-avatar--xl  mr-2 shrink-0">
      <img src="https://media2.dev.to/dynamic/image/width=90,height=90,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F674680%2Fb4be7c77-f98c-4c5b-98eb-7165ce1d8a88.jpg" class="crayons-avatar__image" alt="" loading="lazy" />
    </span>
    <span class="crayons-link crayons-subtitle-2 mt-5">
      Josh-Savvy
      
    </span>
  </a>
</div>

<div class="print-hidden">
  <button name="button" type="button" data-info="{&quot;className&quot;:&quot;User&quot;,&quot;style&quot;:&quot;&quot;,&quot;id&quot;:674680,&quot;name&quot;:&quot;Josh-Savvy&quot;}" class="crayons-btn follow-action-button whitespace-nowrap w-100 follow-user" aria-label="Follow user: Josh-Savvy" aria-pressed="false">Follow</button>
</div>

  <div class="user-metadata-details">
    <ul class="user-metadata-details-inner">
        <li>
          <div class="key">
            Location
          </div>
          <div class="value">
            Lagos, Nigeria
          </div>
        </li>
          <li>
            <div class="key">
              Work
            </div>
            <div class="value">
              Software Developer at Bamyx It-Solutions
            </div>
          </li>
      <li>
        <div class="key">
          Joined
        </div>
        <div class="value">
          <time datetime="2021-07-27T01:13:24Z" class="date">Jul 27, 2021</time>
        </div>
      </li>
    </ul>
  </div>

    </div>
</div>

  </div>

  <span class="color-base-30 px-2 m:pl-0" role="presentation">&bull;</span>

<a href="https://dev.to/codepriest/comment/2hi2k" class="comment-date crayons-link crayons-link--secondary fs-s">
  <time datetime="2024-08-26T15:29:02Z" class=date-no-year>
    Aug 26
  </time>

</a>


  <div class="comment__dropdown" data-tracking-name="comment_dropdown">
    <button id="comment-dropdown-trigger-1224984" aria-controls="comment-dropdown-1224984" aria-expanded="false"
      class="dropbtn comment__dropdown-trigger crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon "
      aria-label="Toggle dropdown menu" aria-haspopup="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a6lh8aciecgssiqdk4n1q3o008zmm8hx" class="crayons-icon pointer-events-none"><title id="a6lh8aciecgssiqdk4n1q3o008zmm8hx">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

    </button>
    <div id="comment-dropdown-1224984" class="crayons-dropdown right-1 s:right-0 s:left-auto fs-base dropdown">
      <ul class="m-0">
        <li><a href="https://dev.to/codepriest/comment/2hi2k" class="crayons-link crayons-link--block permalink-copybtn" aria-label="Copy link to Josh-Savvy&#39;s comment" data-no-instant>Copy link</a></li>
        <li class="comment-actions hidden" data-user-id="674680" data-action="settings-button" data-path="https://dev.to/codepriest/comment/2hi2k/settings" aria-label="Go to Josh-Savvy&#39;s comment settings"></li>
          <li class="comment-actions hidden" data-action="hide-button" data-commentable-user-id="465107" data-user-id="674680">
              <button
                class="flex justify-between crayons-link crayons-link--block w-100 bg-transparent border-0 hide-comment"
                data-hide-type="hide"
                data-comment-id="1224984"
                data-comment-url="https://dev.to/codepriest/comment/2hi2k"
                aria-label="Hide Josh-Savvy&#39;s comment">
                Hide
              </button>
          </li>
        <li class="mod-actions hidden mod-actions-comment-button" data-path="https://dev.to/codepriest/comment/2hi2k/mod" aria-label="Moderate Josh-Savvy&#39;s comment"></li>
        <li class="report-abuse-link-wrapper" data-path="/report-abuse?url=https://dev.to/codepriest/comment/2hi2k" aria-label="Report Josh-Savvy&#39;s comment as abusive or violating our code of conduct and/or terms and conditions"></li>
        <li class="current-user-actions"></li>
      </ul>
    </div>
  </div>
</div>


        <div
          class="
            comment__body
            text-styles
            text-styles--secondary
            body
            
            
          ">
          <p>This is very clear and concise.<br>
Thanks for the insight  </p>


        </div>

    </div>

    <script>
    </script>

    <footer class="comment__footer print-hidden">
  <button
    class="crayons-tooltip__activator crayons-btn crayons-btn--ghost crayons-btn--icon-left crayons-btn--s mr-1 reaction-like inline-flex reaction-button"
    id="button-for-comment-1224984"
    data-comment-id="1224984"
    aria-label="like"
    data-tracking-name="comment_heart_button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="a4cat8m5xwzilzrsrjywho2ncg40bi0j" class="crayons-icon reaction-icon not-reacted"><title id="a4cat8m5xwzilzrsrjywho2ncg40bi0j">Like comment: </title><path d="M18.884 12.595l.01.011L12 19.5l-6.894-6.894.01-.01A4.875 4.875 0 0112 5.73a4.875 4.875 0 016.884 6.865zM6.431 7.037a3.375 3.375 0 000 4.773L12 17.38l5.569-5.569a3.375 3.375 0 10-4.773-4.773L9.613 10.22l-1.06-1.062 2.371-2.372a3.375 3.375 0 00-4.492.25v.001z"></path></svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="alzuqzhvex872s9b5s1cub4kz3v0m95h" class="crayons-icon crayons-icon reaction-icon--like reaction-icon reacted"><title id="alzuqzhvex872s9b5s1cub4kz3v0m95h">Like comment: </title>
    <path d="M5.116 12.595a4.875 4.875 0 015.56-7.68h-.002L7.493 8.098l1.06 1.061 3.181-3.182a4.875 4.875 0 016.895 6.894L12 19.5l-6.894-6.894.01-.01z"></path>
</svg>

    <span class="reactions-count">1</span><span class="reactions-label hidden m:inline-block">&nbsp;like</span>
    <span data-testid="tooltip" class="crayons-tooltip__content">
      Like
    </span>
  </button>

      <a
        class="actions crayons-btn crayons-btn--ghost crayons-btn--s crayons-btn--icon-left toggle-reply-form mr-1 inline-flex"
        href="#/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/new/2hi2k"
        data-comment-id="1224984"
        data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2hi2k"
        data-tracking-name="comment_reply_button"
        data-testid="reply-button-1224984"
        rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="af5nt4tw8u4q01wt0sxrxjotm5iskq8r" class="crayons-icon reaction-icon not-reacted"><title id="af5nt4tw8u4q01wt0sxrxjotm5iskq8r">Comment button</title><path d="M10.5 5h3a6 6 0 110 12v2.625c-3.75-1.5-9-3.75-9-8.625a6 6 0 016-6zM12 15.5h1.5a4.501 4.501 0 001.722-8.657A4.5 4.5 0 0013.5 6.5h-3A4.5 4.5 0 006 11c0 2.707 1.846 4.475 6 6.36V15.5z"></path></svg>

        <span class="hidden m:inline-block">Reply</span>
      </a>

</footer>

  </div>
</div>


  </div>
    </details>

    <div class="js-billboard-container mid-comments-billboard-container pb-6" data-async-url="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/billboards/post_comments_mid"></div>
    <details class="comment-wrapper js-comment-wrapper comment-wrapper--deep-0
                    root
                    " open>
      <summary aria-label="Toggle this comment (and replies)" data-tracking-name="expand_comment_toggle">
        <span class="m:mx-1 inline-block align-middle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="aiqkdyk6flcro6tzsyq81fy5oi9wtsjf" class="crayons-icon expanded"><title id="aiqkdyk6flcro6tzsyq81fy5oi9wtsjf">Collapse</title>
    <path d="M12 10.677L8 6.935 9 6l3 2.807L15 6l1 .935-4 3.742zm0 4.517L9 18l-1-.935 4-3.742 4 3.742-1 .934-3-2.805z"></path>
</svg>

          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="as2d1734z3rjtrcg7kpap2ghlofyates" class="crayons-icon collapsed"><title id="as2d1734z3rjtrcg7kpap2ghlofyates">Expand</title>
    <path d="M12 18l-4-3.771 1-.943 3 2.829 3-2.829 1 .943L12 18zm0-10.115l-3 2.829-1-.943L12 6l4 3.771-1 .942-3-2.828z"></path>
</svg>

        </span>
        <span class="js-collapse-comment-content inline-block align-middle"></span>
      </summary>
  <div
    id="comment-node-1211014"
    class="
      comment single-comment-node
      
      root
      comment--deep-0
      
    "
    data-comment-id="1211014"
    data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2gnbc"
    data-comment-author-id="550044"
    data-content-user-id="550044">
    <a name="comment-2gnbc" style="position: absolute; top: -8px;">&nbsp;</a>
    
<div class="comment__inner">
    <a href="https://dev.to/arinzehills" class="shrink-0 crayons-avatar m:crayons-avatar--l mt-4 m:mt-3">
    <img class="crayons-avatar__image" width="32" height="32" src="https://media2.dev.to/dynamic/image/width=50,height=50,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F550044%2F8290b462-5edf-4d14-829e-fce9c418c9d8.jpeg" alt="arinzehills profile image" loading="lazy" />
  </a>


  <div class="inner-comment comment__details">
    <div class="comment__content crayons-card">
        


        <div class="comment__header">
  <a href="https://dev.to/arinzehills" class="crayons-link crayons-link--secondary flex items-center fw-medium m:hidden">
    <span class="js-comment-username">ARINZE CHRIS HILLS</span>
  </a>
  <div class="profile-preview-card relative mb-4 s:mb-0 fw-medium hidden m:block">
    <button id="comment-profile-preview-trigger-1211014" aria-controls="comment-profile-preview-content-1211014" class="profile-preview-card__trigger p-1 -my-1 -ml-1 crayons-btn crayons-btn--ghost" aria-label="ARINZE CHRIS HILLS profile details">
      ARINZE CHRIS HILLS
      
    </button>
    <div id="comment-profile-preview-content-1211014" class="profile-preview-card__content p-4 pt-0 branded-7 crayons-dropdown" style="--card-color: #131313; border-top-color: var(--card-color);" data-testid="profile-preview-card" data-repositioning-dropdown="true">
    <div class="gap-4 grid">
        <div class="-mt-4">
  <a href="/arinzehills" class="flex">
    <span class="crayons-avatar crayons-avatar--xl  mr-2 shrink-0">
      <img src="https://media2.dev.to/dynamic/image/width=90,height=90,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F550044%2F8290b462-5edf-4d14-829e-fce9c418c9d8.jpeg" class="crayons-avatar__image" alt="" loading="lazy" />
    </span>
    <span class="crayons-link crayons-subtitle-2 mt-5">
      ARINZE CHRIS HILLS
      
    </span>
  </a>
</div>

<div class="print-hidden">
  <button name="button" type="button" data-info="{&quot;className&quot;:&quot;User&quot;,&quot;style&quot;:&quot;&quot;,&quot;id&quot;:550044,&quot;name&quot;:&quot;ARINZE CHRIS HILLS&quot;}" class="crayons-btn follow-action-button whitespace-nowrap w-100 follow-user" aria-label="Follow user: ARINZE CHRIS HILLS" aria-pressed="false">Follow</button>
</div>

  <div class="user-metadata-details">
    <ul class="user-metadata-details-inner">
      <li>
        <div class="key">
          Joined
        </div>
        <div class="value">
          <time datetime="2020-12-30T15:04:43Z" class="date">Dec 30, 2020</time>
        </div>
      </li>
    </ul>
  </div>

    </div>
</div>

  </div>

  <span class="color-base-30 px-2 m:pl-0" role="presentation">&bull;</span>

<a href="https://dev.to/arinzehills/comment/2gnbc" class="comment-date crayons-link crayons-link--secondary fs-s">
  <time datetime="2024-07-25T03:50:07Z" class=date-no-year>
    Jul 25
  </time>

    <span class="hidden m:inline-block">&bull; Edited on <time datetime="2024-07-25T03:51:19Z" class="date-no-year">Jul 25</time></span>
    <span class="m:hidden">&bull; Edited</span>
</a>


  <div class="comment__dropdown" data-tracking-name="comment_dropdown">
    <button id="comment-dropdown-trigger-1211014" aria-controls="comment-dropdown-1211014" aria-expanded="false"
      class="dropbtn comment__dropdown-trigger crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon "
      aria-label="Toggle dropdown menu" aria-haspopup="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="ak6v2bky6lrw93aqd584hii54t5pyovs" class="crayons-icon pointer-events-none"><title id="ak6v2bky6lrw93aqd584hii54t5pyovs">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

    </button>
    <div id="comment-dropdown-1211014" class="crayons-dropdown right-1 s:right-0 s:left-auto fs-base dropdown">
      <ul class="m-0">
        <li><a href="https://dev.to/arinzehills/comment/2gnbc" class="crayons-link crayons-link--block permalink-copybtn" aria-label="Copy link to ARINZE CHRIS HILLS&#39;s comment" data-no-instant>Copy link</a></li>
        <li class="comment-actions hidden" data-user-id="550044" data-action="settings-button" data-path="https://dev.to/arinzehills/comment/2gnbc/settings" aria-label="Go to ARINZE CHRIS HILLS&#39;s comment settings"></li>
          <li class="comment-actions hidden" data-action="hide-button" data-commentable-user-id="465107" data-user-id="550044">
              <button
                class="flex justify-between crayons-link crayons-link--block w-100 bg-transparent border-0 hide-comment"
                data-hide-type="hide"
                data-comment-id="1211014"
                data-comment-url="https://dev.to/arinzehills/comment/2gnbc"
                aria-label="Hide ARINZE CHRIS HILLS&#39;s comment">
                Hide
              </button>
          </li>
        <li class="mod-actions hidden mod-actions-comment-button" data-path="https://dev.to/arinzehills/comment/2gnbc/mod" aria-label="Moderate ARINZE CHRIS HILLS&#39;s comment"></li>
        <li class="report-abuse-link-wrapper" data-path="/report-abuse?url=https://dev.to/arinzehills/comment/2gnbc" aria-label="Report ARINZE CHRIS HILLS&#39;s comment as abusive or violating our code of conduct and/or terms and conditions"></li>
        <li class="current-user-actions"></li>
      </ul>
    </div>
  </div>
</div>


        <div
          class="
            comment__body
            text-styles
            text-styles--secondary
            body
            
            
          ">
          <p>Thank you so much for this saved a life.</p>

<p>Please now after build the docker compose. i can't access the entire system via a single point like the <a href="http://localhost:8080" rel="nofollow noopener noreferrer" target="_blank">localhost:8080</a> please how can i do that when the docker is running. do i need to run that server seperately again?</p>


        </div>

    </div>

    <script>
    </script>

    <footer class="comment__footer print-hidden">
  <button
    class="crayons-tooltip__activator crayons-btn crayons-btn--ghost crayons-btn--icon-left crayons-btn--s mr-1 reaction-like inline-flex reaction-button"
    id="button-for-comment-1211014"
    data-comment-id="1211014"
    aria-label="like"
    data-tracking-name="comment_heart_button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="a6kvus7a5qwpgcd854855fgojzoxwau" class="crayons-icon reaction-icon not-reacted"><title id="a6kvus7a5qwpgcd854855fgojzoxwau">Like comment: </title><path d="M18.884 12.595l.01.011L12 19.5l-6.894-6.894.01-.01A4.875 4.875 0 0112 5.73a4.875 4.875 0 016.884 6.865zM6.431 7.037a3.375 3.375 0 000 4.773L12 17.38l5.569-5.569a3.375 3.375 0 10-4.773-4.773L9.613 10.22l-1.06-1.062 2.371-2.372a3.375 3.375 0 00-4.492.25v.001z"></path></svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a2y1hv46pl6jpi1lc9x87xx2p5g28gaf" class="crayons-icon crayons-icon reaction-icon--like reaction-icon reacted"><title id="a2y1hv46pl6jpi1lc9x87xx2p5g28gaf">Like comment: </title>
    <path d="M5.116 12.595a4.875 4.875 0 015.56-7.68h-.002L7.493 8.098l1.06 1.061 3.181-3.182a4.875 4.875 0 016.895 6.894L12 19.5l-6.894-6.894.01-.01z"></path>
</svg>

    <span class="reactions-count">1</span><span class="reactions-label hidden m:inline-block">&nbsp;like</span>
    <span data-testid="tooltip" class="crayons-tooltip__content">
      Like
    </span>
  </button>

      <a
        class="actions crayons-btn crayons-btn--ghost crayons-btn--s crayons-btn--icon-left toggle-reply-form mr-1 inline-flex"
        href="#/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/new/2gnbc"
        data-comment-id="1211014"
        data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2gnbc"
        data-tracking-name="comment_reply_button"
        data-testid="reply-button-1211014"
        rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="ajinfyeu70ji863m93dlve5uc5tmukhj" class="crayons-icon reaction-icon not-reacted"><title id="ajinfyeu70ji863m93dlve5uc5tmukhj">Comment button</title><path d="M10.5 5h3a6 6 0 110 12v2.625c-3.75-1.5-9-3.75-9-8.625a6 6 0 016-6zM12 15.5h1.5a4.501 4.501 0 001.722-8.657A4.5 4.5 0 0013.5 6.5h-3A4.5 4.5 0 006 11c0 2.707 1.846 4.475 6 6.36V15.5z"></path></svg>

        <span class="hidden m:inline-block">Reply</span>
      </a>

</footer>

  </div>
</div>
    <details class="comment-wrapper js-comment-wrapper comment-wrapper--deep-1
                    child
                    " open>
      <summary aria-label="Toggle this comment (and replies)" data-tracking-name="expand_comment_toggle">
        <span class="mx-0 inline-block align-middle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="aa75dl036pld1htv0mjxx9nv608godlm" class="crayons-icon expanded"><title id="aa75dl036pld1htv0mjxx9nv608godlm">Collapse</title>
    <path d="M12 10.677L8 6.935 9 6l3 2.807L15 6l1 .935-4 3.742zm0 4.517L9 18l-1-.935 4-3.742 4 3.742-1 .934-3-2.805z"></path>
</svg>

          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="ahl5qx4tihbkxxgaqi9p9khhutfr122u" class="crayons-icon collapsed"><title id="ahl5qx4tihbkxxgaqi9p9khhutfr122u">Expand</title>
    <path d="M12 18l-4-3.771 1-.943 3 2.829 3-2.829 1 .943L12 18zm0-10.115l-3 2.829-1-.943L12 6l4 3.771-1 .942-3-2.828z"></path>
</svg>

        </span>
        <span class="js-collapse-comment-content inline-block align-middle"></span>
      </summary>
  <div
    id="comment-node-1254636"
    class="
      comment single-comment-node
      
      child
      comment--deep-1
      
    "
    data-comment-id="1254636"
    data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2j9p6"
    data-comment-author-id="919873"
    data-content-user-id="919873">
    <a name="comment-2j9p6" style="position: absolute; top: -8px;">&nbsp;</a>
    
<div class="comment__inner">
    <a href="https://dev.to/pacehut" class="shrink-0 crayons-avatar mt-4">
    <img class="crayons-avatar__image" width="32" height="32" src="https://media2.dev.to/dynamic/image/width=50,height=50,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F919873%2F7428858c-b251-41ef-aa40-d88bc8728852.jpeg" alt="pacehut profile image" loading="lazy" />
  </a>


  <div class="inner-comment comment__details">
    <div class="comment__content crayons-card">
        


        <div class="comment__header">
  <a href="https://dev.to/pacehut" class="crayons-link crayons-link--secondary flex items-center fw-medium m:hidden">
    <span class="js-comment-username">Md Mafiz Uddin</span>
  </a>
  <div class="profile-preview-card relative mb-4 s:mb-0 fw-medium hidden m:block">
    <button id="comment-profile-preview-trigger-1254636" aria-controls="comment-profile-preview-content-1254636" class="profile-preview-card__trigger p-1 -my-1 -ml-1 crayons-btn crayons-btn--ghost" aria-label="Md Mafiz Uddin profile details">
      Md Mafiz Uddin
      
    </button>
    <div id="comment-profile-preview-content-1254636" class="profile-preview-card__content p-4 pt-0 branded-7 crayons-dropdown" style="--card-color: #000000; border-top-color: var(--card-color);" data-testid="profile-preview-card" data-repositioning-dropdown="true">
    <div class="gap-4 grid">
        <div class="-mt-4">
  <a href="/pacehut" class="flex">
    <span class="crayons-avatar crayons-avatar--xl  mr-2 shrink-0">
      <img src="https://media2.dev.to/dynamic/image/width=90,height=90,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F919873%2F7428858c-b251-41ef-aa40-d88bc8728852.jpeg" class="crayons-avatar__image" alt="" loading="lazy" />
    </span>
    <span class="crayons-link crayons-subtitle-2 mt-5">
      Md Mafiz Uddin
      
    </span>
  </a>
</div>

<div class="print-hidden">
  <button name="button" type="button" data-info="{&quot;className&quot;:&quot;User&quot;,&quot;style&quot;:&quot;&quot;,&quot;id&quot;:919873,&quot;name&quot;:&quot;Md Mafiz Uddin&quot;}" class="crayons-btn follow-action-button whitespace-nowrap w-100 follow-user" aria-label="Follow user: Md Mafiz Uddin" aria-pressed="false">Follow</button>
</div>
  <div class="color-base-70">
    striving to the top...
  </div>

  <div class="user-metadata-details">
    <ul class="user-metadata-details-inner">
      <li>
        <div class="key">
          Joined
        </div>
        <div class="value">
          <time datetime="2022-09-02T18:00:00Z" class="date">Sep 2, 2022</time>
        </div>
      </li>
    </ul>
  </div>

    </div>
</div>

  </div>

  <span class="color-base-30 px-2 m:pl-0" role="presentation">&bull;</span>

<a href="https://dev.to/pacehut/comment/2j9p6" class="comment-date crayons-link crayons-link--secondary fs-s">
  <time datetime="2024-11-03T19:36:51Z" class=date-no-year>
    Nov 3
  </time>

</a>


  <div class="comment__dropdown" data-tracking-name="comment_dropdown">
    <button id="comment-dropdown-trigger-1254636" aria-controls="comment-dropdown-1254636" aria-expanded="false"
      class="dropbtn comment__dropdown-trigger crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon "
      aria-label="Toggle dropdown menu" aria-haspopup="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="ai9z81qum1d9x3v0blomtfj93xuj4r2o" class="crayons-icon pointer-events-none"><title id="ai9z81qum1d9x3v0blomtfj93xuj4r2o">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

    </button>
    <div id="comment-dropdown-1254636" class="crayons-dropdown right-1 s:right-0 s:left-auto fs-base dropdown">
      <ul class="m-0">
        <li><a href="https://dev.to/pacehut/comment/2j9p6" class="crayons-link crayons-link--block permalink-copybtn" aria-label="Copy link to Md Mafiz Uddin&#39;s comment" data-no-instant>Copy link</a></li>
        <li class="comment-actions hidden" data-user-id="919873" data-action="settings-button" data-path="https://dev.to/pacehut/comment/2j9p6/settings" aria-label="Go to Md Mafiz Uddin&#39;s comment settings"></li>
          <li class="comment-actions hidden" data-action="hide-button" data-commentable-user-id="465107" data-user-id="919873">
              <button
                class="flex justify-between crayons-link crayons-link--block w-100 bg-transparent border-0 hide-comment"
                data-hide-type="hide"
                data-comment-id="1254636"
                data-comment-url="https://dev.to/pacehut/comment/2j9p6"
                aria-label="Hide Md Mafiz Uddin&#39;s comment">
                Hide
              </button>
          </li>
        <li class="mod-actions hidden mod-actions-comment-button" data-path="https://dev.to/pacehut/comment/2j9p6/mod" aria-label="Moderate Md Mafiz Uddin&#39;s comment"></li>
        <li class="report-abuse-link-wrapper" data-path="/report-abuse?url=https://dev.to/pacehut/comment/2j9p6" aria-label="Report Md Mafiz Uddin&#39;s comment as abusive or violating our code of conduct and/or terms and conditions"></li>
        <li class="current-user-actions"></li>
      </ul>
    </div>
  </div>
</div>


        <div
          class="
            comment__body
            text-styles
            text-styles--secondary
            body
            
            
          ">
          <p>Yes, basically the api-gateway is not started through the docker-compose t is there only for testing purposes and for production nginx is used</p>


        </div>

    </div>

    <script>
    </script>

    <footer class="comment__footer print-hidden">
  <button
    class="crayons-tooltip__activator crayons-btn crayons-btn--ghost crayons-btn--icon crayons-btn--s mr-1 reaction-like inline-flex reaction-button"
    id="button-for-comment-1254636"
    data-comment-id="1254636"
    aria-label="like"
    data-tracking-name="comment_heart_button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="ar0k1maypjjn8ld9riwcpzsidoq1n0tp" class="crayons-icon reaction-icon not-reacted"><title id="ar0k1maypjjn8ld9riwcpzsidoq1n0tp">Like comment: </title><path d="M18.884 12.595l.01.011L12 19.5l-6.894-6.894.01-.01A4.875 4.875 0 0112 5.73a4.875 4.875 0 016.884 6.865zM6.431 7.037a3.375 3.375 0 000 4.773L12 17.38l5.569-5.569a3.375 3.375 0 10-4.773-4.773L9.613 10.22l-1.06-1.062 2.371-2.372a3.375 3.375 0 00-4.492.25v.001z"></path></svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="as30t6lk0vqkuj1xdcpqsdutcxsvsrkc" class="crayons-icon crayons-icon reaction-icon--like reaction-icon reacted"><title id="as30t6lk0vqkuj1xdcpqsdutcxsvsrkc">Like comment: </title>
    <path d="M5.116 12.595a4.875 4.875 0 015.56-7.68h-.002L7.493 8.098l1.06 1.061 3.181-3.182a4.875 4.875 0 016.895 6.894L12 19.5l-6.894-6.894.01-.01z"></path>
</svg>

    <span class="reactions-count"></span><span class="reactions-label hidden m:inline-block"></span>
    <span data-testid="tooltip" class="crayons-tooltip__content">
      Like
    </span>
  </button>

      <a
        class="actions crayons-btn crayons-btn--ghost crayons-btn--s crayons-btn--icon-left toggle-reply-form mr-1 inline-flex"
        href="#/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/new/2j9p6"
        data-comment-id="1254636"
        data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2j9p6"
        data-tracking-name="comment_reply_button"
        data-testid="reply-button-1254636"
        rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="areca0d57o6hctpoh1hmuywcyz7hu4xf" class="crayons-icon reaction-icon not-reacted"><title id="areca0d57o6hctpoh1hmuywcyz7hu4xf">Comment button</title><path d="M10.5 5h3a6 6 0 110 12v2.625c-3.75-1.5-9-3.75-9-8.625a6 6 0 016-6zM12 15.5h1.5a4.501 4.501 0 001.722-8.657A4.5 4.5 0 0013.5 6.5h-3A4.5 4.5 0 006 11c0 2.707 1.846 4.475 6 6.36V15.5z"></path></svg>

        <span class="hidden m:inline-block">Reply</span>
      </a>

</footer>

  </div>
</div>


  </div>
    </details>


  </div>
    </details>

    <details class="comment-wrapper js-comment-wrapper comment-wrapper--deep-0
                    root
                    " open>
      <summary aria-label="Toggle this comment (and replies)" data-tracking-name="expand_comment_toggle">
        <span class="m:mx-1 inline-block align-middle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="ar9uu440comilgrr0mqk7byu35h417yd" class="crayons-icon expanded"><title id="ar9uu440comilgrr0mqk7byu35h417yd">Collapse</title>
    <path d="M12 10.677L8 6.935 9 6l3 2.807L15 6l1 .935-4 3.742zm0 4.517L9 18l-1-.935 4-3.742 4 3.742-1 .934-3-2.805z"></path>
</svg>

          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="ahkjalqgg1utqd7ongl7zp6q54zwcjjd" class="crayons-icon collapsed"><title id="ahkjalqgg1utqd7ongl7zp6q54zwcjjd">Expand</title>
    <path d="M12 18l-4-3.771 1-.943 3 2.829 3-2.829 1 .943L12 18zm0-10.115l-3 2.829-1-.943L12 6l4 3.771-1 .942-3-2.828z"></path>
</svg>

        </span>
        <span class="js-collapse-comment-content inline-block align-middle"></span>
      </summary>
  <div
    id="comment-node-1275538"
    class="
      comment single-comment-node
      
      root
      comment--deep-0
      
    "
    data-comment-id="1275538"
    data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2ken4"
    data-comment-author-id="161156"
    data-content-user-id="161156">
    <a name="comment-2ken4" style="position: absolute; top: -8px;">&nbsp;</a>
    
<div class="comment__inner">
    <a href="https://dev.to/y2khack" class="shrink-0 crayons-avatar m:crayons-avatar--l mt-4 m:mt-3">
    <img class="crayons-avatar__image" width="32" height="32" src="https://media2.dev.to/dynamic/image/width=50,height=50,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F161156%2F8b775cbe-252f-4fd5-a174-fe5f519ead6a.jpg" alt="y2khack profile image" loading="lazy" />
  </a>


  <div class="inner-comment comment__details">
    <div class="comment__content crayons-card">
        


        <div class="comment__header">
  <a href="https://dev.to/y2khack" class="crayons-link crayons-link--secondary flex items-center fw-medium m:hidden">
    <span class="js-comment-username">Rakesh   mohanta</span>
  </a>
  <div class="profile-preview-card relative mb-4 s:mb-0 fw-medium hidden m:block">
    <button id="comment-profile-preview-trigger-1275538" aria-controls="comment-profile-preview-content-1275538" class="profile-preview-card__trigger p-1 -my-1 -ml-1 crayons-btn crayons-btn--ghost" aria-label="Rakesh   mohanta profile details">
      Rakesh   mohanta
      
    </button>
    <div id="comment-profile-preview-content-1275538" class="profile-preview-card__content p-4 pt-0 branded-7 crayons-dropdown" style="--card-color: #002a9e; border-top-color: var(--card-color);" data-testid="profile-preview-card" data-repositioning-dropdown="true">
    <div class="gap-4 grid">
        <div class="-mt-4">
  <a href="/y2khack" class="flex">
    <span class="crayons-avatar crayons-avatar--xl  mr-2 shrink-0">
      <img src="https://media2.dev.to/dynamic/image/width=90,height=90,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F161156%2F8b775cbe-252f-4fd5-a174-fe5f519ead6a.jpg" class="crayons-avatar__image" alt="" loading="lazy" />
    </span>
    <span class="crayons-link crayons-subtitle-2 mt-5">
      Rakesh   mohanta
      
    </span>
  </a>
</div>

<div class="print-hidden">
  <button name="button" type="button" data-info="{&quot;className&quot;:&quot;User&quot;,&quot;style&quot;:&quot;&quot;,&quot;id&quot;:161156,&quot;name&quot;:&quot;Rakesh   mohanta&quot;}" class="crayons-btn follow-action-button whitespace-nowrap w-100 follow-user" aria-label="Follow user: Rakesh   mohanta" aria-pressed="false">Follow</button>
</div>

  <div class="user-metadata-details">
    <ul class="user-metadata-details-inner">
      <li>
        <div class="key">
          Joined
        </div>
        <div class="value">
          <time datetime="2019-04-26T19:29:32Z" class="date">Apr 26, 2019</time>
        </div>
      </li>
    </ul>
  </div>

    </div>
</div>

  </div>

  <span class="color-base-30 px-2 m:pl-0" role="presentation">&bull;</span>

<a href="https://dev.to/y2khack/comment/2ken4" class="comment-date crayons-link crayons-link--secondary fs-s">
  <time datetime="2024-12-23T14:32:01Z" class=date-no-year>
    Dec 23
  </time>

</a>


  <div class="comment__dropdown" data-tracking-name="comment_dropdown">
    <button id="comment-dropdown-trigger-1275538" aria-controls="comment-dropdown-1275538" aria-expanded="false"
      class="dropbtn comment__dropdown-trigger crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon "
      aria-label="Toggle dropdown menu" aria-haspopup="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="amcn906tc7x54otxsesn4ixda2x88tah" class="crayons-icon pointer-events-none"><title id="amcn906tc7x54otxsesn4ixda2x88tah">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

    </button>
    <div id="comment-dropdown-1275538" class="crayons-dropdown right-1 s:right-0 s:left-auto fs-base dropdown">
      <ul class="m-0">
        <li><a href="https://dev.to/y2khack/comment/2ken4" class="crayons-link crayons-link--block permalink-copybtn" aria-label="Copy link to Rakesh   mohanta&#39;s comment" data-no-instant>Copy link</a></li>
        <li class="comment-actions hidden" data-user-id="161156" data-action="settings-button" data-path="https://dev.to/y2khack/comment/2ken4/settings" aria-label="Go to Rakesh   mohanta&#39;s comment settings"></li>
          <li class="comment-actions hidden" data-action="hide-button" data-commentable-user-id="465107" data-user-id="161156">
              <button
                class="flex justify-between crayons-link crayons-link--block w-100 bg-transparent border-0 hide-comment"
                data-hide-type="hide"
                data-comment-id="1275538"
                data-comment-url="https://dev.to/y2khack/comment/2ken4"
                aria-label="Hide Rakesh   mohanta&#39;s comment">
                Hide
              </button>
          </li>
        <li class="mod-actions hidden mod-actions-comment-button" data-path="https://dev.to/y2khack/comment/2ken4/mod" aria-label="Moderate Rakesh   mohanta&#39;s comment"></li>
        <li class="report-abuse-link-wrapper" data-path="/report-abuse?url=https://dev.to/y2khack/comment/2ken4" aria-label="Report Rakesh   mohanta&#39;s comment as abusive or violating our code of conduct and/or terms and conditions"></li>
        <li class="current-user-actions"></li>
      </ul>
    </div>
  </div>
</div>


        <div
          class="
            comment__body
            text-styles
            text-styles--secondary
            body
            
            
          ">
          <p>So much informative!!!!</p>


        </div>

    </div>

    <script>
    </script>

    <footer class="comment__footer print-hidden">
  <button
    class="crayons-tooltip__activator crayons-btn crayons-btn--ghost crayons-btn--icon-left crayons-btn--s mr-1 reaction-like inline-flex reaction-button"
    id="button-for-comment-1275538"
    data-comment-id="1275538"
    aria-label="like"
    data-tracking-name="comment_heart_button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="afxigk38k1f3qo61out6rk8dfbmfxtjn" class="crayons-icon reaction-icon not-reacted"><title id="afxigk38k1f3qo61out6rk8dfbmfxtjn">Like comment: </title><path d="M18.884 12.595l.01.011L12 19.5l-6.894-6.894.01-.01A4.875 4.875 0 0112 5.73a4.875 4.875 0 016.884 6.865zM6.431 7.037a3.375 3.375 0 000 4.773L12 17.38l5.569-5.569a3.375 3.375 0 10-4.773-4.773L9.613 10.22l-1.06-1.062 2.371-2.372a3.375 3.375 0 00-4.492.25v.001z"></path></svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a1wmp530fcnf47imprqcccq1m7k2odc0" class="crayons-icon crayons-icon reaction-icon--like reaction-icon reacted"><title id="a1wmp530fcnf47imprqcccq1m7k2odc0">Like comment: </title>
    <path d="M5.116 12.595a4.875 4.875 0 015.56-7.68h-.002L7.493 8.098l1.06 1.061 3.181-3.182a4.875 4.875 0 016.895 6.894L12 19.5l-6.894-6.894.01-.01z"></path>
</svg>

    <span class="reactions-count">1</span><span class="reactions-label hidden m:inline-block">&nbsp;like</span>
    <span data-testid="tooltip" class="crayons-tooltip__content">
      Like
    </span>
  </button>

      <a
        class="actions crayons-btn crayons-btn--ghost crayons-btn--s crayons-btn--icon-left toggle-reply-form mr-1 inline-flex"
        href="#/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/new/2ken4"
        data-comment-id="1275538"
        data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2ken4"
        data-tracking-name="comment_reply_button"
        data-testid="reply-button-1275538"
        rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="a8x3qgadxmw8zuv8u3m4qdbh4i1mw6eb" class="crayons-icon reaction-icon not-reacted"><title id="a8x3qgadxmw8zuv8u3m4qdbh4i1mw6eb">Comment button</title><path d="M10.5 5h3a6 6 0 110 12v2.625c-3.75-1.5-9-3.75-9-8.625a6 6 0 016-6zM12 15.5h1.5a4.501 4.501 0 001.722-8.657A4.5 4.5 0 0013.5 6.5h-3A4.5 4.5 0 006 11c0 2.707 1.846 4.475 6 6.36V15.5z"></path></svg>

        <span class="hidden m:inline-block">Reply</span>
      </a>

</footer>

  </div>
</div>


  </div>
    </details>

    <details class="comment-wrapper js-comment-wrapper comment-wrapper--deep-0
                    root
                    " open>
      <summary aria-label="Toggle this comment (and replies)" data-tracking-name="expand_comment_toggle">
        <span class="m:mx-1 inline-block align-middle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="anz5musucixkqrsfo7mrqx804fjir678" class="crayons-icon expanded"><title id="anz5musucixkqrsfo7mrqx804fjir678">Collapse</title>
    <path d="M12 10.677L8 6.935 9 6l3 2.807L15 6l1 .935-4 3.742zm0 4.517L9 18l-1-.935 4-3.742 4 3.742-1 .934-3-2.805z"></path>
</svg>

          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a9w3pfp1sf9qegoosxwdgoe0e4k3rvh3" class="crayons-icon collapsed"><title id="a9w3pfp1sf9qegoosxwdgoe0e4k3rvh3">Expand</title>
    <path d="M12 18l-4-3.771 1-.943 3 2.829 3-2.829 1 .943L12 18zm0-10.115l-3 2.829-1-.943L12 6l4 3.771-1 .942-3-2.828z"></path>
</svg>

        </span>
        <span class="js-collapse-comment-content inline-block align-middle"></span>
      </summary>
  <div
    id="comment-node-1276441"
    class="
      comment single-comment-node
      
      root
      comment--deep-0
      
    "
    data-comment-id="1276441"
    data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2kg5n"
    data-comment-author-id="543462"
    data-content-user-id="543462">
    <a name="comment-2kg5n" style="position: absolute; top: -8px;">&nbsp;</a>
    
<div class="comment__inner">
    <a href="https://dev.to/nokha_debbarma" class="shrink-0 crayons-avatar m:crayons-avatar--l mt-4 m:mt-3">
    <img class="crayons-avatar__image" width="32" height="32" src="https://media2.dev.to/dynamic/image/width=50,height=50,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F543462%2Fb80e261e-cde6-4ecd-90ad-b61c298b5adf.jpg" alt="nokha_debbarma profile image" loading="lazy" />
  </a>


  <div class="inner-comment comment__details">
    <div class="comment__content crayons-card">
        


        <div class="comment__header">
  <a href="https://dev.to/nokha_debbarma" class="crayons-link crayons-link--secondary flex items-center fw-medium m:hidden">
    <span class="js-comment-username">Nokha Debbarma</span>
  </a>
  <div class="profile-preview-card relative mb-4 s:mb-0 fw-medium hidden m:block">
    <button id="comment-profile-preview-trigger-1276441" aria-controls="comment-profile-preview-content-1276441" class="profile-preview-card__trigger p-1 -my-1 -ml-1 crayons-btn crayons-btn--ghost" aria-label="Nokha Debbarma profile details">
      Nokha Debbarma
      
    </button>
    <div id="comment-profile-preview-content-1276441" class="profile-preview-card__content p-4 pt-0 branded-7 crayons-dropdown" style="--card-color: #00d397; border-top-color: var(--card-color);" data-testid="profile-preview-card" data-repositioning-dropdown="true">
    <div class="gap-4 grid">
        <div class="-mt-4">
  <a href="/nokha_debbarma" class="flex">
    <span class="crayons-avatar crayons-avatar--xl  mr-2 shrink-0">
      <img src="https://media2.dev.to/dynamic/image/width=90,height=90,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F543462%2Fb80e261e-cde6-4ecd-90ad-b61c298b5adf.jpg" class="crayons-avatar__image" alt="" loading="lazy" />
    </span>
    <span class="crayons-link crayons-subtitle-2 mt-5">
      Nokha Debbarma
      
    </span>
  </a>
</div>

<div class="print-hidden">
  <button name="button" type="button" data-info="{&quot;className&quot;:&quot;User&quot;,&quot;style&quot;:&quot;&quot;,&quot;id&quot;:543462,&quot;name&quot;:&quot;Nokha Debbarma&quot;}" class="crayons-btn follow-action-button whitespace-nowrap w-100 follow-user" aria-label="Follow user: Nokha Debbarma" aria-pressed="false">Follow</button>
</div>
  <div class="color-base-70">
    Learning Full-Stack Development || HTML, CSS , JS, C++
  </div>

  <div class="user-metadata-details">
    <ul class="user-metadata-details-inner">
      <li>
        <div class="key">
          Joined
        </div>
        <div class="value">
          <time datetime="2020-12-19T13:40:15Z" class="date">Dec 19, 2020</time>
        </div>
      </li>
    </ul>
  </div>

    </div>
</div>

  </div>

  <span class="color-base-30 px-2 m:pl-0" role="presentation">&bull;</span>

<a href="https://dev.to/nokha_debbarma/comment/2kg5n" class="comment-date crayons-link crayons-link--secondary fs-s">
  <time datetime="2024-12-26T09:49:56Z" class=date-no-year>
    Dec 26
  </time>

</a>


  <div class="comment__dropdown" data-tracking-name="comment_dropdown">
    <button id="comment-dropdown-trigger-1276441" aria-controls="comment-dropdown-1276441" aria-expanded="false"
      class="dropbtn comment__dropdown-trigger crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon "
      aria-label="Toggle dropdown menu" aria-haspopup="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a182q5o9e00ngirh1cgdz1a9roepfk93" class="crayons-icon pointer-events-none"><title id="a182q5o9e00ngirh1cgdz1a9roepfk93">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

    </button>
    <div id="comment-dropdown-1276441" class="crayons-dropdown right-1 s:right-0 s:left-auto fs-base dropdown">
      <ul class="m-0">
        <li><a href="https://dev.to/nokha_debbarma/comment/2kg5n" class="crayons-link crayons-link--block permalink-copybtn" aria-label="Copy link to Nokha Debbarma&#39;s comment" data-no-instant>Copy link</a></li>
        <li class="comment-actions hidden" data-user-id="543462" data-action="settings-button" data-path="https://dev.to/nokha_debbarma/comment/2kg5n/settings" aria-label="Go to Nokha Debbarma&#39;s comment settings"></li>
          <li class="comment-actions hidden" data-action="hide-button" data-commentable-user-id="465107" data-user-id="543462">
              <button
                class="flex justify-between crayons-link crayons-link--block w-100 bg-transparent border-0 hide-comment"
                data-hide-type="hide"
                data-comment-id="1276441"
                data-comment-url="https://dev.to/nokha_debbarma/comment/2kg5n"
                aria-label="Hide Nokha Debbarma&#39;s comment">
                Hide
              </button>
          </li>
        <li class="mod-actions hidden mod-actions-comment-button" data-path="https://dev.to/nokha_debbarma/comment/2kg5n/mod" aria-label="Moderate Nokha Debbarma&#39;s comment"></li>
        <li class="report-abuse-link-wrapper" data-path="/report-abuse?url=https://dev.to/nokha_debbarma/comment/2kg5n" aria-label="Report Nokha Debbarma&#39;s comment as abusive or violating our code of conduct and/or terms and conditions"></li>
        <li class="current-user-actions"></li>
      </ul>
    </div>
  </div>
</div>


        <div
          class="
            comment__body
            text-styles
            text-styles--secondary
            body
            
            
          ">
          <p>Wow! masterpiece content. Really worth reading and coding it.</p>


        </div>

    </div>

    <script>
    </script>

    <footer class="comment__footer print-hidden">
  <button
    class="crayons-tooltip__activator crayons-btn crayons-btn--ghost crayons-btn--icon-left crayons-btn--s mr-1 reaction-like inline-flex reaction-button"
    id="button-for-comment-1276441"
    data-comment-id="1276441"
    aria-label="like"
    data-tracking-name="comment_heart_button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="a3gyv7b55dgcc5z3yuuhdyj1zx8ynfd6" class="crayons-icon reaction-icon not-reacted"><title id="a3gyv7b55dgcc5z3yuuhdyj1zx8ynfd6">Like comment: </title><path d="M18.884 12.595l.01.011L12 19.5l-6.894-6.894.01-.01A4.875 4.875 0 0112 5.73a4.875 4.875 0 016.884 6.865zM6.431 7.037a3.375 3.375 0 000 4.773L12 17.38l5.569-5.569a3.375 3.375 0 10-4.773-4.773L9.613 10.22l-1.06-1.062 2.371-2.372a3.375 3.375 0 00-4.492.25v.001z"></path></svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="asmbp7612qjnkcsaksb3b589s9cu2v63" class="crayons-icon crayons-icon reaction-icon--like reaction-icon reacted"><title id="asmbp7612qjnkcsaksb3b589s9cu2v63">Like comment: </title>
    <path d="M5.116 12.595a4.875 4.875 0 015.56-7.68h-.002L7.493 8.098l1.06 1.061 3.181-3.182a4.875 4.875 0 016.895 6.894L12 19.5l-6.894-6.894.01-.01z"></path>
</svg>

    <span class="reactions-count">1</span><span class="reactions-label hidden m:inline-block">&nbsp;like</span>
    <span data-testid="tooltip" class="crayons-tooltip__content">
      Like
    </span>
  </button>

      <a
        class="actions crayons-btn crayons-btn--ghost crayons-btn--s crayons-btn--icon-left toggle-reply-form mr-1 inline-flex"
        href="#/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/new/2kg5n"
        data-comment-id="1276441"
        data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2kg5n"
        data-tracking-name="comment_reply_button"
        data-testid="reply-button-1276441"
        rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="a3eymauou9f3ye62g3ssifhudnaix53g" class="crayons-icon reaction-icon not-reacted"><title id="a3eymauou9f3ye62g3ssifhudnaix53g">Comment button</title><path d="M10.5 5h3a6 6 0 110 12v2.625c-3.75-1.5-9-3.75-9-8.625a6 6 0 016-6zM12 15.5h1.5a4.501 4.501 0 001.722-8.657A4.5 4.5 0 0013.5 6.5h-3A4.5 4.5 0 006 11c0 2.707 1.846 4.475 6 6.36V15.5z"></path></svg>

        <span class="hidden m:inline-block">Reply</span>
      </a>

</footer>

  </div>
</div>


  </div>
    </details>

    <details class="comment-wrapper js-comment-wrapper comment-wrapper--deep-0
                    root
                    " open>
      <summary aria-label="Toggle this comment (and replies)" data-tracking-name="expand_comment_toggle">
        <span class="m:mx-1 inline-block align-middle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="aaacol9hmzsf49eu5zz2sddsgddgahcx" class="crayons-icon expanded"><title id="aaacol9hmzsf49eu5zz2sddsgddgahcx">Collapse</title>
    <path d="M12 10.677L8 6.935 9 6l3 2.807L15 6l1 .935-4 3.742zm0 4.517L9 18l-1-.935 4-3.742 4 3.742-1 .934-3-2.805z"></path>
</svg>

          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="ap2i222zx4sqo4kb2xaflpvsprh6k2if" class="crayons-icon collapsed"><title id="ap2i222zx4sqo4kb2xaflpvsprh6k2if">Expand</title>
    <path d="M12 18l-4-3.771 1-.943 3 2.829 3-2.829 1 .943L12 18zm0-10.115l-3 2.829-1-.943L12 6l4 3.771-1 .942-3-2.828z"></path>
</svg>

        </span>
        <span class="js-collapse-comment-content inline-block align-middle"></span>
      </summary>
  <div
    id="comment-node-1252091"
    class="
      comment single-comment-node
      
      root
      comment--deep-0
      
    "
    data-comment-id="1252091"
    data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2j659"
    data-comment-author-id="2294010"
    data-content-user-id="2294010">
    <a name="comment-2j659" style="position: absolute; top: -8px;">&nbsp;</a>
    
<div class="comment__inner">
    <a href="https://dev.to/khushbu_maurya_e212121dc1" class="shrink-0 crayons-avatar m:crayons-avatar--l mt-4 m:mt-3">
    <img class="crayons-avatar__image" width="32" height="32" src="https://media2.dev.to/dynamic/image/width=50,height=50,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F2294010%2F1bf7131c-4ccb-48c2-abcf-f3f199caefbc.png" alt="khushbu_maurya_e212121dc1 profile image" loading="lazy" />
  </a>


  <div class="inner-comment comment__details">
    <div class="comment__content crayons-card">
        


        <div class="comment__header">
  <a href="https://dev.to/khushbu_maurya_e212121dc1" class="crayons-link crayons-link--secondary flex items-center fw-medium m:hidden">
    <span class="js-comment-username">Khushbu Maurya</span>
  </a>
  <div class="profile-preview-card relative mb-4 s:mb-0 fw-medium hidden m:block">
    <button id="comment-profile-preview-trigger-1252091" aria-controls="comment-profile-preview-content-1252091" class="profile-preview-card__trigger p-1 -my-1 -ml-1 crayons-btn crayons-btn--ghost" aria-label="Khushbu Maurya profile details">
      Khushbu Maurya
      
    </button>
    <div id="comment-profile-preview-content-1252091" class="profile-preview-card__content p-4 pt-0 branded-7 crayons-dropdown" style="--card-color: #000000; border-top-color: var(--card-color);" data-testid="profile-preview-card" data-repositioning-dropdown="true">
    <div class="gap-4 grid">
        <div class="-mt-4">
  <a href="/khushbu_maurya_e212121dc1" class="flex">
    <span class="crayons-avatar crayons-avatar--xl  mr-2 shrink-0">
      <img src="https://media2.dev.to/dynamic/image/width=90,height=90,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F2294010%2F1bf7131c-4ccb-48c2-abcf-f3f199caefbc.png" class="crayons-avatar__image" alt="" loading="lazy" />
    </span>
    <span class="crayons-link crayons-subtitle-2 mt-5">
      Khushbu Maurya
      
    </span>
  </a>
</div>

<div class="print-hidden">
  <button name="button" type="button" data-info="{&quot;className&quot;:&quot;User&quot;,&quot;style&quot;:&quot;&quot;,&quot;id&quot;:2294010,&quot;name&quot;:&quot;Khushbu Maurya&quot;}" class="crayons-btn follow-action-button whitespace-nowrap w-100 follow-user" aria-label="Follow user: Khushbu Maurya" aria-pressed="false">Follow</button>
</div>

  <div class="user-metadata-details">
    <ul class="user-metadata-details-inner">
      <li>
        <div class="key">
          Joined
        </div>
        <div class="value">
          <time datetime="2024-10-28T13:35:28Z" class="date">Oct 28, 2024</time>
        </div>
      </li>
    </ul>
  </div>

    </div>
</div>

  </div>

  <span class="color-base-30 px-2 m:pl-0" role="presentation">&bull;</span>

<a href="https://dev.to/khushbu_maurya_e212121dc1/comment/2j659" class="comment-date crayons-link crayons-link--secondary fs-s">
  <time datetime="2024-10-28T13:36:27Z" class=date-no-year>
    Oct 28
  </time>

</a>


  <div class="comment__dropdown" data-tracking-name="comment_dropdown">
    <button id="comment-dropdown-trigger-1252091" aria-controls="comment-dropdown-1252091" aria-expanded="false"
      class="dropbtn comment__dropdown-trigger crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon "
      aria-label="Toggle dropdown menu" aria-haspopup="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="ai4yi0yyqebcp91pxr8zenxbkdf0z91v" class="crayons-icon pointer-events-none"><title id="ai4yi0yyqebcp91pxr8zenxbkdf0z91v">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

    </button>
    <div id="comment-dropdown-1252091" class="crayons-dropdown right-1 s:right-0 s:left-auto fs-base dropdown">
      <ul class="m-0">
        <li><a href="https://dev.to/khushbu_maurya_e212121dc1/comment/2j659" class="crayons-link crayons-link--block permalink-copybtn" aria-label="Copy link to Khushbu Maurya&#39;s comment" data-no-instant>Copy link</a></li>
        <li class="comment-actions hidden" data-user-id="2294010" data-action="settings-button" data-path="https://dev.to/khushbu_maurya_e212121dc1/comment/2j659/settings" aria-label="Go to Khushbu Maurya&#39;s comment settings"></li>
          <li class="comment-actions hidden" data-action="hide-button" data-commentable-user-id="465107" data-user-id="2294010">
              <button
                class="flex justify-between crayons-link crayons-link--block w-100 bg-transparent border-0 hide-comment"
                data-hide-type="hide"
                data-comment-id="1252091"
                data-comment-url="https://dev.to/khushbu_maurya_e212121dc1/comment/2j659"
                aria-label="Hide Khushbu Maurya&#39;s comment">
                Hide
              </button>
          </li>
        <li class="mod-actions hidden mod-actions-comment-button" data-path="https://dev.to/khushbu_maurya_e212121dc1/comment/2j659/mod" aria-label="Moderate Khushbu Maurya&#39;s comment"></li>
        <li class="report-abuse-link-wrapper" data-path="/report-abuse?url=https://dev.to/khushbu_maurya_e212121dc1/comment/2j659" aria-label="Report Khushbu Maurya&#39;s comment as abusive or violating our code of conduct and/or terms and conditions"></li>
        <li class="current-user-actions"></li>
      </ul>
    </div>
  </div>
</div>


        <div
          class="
            comment__body
            text-styles
            text-styles--secondary
            body
            
            
          ">
          <p>I can't access the entire system via a single point like the localhost:8080 please how can I do that when the docker is running. do I need to run that server separately again?</p>


        </div>

    </div>

    <script>
    </script>

    <footer class="comment__footer print-hidden">
  <button
    class="crayons-tooltip__activator crayons-btn crayons-btn--ghost crayons-btn--icon-left crayons-btn--s mr-1 reaction-like inline-flex reaction-button"
    id="button-for-comment-1252091"
    data-comment-id="1252091"
    aria-label="like"
    data-tracking-name="comment_heart_button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="afqaly5ug4gm1rqy017wv0x7n4694ujx" class="crayons-icon reaction-icon not-reacted"><title id="afqaly5ug4gm1rqy017wv0x7n4694ujx">Like comment: </title><path d="M18.884 12.595l.01.011L12 19.5l-6.894-6.894.01-.01A4.875 4.875 0 0112 5.73a4.875 4.875 0 016.884 6.865zM6.431 7.037a3.375 3.375 0 000 4.773L12 17.38l5.569-5.569a3.375 3.375 0 10-4.773-4.773L9.613 10.22l-1.06-1.062 2.371-2.372a3.375 3.375 0 00-4.492.25v.001z"></path></svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="akto6gpgnyndqo25q1rzgw5b3rq4zmlp" class="crayons-icon crayons-icon reaction-icon--like reaction-icon reacted"><title id="akto6gpgnyndqo25q1rzgw5b3rq4zmlp">Like comment: </title>
    <path d="M5.116 12.595a4.875 4.875 0 015.56-7.68h-.002L7.493 8.098l1.06 1.061 3.181-3.182a4.875 4.875 0 016.895 6.894L12 19.5l-6.894-6.894.01-.01z"></path>
</svg>

    <span class="reactions-count">1</span><span class="reactions-label hidden m:inline-block">&nbsp;like</span>
    <span data-testid="tooltip" class="crayons-tooltip__content">
      Like
    </span>
  </button>

      <a
        class="actions crayons-btn crayons-btn--ghost crayons-btn--s crayons-btn--icon-left toggle-reply-form mr-1 inline-flex"
        href="#/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/new/2j659"
        data-comment-id="1252091"
        data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2j659"
        data-tracking-name="comment_reply_button"
        data-testid="reply-button-1252091"
        rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="akcaqw3jbqvprdgye12y1x3mbwh425ba" class="crayons-icon reaction-icon not-reacted"><title id="akcaqw3jbqvprdgye12y1x3mbwh425ba">Comment button</title><path d="M10.5 5h3a6 6 0 110 12v2.625c-3.75-1.5-9-3.75-9-8.625a6 6 0 016-6zM12 15.5h1.5a4.501 4.501 0 001.722-8.657A4.5 4.5 0 0013.5 6.5h-3A4.5 4.5 0 006 11c0 2.707 1.846 4.475 6 6.36V15.5z"></path></svg>

        <span class="hidden m:inline-block">Reply</span>
      </a>

</footer>

  </div>
</div>


  </div>
    </details>

    <details class="comment-wrapper js-comment-wrapper comment-wrapper--deep-0
                    root
                    " open>
      <summary aria-label="Toggle this comment (and replies)" data-tracking-name="expand_comment_toggle">
        <span class="m:mx-1 inline-block align-middle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="aer3d8bwsuu21mpk0e6cr5qg8wkapru7" class="crayons-icon expanded"><title id="aer3d8bwsuu21mpk0e6cr5qg8wkapru7">Collapse</title>
    <path d="M12 10.677L8 6.935 9 6l3 2.807L15 6l1 .935-4 3.742zm0 4.517L9 18l-1-.935 4-3.742 4 3.742-1 .934-3-2.805z"></path>
</svg>

          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a25fvpgjbm8lq43c8r7n1smu8rx19xho" class="crayons-icon collapsed"><title id="a25fvpgjbm8lq43c8r7n1smu8rx19xho">Expand</title>
    <path d="M12 18l-4-3.771 1-.943 3 2.829 3-2.829 1 .943L12 18zm0-10.115l-3 2.829-1-.943L12 6l4 3.771-1 .942-3-2.828z"></path>
</svg>

        </span>
        <span class="js-collapse-comment-content inline-block align-middle"></span>
      </summary>
  <div
    id="comment-node-1273163"
    class="
      comment single-comment-node
      
      root
      comment--deep-0
      
    "
    data-comment-id="1273163"
    data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2kb9l"
    data-comment-author-id="2581235"
    data-content-user-id="2581235">
    <a name="comment-2kb9l" style="position: absolute; top: -8px;">&nbsp;</a>
    
<div class="comment__inner">
    <a href="https://dev.to/rizwan_siddique_e24e12724" class="shrink-0 crayons-avatar m:crayons-avatar--l mt-4 m:mt-3">
    <img class="crayons-avatar__image" width="32" height="32" src="https://media2.dev.to/dynamic/image/width=50,height=50,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F2581235%2F8f6420db-d850-4659-846e-84ee430ce899.jpg" alt="rizwan_siddique_e24e12724 profile image" loading="lazy" />
  </a>


  <div class="inner-comment comment__details">
    <div class="comment__content crayons-card">
        


        <div class="comment__header">
  <a href="https://dev.to/rizwan_siddique_e24e12724" class="crayons-link crayons-link--secondary flex items-center fw-medium m:hidden">
    <span class="js-comment-username">Rizwan Siddique</span>
  </a>
  <div class="profile-preview-card relative mb-4 s:mb-0 fw-medium hidden m:block">
    <button id="comment-profile-preview-trigger-1273163" aria-controls="comment-profile-preview-content-1273163" class="profile-preview-card__trigger p-1 -my-1 -ml-1 crayons-btn crayons-btn--ghost" aria-label="Rizwan Siddique profile details">
      Rizwan Siddique
      
    </button>
    <div id="comment-profile-preview-content-1273163" class="profile-preview-card__content p-4 pt-0 branded-7 crayons-dropdown" style="--card-color: #000000; border-top-color: var(--card-color);" data-testid="profile-preview-card" data-repositioning-dropdown="true">
    <div class="gap-4 grid">
        <div class="-mt-4">
  <a href="/rizwan_siddique_e24e12724" class="flex">
    <span class="crayons-avatar crayons-avatar--xl  mr-2 shrink-0">
      <img src="https://media2.dev.to/dynamic/image/width=90,height=90,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F2581235%2F8f6420db-d850-4659-846e-84ee430ce899.jpg" class="crayons-avatar__image" alt="" loading="lazy" />
    </span>
    <span class="crayons-link crayons-subtitle-2 mt-5">
      Rizwan Siddique
      
    </span>
  </a>
</div>

<div class="print-hidden">
  <button name="button" type="button" data-info="{&quot;className&quot;:&quot;User&quot;,&quot;style&quot;:&quot;&quot;,&quot;id&quot;:2581235,&quot;name&quot;:&quot;Rizwan Siddique&quot;}" class="crayons-btn follow-action-button whitespace-nowrap w-100 follow-user" aria-label="Follow user: Rizwan Siddique" aria-pressed="false">Follow</button>
</div>

  <div class="user-metadata-details">
    <ul class="user-metadata-details-inner">
      <li>
        <div class="key">
          Joined
        </div>
        <div class="value">
          <time datetime="2024-12-17T10:45:14Z" class="date">Dec 17, 2024</time>
        </div>
      </li>
    </ul>
  </div>

    </div>
</div>

  </div>

  <span class="color-base-30 px-2 m:pl-0" role="presentation">&bull;</span>

<a href="https://dev.to/rizwan_siddique_e24e12724/comment/2kb9l" class="comment-date crayons-link crayons-link--secondary fs-s">
  <time datetime="2024-12-17T10:48:22Z" class=date-no-year>
    Dec 17
  </time>

</a>


  <div class="comment__dropdown" data-tracking-name="comment_dropdown">
    <button id="comment-dropdown-trigger-1273163" aria-controls="comment-dropdown-1273163" aria-expanded="false"
      class="dropbtn comment__dropdown-trigger crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon "
      aria-label="Toggle dropdown menu" aria-haspopup="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a97zyzcx60nx6rawlpyplppm4vmqlcpb" class="crayons-icon pointer-events-none"><title id="a97zyzcx60nx6rawlpyplppm4vmqlcpb">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

    </button>
    <div id="comment-dropdown-1273163" class="crayons-dropdown right-1 s:right-0 s:left-auto fs-base dropdown">
      <ul class="m-0">
        <li><a href="https://dev.to/rizwan_siddique_e24e12724/comment/2kb9l" class="crayons-link crayons-link--block permalink-copybtn" aria-label="Copy link to Rizwan Siddique&#39;s comment" data-no-instant>Copy link</a></li>
        <li class="comment-actions hidden" data-user-id="2581235" data-action="settings-button" data-path="https://dev.to/rizwan_siddique_e24e12724/comment/2kb9l/settings" aria-label="Go to Rizwan Siddique&#39;s comment settings"></li>
          <li class="comment-actions hidden" data-action="hide-button" data-commentable-user-id="465107" data-user-id="2581235">
              <button
                class="flex justify-between crayons-link crayons-link--block w-100 bg-transparent border-0 hide-comment"
                data-hide-type="hide"
                data-comment-id="1273163"
                data-comment-url="https://dev.to/rizwan_siddique_e24e12724/comment/2kb9l"
                aria-label="Hide Rizwan Siddique&#39;s comment">
                Hide
              </button>
          </li>
        <li class="mod-actions hidden mod-actions-comment-button" data-path="https://dev.to/rizwan_siddique_e24e12724/comment/2kb9l/mod" aria-label="Moderate Rizwan Siddique&#39;s comment"></li>
        <li class="report-abuse-link-wrapper" data-path="/report-abuse?url=https://dev.to/rizwan_siddique_e24e12724/comment/2kb9l" aria-label="Report Rizwan Siddique&#39;s comment as abusive or violating our code of conduct and/or terms and conditions"></li>
        <li class="current-user-actions"></li>
      </ul>
    </div>
  </div>
</div>


        <div
          class="
            comment__body
            text-styles
            text-styles--secondary
            body
            
            
          ">
          <p>it's an amazing article, can you please provide this article with javascript ?</p>


        </div>

    </div>

    <script>
    </script>

    <footer class="comment__footer print-hidden">
  <button
    class="crayons-tooltip__activator crayons-btn crayons-btn--ghost crayons-btn--icon-left crayons-btn--s mr-1 reaction-like inline-flex reaction-button"
    id="button-for-comment-1273163"
    data-comment-id="1273163"
    aria-label="like"
    data-tracking-name="comment_heart_button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="a9ifnoe9zgd7b3rwvbz3f8q82dbo7wq3" class="crayons-icon reaction-icon not-reacted"><title id="a9ifnoe9zgd7b3rwvbz3f8q82dbo7wq3">Like comment: </title><path d="M18.884 12.595l.01.011L12 19.5l-6.894-6.894.01-.01A4.875 4.875 0 0112 5.73a4.875 4.875 0 016.884 6.865zM6.431 7.037a3.375 3.375 0 000 4.773L12 17.38l5.569-5.569a3.375 3.375 0 10-4.773-4.773L9.613 10.22l-1.06-1.062 2.371-2.372a3.375 3.375 0 00-4.492.25v.001z"></path></svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="aiwo74dhc6imc8gw06do2kuvldyh1rni" class="crayons-icon crayons-icon reaction-icon--like reaction-icon reacted"><title id="aiwo74dhc6imc8gw06do2kuvldyh1rni">Like comment: </title>
    <path d="M5.116 12.595a4.875 4.875 0 015.56-7.68h-.002L7.493 8.098l1.06 1.061 3.181-3.182a4.875 4.875 0 016.895 6.894L12 19.5l-6.894-6.894.01-.01z"></path>
</svg>

    <span class="reactions-count">1</span><span class="reactions-label hidden m:inline-block">&nbsp;like</span>
    <span data-testid="tooltip" class="crayons-tooltip__content">
      Like
    </span>
  </button>

      <a
        class="actions crayons-btn crayons-btn--ghost crayons-btn--s crayons-btn--icon-left toggle-reply-form mr-1 inline-flex"
        href="#/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/new/2kb9l"
        data-comment-id="1273163"
        data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2kb9l"
        data-tracking-name="comment_reply_button"
        data-testid="reply-button-1273163"
        rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="a9gez4phsf3leblb3u4dkm61fdt2q8bt" class="crayons-icon reaction-icon not-reacted"><title id="a9gez4phsf3leblb3u4dkm61fdt2q8bt">Comment button</title><path d="M10.5 5h3a6 6 0 110 12v2.625c-3.75-1.5-9-3.75-9-8.625a6 6 0 016-6zM12 15.5h1.5a4.501 4.501 0 001.722-8.657A4.5 4.5 0 0013.5 6.5h-3A4.5 4.5 0 006 11c0 2.707 1.846 4.475 6 6.36V15.5z"></path></svg>

        <span class="hidden m:inline-block">Reply</span>
      </a>

</footer>

  </div>
</div>


  </div>
    </details>

    <details class="comment-wrapper js-comment-wrapper comment-wrapper--deep-0
                    root
                    " open>
      <summary aria-label="Toggle this comment (and replies)" data-tracking-name="expand_comment_toggle">
        <span class="m:mx-1 inline-block align-middle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a65oyt5gf8nxcp7yc72dyajcwo9zzfuo" class="crayons-icon expanded"><title id="a65oyt5gf8nxcp7yc72dyajcwo9zzfuo">Collapse</title>
    <path d="M12 10.677L8 6.935 9 6l3 2.807L15 6l1 .935-4 3.742zm0 4.517L9 18l-1-.935 4-3.742 4 3.742-1 .934-3-2.805z"></path>
</svg>

          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a9xfd9ejcjm6zz469agd6z9yvljcv48d" class="crayons-icon collapsed"><title id="a9xfd9ejcjm6zz469agd6z9yvljcv48d">Expand</title>
    <path d="M12 18l-4-3.771 1-.943 3 2.829 3-2.829 1 .943L12 18zm0-10.115l-3 2.829-1-.943L12 6l4 3.771-1 .942-3-2.828z"></path>
</svg>

        </span>
        <span class="js-collapse-comment-content inline-block align-middle"></span>
      </summary>
  <div
    id="comment-node-1203885"
    class="
      comment single-comment-node
      
      root
      comment--deep-0
      
    "
    data-comment-id="1203885"
    data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2gcn7"
    data-comment-author-id="1747133"
    data-content-user-id="1747133">
    <a name="comment-2gcn7" style="position: absolute; top: -8px;">&nbsp;</a>
    
<div class="comment__inner">
    <a href="https://dev.to/vinpro" class="shrink-0 crayons-avatar m:crayons-avatar--l mt-4 m:mt-3">
    <img class="crayons-avatar__image" width="32" height="32" src="https://media2.dev.to/dynamic/image/width=50,height=50,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F1747133%2F62833f62-3321-4c1f-afd5-ab158dd15485.png" alt="vinpro profile image" loading="lazy" />
  </a>


  <div class="inner-comment comment__details">
    <div class="comment__content crayons-card">
        


        <div class="comment__header">
  <a href="https://dev.to/vinpro" class="crayons-link crayons-link--secondary flex items-center fw-medium m:hidden">
    <span class="js-comment-username">Hien Vinh Nguyen</span>
  </a>
  <div class="profile-preview-card relative mb-4 s:mb-0 fw-medium hidden m:block">
    <button id="comment-profile-preview-trigger-1203885" aria-controls="comment-profile-preview-content-1203885" class="profile-preview-card__trigger p-1 -my-1 -ml-1 crayons-btn crayons-btn--ghost" aria-label="Hien Vinh Nguyen profile details">
      Hien Vinh Nguyen
      
    </button>
    <div id="comment-profile-preview-content-1203885" class="profile-preview-card__content p-4 pt-0 branded-7 crayons-dropdown" style="--card-color: #000000; border-top-color: var(--card-color);" data-testid="profile-preview-card" data-repositioning-dropdown="true">
    <div class="gap-4 grid">
        <div class="-mt-4">
  <a href="/vinpro" class="flex">
    <span class="crayons-avatar crayons-avatar--xl  mr-2 shrink-0">
      <img src="https://media2.dev.to/dynamic/image/width=90,height=90,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F1747133%2F62833f62-3321-4c1f-afd5-ab158dd15485.png" class="crayons-avatar__image" alt="" loading="lazy" />
    </span>
    <span class="crayons-link crayons-subtitle-2 mt-5">
      Hien Vinh Nguyen
      
    </span>
  </a>
</div>

<div class="print-hidden">
  <button name="button" type="button" data-info="{&quot;className&quot;:&quot;User&quot;,&quot;style&quot;:&quot;&quot;,&quot;id&quot;:1747133,&quot;name&quot;:&quot;Hien Vinh Nguyen&quot;}" class="crayons-btn follow-action-button whitespace-nowrap w-100 follow-user" aria-label="Follow user: Hien Vinh Nguyen" aria-pressed="false">Follow</button>
</div>

  <div class="user-metadata-details">
    <ul class="user-metadata-details-inner">
      <li>
        <div class="key">
          Joined
        </div>
        <div class="value">
          <time datetime="2024-07-08T12:01:24Z" class="date">Jul 8, 2024</time>
        </div>
      </li>
    </ul>
  </div>

    </div>
</div>

  </div>

  <span class="color-base-30 px-2 m:pl-0" role="presentation">&bull;</span>

<a href="https://dev.to/vinpro/comment/2gcn7" class="comment-date crayons-link crayons-link--secondary fs-s">
  <time datetime="2024-07-08T12:04:01Z" class=date-no-year>
    Jul 8
  </time>

</a>


  <div class="comment__dropdown" data-tracking-name="comment_dropdown">
    <button id="comment-dropdown-trigger-1203885" aria-controls="comment-dropdown-1203885" aria-expanded="false"
      class="dropbtn comment__dropdown-trigger crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon "
      aria-label="Toggle dropdown menu" aria-haspopup="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="aei3olhd5ttwzn9vujmzs5xqo7seaig0" class="crayons-icon pointer-events-none"><title id="aei3olhd5ttwzn9vujmzs5xqo7seaig0">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

    </button>
    <div id="comment-dropdown-1203885" class="crayons-dropdown right-1 s:right-0 s:left-auto fs-base dropdown">
      <ul class="m-0">
        <li><a href="https://dev.to/vinpro/comment/2gcn7" class="crayons-link crayons-link--block permalink-copybtn" aria-label="Copy link to Hien Vinh Nguyen&#39;s comment" data-no-instant>Copy link</a></li>
        <li class="comment-actions hidden" data-user-id="1747133" data-action="settings-button" data-path="https://dev.to/vinpro/comment/2gcn7/settings" aria-label="Go to Hien Vinh Nguyen&#39;s comment settings"></li>
          <li class="comment-actions hidden" data-action="hide-button" data-commentable-user-id="465107" data-user-id="1747133">
              <button
                class="flex justify-between crayons-link crayons-link--block w-100 bg-transparent border-0 hide-comment"
                data-hide-type="hide"
                data-comment-id="1203885"
                data-comment-url="https://dev.to/vinpro/comment/2gcn7"
                aria-label="Hide Hien Vinh Nguyen&#39;s comment">
                Hide
              </button>
          </li>
        <li class="mod-actions hidden mod-actions-comment-button" data-path="https://dev.to/vinpro/comment/2gcn7/mod" aria-label="Moderate Hien Vinh Nguyen&#39;s comment"></li>
        <li class="report-abuse-link-wrapper" data-path="/report-abuse?url=https://dev.to/vinpro/comment/2gcn7" aria-label="Report Hien Vinh Nguyen&#39;s comment as abusive or violating our code of conduct and/or terms and conditions"></li>
        <li class="current-user-actions"></li>
      </ul>
    </div>
  </div>
</div>


        <div
          class="
            comment__body
            text-styles
            text-styles--secondary
            body
            
            
          ">
          <p>When is setUserOnline in UserStatusStore will be use?</p>


        </div>

    </div>

    <script>
    </script>

    <footer class="comment__footer print-hidden">
  <button
    class="crayons-tooltip__activator crayons-btn crayons-btn--ghost crayons-btn--icon-left crayons-btn--s mr-1 reaction-like inline-flex reaction-button"
    id="button-for-comment-1203885"
    data-comment-id="1203885"
    aria-label="like"
    data-tracking-name="comment_heart_button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="arf9smnwd6zcc3y1q5pxlh20jcl8u0qb" class="crayons-icon reaction-icon not-reacted"><title id="arf9smnwd6zcc3y1q5pxlh20jcl8u0qb">Like comment: </title><path d="M18.884 12.595l.01.011L12 19.5l-6.894-6.894.01-.01A4.875 4.875 0 0112 5.73a4.875 4.875 0 016.884 6.865zM6.431 7.037a3.375 3.375 0 000 4.773L12 17.38l5.569-5.569a3.375 3.375 0 10-4.773-4.773L9.613 10.22l-1.06-1.062 2.371-2.372a3.375 3.375 0 00-4.492.25v.001z"></path></svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="aszjlr7fuq17dmofh950pvrnmc9cc8bk" class="crayons-icon crayons-icon reaction-icon--like reaction-icon reacted"><title id="aszjlr7fuq17dmofh950pvrnmc9cc8bk">Like comment: </title>
    <path d="M5.116 12.595a4.875 4.875 0 015.56-7.68h-.002L7.493 8.098l1.06 1.061 3.181-3.182a4.875 4.875 0 016.895 6.894L12 19.5l-6.894-6.894.01-.01z"></path>
</svg>

    <span class="reactions-count">1</span><span class="reactions-label hidden m:inline-block">&nbsp;like</span>
    <span data-testid="tooltip" class="crayons-tooltip__content">
      Like
    </span>
  </button>

      <a
        class="actions crayons-btn crayons-btn--ghost crayons-btn--s crayons-btn--icon-left toggle-reply-form mr-1 inline-flex"
        href="#/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/new/2gcn7"
        data-comment-id="1203885"
        data-path="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/comments/2gcn7"
        data-tracking-name="comment_reply_button"
        data-testid="reply-button-1203885"
        rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="a2a7daypwz5598izvuippmqyw5dwx57s" class="crayons-icon reaction-icon not-reacted"><title id="a2a7daypwz5598izvuippmqyw5dwx57s">Comment button</title><path d="M10.5 5h3a6 6 0 110 12v2.625c-3.75-1.5-9-3.75-9-8.625a6 6 0 016-6zM12 15.5h1.5a4.501 4.501 0 001.722-8.657A4.5 4.5 0 0013.5 6.5h-3A4.5 4.5 0 006 11c0 2.707 1.846 4.475 6 6.36V15.5z"></path></svg>

        <span class="hidden m:inline-block">Reply</span>
      </a>

</footer>

  </div>
</div>


  </div>
    </details>


        </div>
      </div>

      <div class="align-center">


  <nav class="fs-s align-center block" aria-label="Conduct controls">
  <a href="/code-of-conduct" class="crayons-link crayons-link--secondary">Code of Conduct</a>
  <span class="opacity-25 px-2" role="presentation">&bull;</span>
  <a href="/report-abuse" class="crayons-link crayons-link--secondary">Report abuse</a>
</nav>

</div>

  </section>
  <div id="hide-comments-modal" class="hidden">
  <form id="hide-comments-modal__form" class="hide-comments-modal__form" data-type="json" action="/comments/hide" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" autocomplete="off" /><input type="hidden" name="_method" value="patch" autocomplete="off" /><input type="hidden" name="authenticity_token" value="-JZh97PJIW8tF-B7KFwk1gWxAVTDLIKe58hjTTCAwYdLvw6U_CInXaNcPVEqRmcPDky1JVTJ6xsFlkvNhnB5Hw" autocomplete="off" />
    <div class="hide-comments-modal__content">
      <p class="pb-2">
        Are you sure you want to hide this comment? It will become hidden in your post, but will still be visible via the comment's <a id="hide-comments-modal__comment-permalink" href="#">permalink</a>.
      </p>
      <label class="crayons-field crayons-field--checkbox my-2">
        <input name="hide_children" type="hidden" value="0" autocomplete="off" /><input class="hide_children crayons-checkbox" type="checkbox" value="1" name="hide_children" id="hide_children" />
        <p class="crayons-field__label">Hide child comments as well</p>
      </label>
      <p class="pb-4 pt-2">
        <button type="submit" class="crayons-btn">
          Confirm
        </button>
      </p>
    </div>
</form>  <p class="fs-s color-base-60">For further actions, you may consider blocking this person and/or <a id="hide-comments-modal__report-link" href="/report-abuse">reporting abuse</a></p>
</div>



      </article>

      <div class="pb-4 crayons-layout__comments-billboard">
        <div class="js-billboard-container pb-4 crayons-layout__comments-billboard" data-async-url="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/billboards/post_comments"></div>
      </div>

          <section class="crayons-card crayons-card--secondary text-padding mb-4 print-hidden" id="bottom-content-read-next">
    <h2 class="crayons-subtitle-1">Read next</h2>
      <a href="/dheecloud/git-command-line-mastery-12-essential-commands-for-version-control-using-git-1i7d" data-preload-image="https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Ft0ug7tzuqq5y46arba3p.png" class="crayons-link mt-6 block">
        <div class="flex items-center">
          <span class="crayons-avatar crayons-avatar--xl m:crayons-avatar--2xl mr-4 shrink-0">
              <img loading="lazy" alt="dheecloud profile image" class="crayons-avatar__image" width="100" height="100" src="https://media2.dev.to/dynamic/image/width=100,height=100,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F1940346%2Feb081245-4881-44c3-ba13-50f39c9150e4.jpg" />
          </span>
          <div>
            <h3 class="fs-xl mb-0 lh-tight">Git Command Line Mastery: 10 Essential Commands for Version Control Using Git</h3>
            <p class="opacity-75 pt-1">
              Uduakabasi Umo-Odiong - <time datetime="2024-12-30T17:55:59Z">Dec 30</time>
            </p>
          </div>
        </div>
      </a>
      <a href="/seyma/responsive-planto-ecommerce-website-with-react-vite-typescript-tailwind-css-3kld" data-preload-image="https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fgonib552g3uct2flkbew.png" class="crayons-link mt-6 block">
        <div class="flex items-center">
          <span class="crayons-avatar crayons-avatar--xl m:crayons-avatar--2xl mr-4 shrink-0">
              <img loading="lazy" alt="seyma profile image" class="crayons-avatar__image" width="100" height="100" src="https://media2.dev.to/dynamic/image/width=100,height=100,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F2242975%2F1bf3b666-705f-4750-b541-adc553073b15.png" />
          </span>
          <div>
            <h3 class="fs-xl mb-0 lh-tight"> Responsive Planto Ecommerce Website with React, Vite, TypeScript &amp; Tailwind CSS </h3>
            <p class="opacity-75 pt-1">
              Codex - <time datetime="2024-12-30T16:58:59Z">Dec 30</time>
            </p>
          </div>
        </div>
      </a>
      <a href="/zyyzyykk/kkterminal-a-terminal-for-web-ssh-connection-3c65" data-preload-image="https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fpc6jbjxty6xbi7na7e9f.png" class="crayons-link mt-6 block">
        <div class="flex items-center">
          <span class="crayons-avatar crayons-avatar--xl m:crayons-avatar--2xl mr-4 shrink-0">
              <img loading="lazy" alt="zyyzyykk profile image" class="crayons-avatar__image" width="100" height="100" src="https://media2.dev.to/dynamic/image/width=100,height=100,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F2634600%2F5056e8c2-41f6-43f6-8319-c29ff242b563.png" />
          </span>
          <div>
            <h3 class="fs-xl mb-0 lh-tight">kkTerminal  A terminal for Web SSH connection</h3>
            <p class="opacity-75 pt-1">
              zyyzyykk - <time datetime="2024-12-30T16:56:11Z">Dec 30</time>
            </p>
          </div>
        </div>
      </a>
      <a href="/antonmartyniuk/10-reasons-to-upgrade-to-net-9-4aml" data-preload-image="https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fwourybgpzumgprronm4j.png" class="crayons-link mt-6 block">
        <div class="flex items-center">
          <span class="crayons-avatar crayons-avatar--xl m:crayons-avatar--2xl mr-4 shrink-0">
              <img loading="lazy" alt="antonmartyniuk profile image" class="crayons-avatar__image" width="100" height="100" src="https://media2.dev.to/dynamic/image/width=100,height=100,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F1436921%2Fc60bacf9-afda-4bc2-90d0-1a2cb6276ce6.jpg" />
          </span>
          <div>
            <h3 class="fs-xl mb-0 lh-tight">10 Reasons to Upgrade to .NET 9</h3>
            <p class="opacity-75 pt-1">
              Anton Martyniuk - <time datetime="2024-12-30T16:47:14Z">Dec 30</time>
            </p>
          </div>
        </div>
      </a>
  </section>

    </div>
  </main>

  <aside class="crayons-layout__sidebar-right" aria-label="Author details">
    <div class="crayons-article-sticky grid gap-4 pb-4 break-word" id="article-show-primary-sticky-nav">
  <div class="crayons-card crayons-card--secondary branded-7 p-4 pt-0 gap-4 grid" style="border-top-color: #0c0407;">
    <div class="-mt-4">
  <a href="/davydocsurg" class="flex">
    <span class="crayons-avatar crayons-avatar--xl  mr-2 shrink-0">
      <img src="https://media2.dev.to/dynamic/image/width=90,height=90,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F465107%2F9de75c19-16ab-4402-a8a2-cf7db85192d7.jpg" class="crayons-avatar__image" alt="" loading="lazy" />
    </span>
    <span class="crayons-link crayons-subtitle-2 mt-5">
      David Chibueze Ndubuisi
      
    </span>
  </a>
</div>

<div class="print-hidden">
  <button name="button" type="button" data-info="{&quot;className&quot;:&quot;User&quot;,&quot;style&quot;:&quot;&quot;,&quot;id&quot;:465107,&quot;name&quot;:&quot;David Chibueze Ndubuisi&quot;}" class="crayons-btn follow-action-button whitespace-nowrap w-100 follow-user" aria-label="Follow user: David Chibueze Ndubuisi" aria-pressed="false">Follow</button>
</div>
  <div class="color-base-70">
    Software Engineer with solid troubleshooting skills and proven experience in creating and designing software in a test-driven environment.
  </div>

  <div class="user-metadata-details">
    <ul class="user-metadata-details-inner">
          <li>
            <div class="key">
              Work
            </div>
            <div class="value">
              Software Engineer
            </div>
          </li>
      <li>
        <div class="key">
          Joined
        </div>
        <div class="value">
          <time datetime="2020-09-07T14:20:04Z" class="date">Sep 7, 2020</time>
        </div>
      </li>
    </ul>
  </div>

  </div>

      <div class="crayons-card crayons-card--secondary">
        <header class="crayons-card__header">
          <h3 class="crayons-subtitle-2">
            More from <a href="/davydocsurg">David Chibueze Ndubuisi</a>
          </h3>
        </header>
        <div>
            <a class="crayons-link crayons-link--contentful" href="/davydocsurg/automate-unit-testing-with-cover-agent-the-latest-innovation-from-codiumai-50np">
              Automate Unit Testing with Cover-Agent: The Latest Innovation from CodiumAI
              <div class="crayons-link__secondary -ml-1">
                  <span class="mr-1"><span class="opacity-50">#</span>ai</span>
                  <span class="mr-1"><span class="opacity-50">#</span>testing</span>
                  <span class="mr-1"><span class="opacity-50">#</span>codiumai</span>
                  <span class="mr-1"><span class="opacity-50">#</span>python</span>
              </div>
            </a>
            <a class="crayons-link crayons-link--contentful" href="/davydocsurg/how-to-add-gifs-to-your-devto-articles-with-cloudinary-5fbb">
              How to Add GIFs to Your Dev.to Articles with Cloudinary
              <div class="crayons-link__secondary -ml-1">
                  <span class="mr-1"><span class="opacity-50">#</span>article</span>
                  <span class="mr-1"><span class="opacity-50">#</span>gif</span>
                  <span class="mr-1"><span class="opacity-50">#</span>devto</span>
                  <span class="mr-1"><span class="opacity-50">#</span>hacks</span>
              </div>
            </a>
            <a class="crayons-link crayons-link--contentful" href="/davydocsurg/the-future-of-code-quality-codiumais-ide-extension-redefines-developer-productivity-54bm">
              The Future of Code Quality: CodiumAI&#39;s IDE Extension Redefines Developer Productivity
              <div class="crayons-link__secondary -ml-1">
              </div>
            </a>
        </div>
      </div>
</div>

<div class="crayons-article-sticky grid gap-4 break-word js-billboard-container" data-async-url="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/billboards/post_sidebar"></div>

  </aside>
</div>


<div class="mod-actions-menu print-hidden"></div>
<div data-testid="unpublish-post-modal-container" class="unpublish-post-modal-container hidden"></div>
  <div id="suspend-modal-content" class="hidden">
  <p>
    Once suspended, davydocsurg will not be able to comment or publish posts until their suspension is removed.
  </p>

  <div class="crayons-field mt-4">
    <label
      for="suspend-reason-userid-465107"
      class="crayons-field__label">
      Note:
    </label>
    <textarea
      id="suspend-reason-userid-465107"
      rows="4"
      cols="70"
      placeholder="Reason for suspension"
      class="crayons-textfield"
      aria-describedby="suspension-reason-error"
      required></textarea>
    <p
      id="suspension-reason-error"
      data-testid="suspension-reason-error"
      class="suspend-reason-error crayons-field__description"
      style="color: red;"
      aria-live="assertive">
    </p>
  </div>
  <div class="mt-4">
    <button
      id="submit-user-suspend-btn"
      class="c-btn c-btn--primary c-btn--destructive"
      data-btn-action="suspend"
      data-reason-selector="#suspend-reason-userid-465107"
      data-user-id="465107"
      data-username="davydocsurg">
      Submit &amp; Suspend
    </button>
  </div>
</div>

  <div id="unsuspend-modal-content" class="hidden">
  <p>
    Once unsuspended, davydocsurg will be able to comment and publish posts again.
  </p>

  <div class="crayons-field mt-4">
    <label
      for="unsuspend-reason-userid-465107"
      class="crayons-field__label">
      Note:
    </label>
    <textarea
      id="unsuspend-reason-userid-465107"
      rows="4"
      cols="70"
      placeholder="Reason for unsuspension"
      class="crayons-textfield"
      aria-describedby="unsuspension-reason-error"
      required></textarea>
    <p
      id="unsuspension-reason-error"
      data-testid="unsuspension-reason-error"
      class="unsuspend-reason-error crayons-field__description"
      style="color: red;"
      aria-live="assertive">
    </p>
  </div>
  <div class="mt-4">
    <button
      id="submit-user-unsuspend-btn"
      class="c-btn c-btn--primary"
      data-btn-action="unsuspend"
      data-reason-selector="#unsuspend-reason-userid-465107"
      data-user-id="465107"
      data-username="davydocsurg">
      Submit &amp; Unsuspend
    </button>
  </div>
</div>

  <div id="unpublish-all-posts" class="hidden">
  <p>
    Once unpublished, all posts by davydocsurg will become hidden and only accessible to themselves.
  </p>
  <p class="mt-2">
    If davydocsurg is not suspended, they can still re-publish their posts from their dashboard.
  </p>
  <p class="mt-2"><label for="note_content">Note:</label><textarea name="note[content]" id="note_content" class="crayons-textfield note_content" placeholder="Note text">
</textarea></p>
  <div class="mt-4">
    <button
      id="unpublish-all-posts-submit-btn"
      class="c-btn c-btn--destructive c-btn--primary"
      data-user-id="465107">
      Unpublish all posts
    </button>
  </div>
</div>

  <div id="unpublish-post-modal" class="hidden">
  <p>
    Once unpublished, this post will become invisible to the public and only accessible to David Chibueze Ndubuisi.
  </p>
  <p>They can still re-publish the post if they are not suspended.</p>
  <div class="mt-4">
    <button
      destructive
      variant="primary"
      class="c-btn c-btn--primary c-btn--destructive"
      id="confirm-unpublish-post-action">
      Unpublish Post
    </button>
  </div>
</div>

  <div id="flag-user-modal-content" class="hidden">
  <p>
    Thanks for keeping DEV Community safe. Here is what you can do to flag davydocsurg:
  </p>

  <div class="crayons-field crayons-field--radio mt-4">
    <input
      type="radio"
      id="flag-user-radio-input"
      name="flag-user-radio-input"
      class="crayons-radio"
      data-reactable-id="465107"
      data-category="vomit"
      data-reactable-type="User" />
    <label for="flag-user-radio-input" class="crayons-field__label">
      Make all posts by davydocsurg less visible
      <p class="crayons-field__description">
        davydocsurg consistently posts content that violates DEV Community's
        code of conduct because it is harassing, offensive or spammy.
      </p>
    </label>
  </div>

  <div class="mt-4">
    <a
      href="javascript:void(0);"
      id="report-inappropriate-content"
      data-report-abuse-link="/report-abuse?url=https://dev.to/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f">
      Report other inappropriate conduct
    </a>
  </div>

  <div class="mt-6">
    <p
      id="unselected-radio-error"
      data-testid="unselected-radio-error"
      class="crayons-field__description mb-4"
      style="color: red;"
      aria-live="assertive">
    </p>
    <button
      id="confirm-flag-user-action"
      class="c-btn c-btn--primary c-btn--destructive"
      data-category="vomit"
      data-reactable-type="User"
      data-user-id="465107"
      data-username="davydocsurg">
      Confirm Flag
    </button>
  </div>
</div>

  <div id="unflag-user-modal-content" class="hidden">
  <p>
    Unflagging davydocsurg will restore default visibility to their posts.
  </p>

  <div class="mt-6">
    <button
      id="confirm-unflag-user-action"
      class="c-btn c-btn--primary"
      data-category="vomit"
      data-reactable-type="User"
      data-user-id="465107"
      data-username="davydocsurg">
      Confirm Unflag
    </button>
  </div>
</div>


<div class="fullscreen-code js-fullscreen-code"></div>
<script src="https://assets.dev.to/assets/followButtons-f2455d1f50a862b83fa006b1953e3a1644598781243cae25d3e75b13c04184fd.js" defer="defer"></script>
<script src="https://assets.dev.to/assets/billboard-a7ffd2b38d410444a4ef2d42c6ce905699d84b1520aed314b817a767ddc3b362.js" defer="defer"></script>
<script src="https://assets.dev.to/assets/localizeArticleDates-70147c5c6bfe350b42e020ebb2a3dd37419d83978982b5a67b6389119bf162ac.js" defer="defer"></script>
<script src="https://assets.dev.to/assets/articleReactions-79a44d82fb34a91c3987c24cfd3bcf2b0d38a02730b69ae6da297387d185f015.js" defer="defer"></script>

<script>
  function activateRunkitTags() {
  if (!areAnyRunkitTagsPresent())
    return

  var checkRunkit = setInterval(function() {
    try {
      dynamicallyLoadRunkitLibrary()

      if (typeof(RunKit) === 'undefined') {
        return
      }

      replaceTagContentsWithRunkitWidget()
      clearInterval(checkRunkit);
    } catch(e) {
      console.error(e);
      clearInterval(checkRunkit);
    }
  }, 200);
}

function isRunkitTagAlreadyActive(runkitTag) {
  return runkitTag.querySelector("iframe") !== null;
};

function areAnyRunkitTagsPresent() {
  var presentRunkitTags = document.getElementsByClassName("runkit-element");

  return presentRunkitTags.length > 0
}

function replaceTagContentsWithRunkitWidget() {
  var targets = document.getElementsByClassName("runkit-element");
  for (var i = 0; i < targets.length; i++) {
    if (isRunkitTagAlreadyActive(targets[i])) {
      continue;
    }

    var wrapperContent = targets[i].textContent;
    if (/^(<iframe src)/.test(wrapperContent) === false) {
      if (targets[i].children.length > 0) {
        var preamble = targets[i].children[0].textContent;
        var content = targets[i].children[1].textContent;
        targets[i].innerHTML = "";
        var notebook = RunKit.createNotebook({
          element: targets[i],
          source: content,
          preamble: preamble
        });
      }
    }
  }
};

function dynamicallyLoadRunkitLibrary() {
  if (typeof(dynamicallyLoadScript) === "undefined")
    return

  dynamicallyLoadScript("//embed.runkit.com")
}

activateRunkitTags();

</script>
<div class="js-billboard-container pb-4 crayons-layout__comments-billboard" data-async-url="/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f/billboards/post_fixed_bottom"></div>

  <div id="quickie-wrapper" class="hidden">
    <div data-testid="modal-container" class="crayons-modal">
      <div role="dialog" aria-modal="true" aria-label="modal" class="crayons-modal__box" style="max-width:800px">
        <header class="crayons-modal__box__header">
          <h2 class="crayons-subtitle-2">Boost Post to Your Feed</h2>
          <button id="quickie-modal-close" type="button" aria-label="Close" class="c-btn c-btn--icon-alone crayons-modal__dismiss">
            <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" class="crayons-icon c-btn__icon"><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636l4.95 4.95z"></path></svg>
          </button>
        </header><div class="crayons-modal__box__body">
        <div class="h-100 w-100">
          <form id="main-status-form" action="/articles" accept-charset="UTF-8" data-remote="true" method="post">
<input name="utf8" type="hidden" value="" autocomplete="off">
<input type="hidden" name="authenticity_token" value="NOTHING" autocomplete="off">
<div class="">
  <textarea class="crayons-textfield element-focused"
    placeholder="Anything to add?" aria-label="What&#39;s on your mind?" maxlength="256" rows="1" name="article[title]" id="article_title" style="height: 40px;"></textarea>
  <input value="status" autocomplete="off" type="hidden" name="article[type_of]" id="article_type_of">
  <input value="1" autocomplete="off" type="hidden" name="article[published]" id="article_published">
    <div class='ltag__link'>
  <a href='/davydocsurg' class='ltag__link__link'>
    <div class='ltag__link__pic'>
      <img src='https://media2.dev.to/dynamic/image/width=150,height=150,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F465107%2F9de75c19-16ab-4402-a8a2-cf7db85192d7.jpg' alt='davydocsurg'>
    </div>
  </a>
  <a href='https://dev.to/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f' class='ltag__link__link'>
    <div class='ltag__link__content'>
      <h2>Mastering Microservices: A Hands-On Tutorial with Node.js, RabbitMQ, Nginx, and Docker</h2>
      <h3>David Chibueze Ndubuisi  Feb 8</h3>
      <div class='ltag__link__taglist'>
      </div>
    </div>
  </a>
</div>

    <input value="https://dev.to/davydocsurg/mastering-microservices-a-hands-on-tutorial-with-nodejs-rabbitmq-nginx-and-docker-m4f" autocomplete="off" type="hidden" name="article[body_url]" id="article_body_url">
  <div id="main-status-form-controls" class="justify-between items-center pt-2 flex ">
    <div class="fs-xs color-base-60">
      <strong>Quickie Posts (beta)</strong> show up in the feed but not notifications or your profile  <a href='/new'>Open Full Editor</a>
    </div>
    <div class="flex items-center">
      <div class="fs-s color-base-60 pr-2 align-right pr-1" style="min-width:65px">
        <span id="main-status-form-char-count">0</span>/256
      </div>
      <input type="submit" name="commit" value="Post" class="crayons-btn crayons-btn--primary py-1" data-disable-with="Post">
    </div>
  </div>
</div>
</form>

<script defer>

  var statusForm = document.getElementById('main-status-form');
  var loopingForCSRF = setInterval(() => {
    if (window.csrfToken !== undefined) {
      statusForm.querySelector('input[name="authenticity_token"]').value = window.csrfToken;
      clearInterval(loopingForCSRF);
    }
  }, 25);

  var enterKey = 13;
  document.getElementById('article_title').onkeydown = function (e) {
    if (window.Forem.Runtime.hasOSSpecificModifier(e) && e.keyCode === enterKey) {
      document.getElementById('main-status-form').submit();
    }
    else if (e.keyCode === enterKey) {
      e.preventDefault();
    }

  }

  document.getElementById('article_title').onkeyup = function (e) {
    var textarea = e.target;
    textarea.style.height = 'auto'; // Reset the height
    textarea.style.height = `${textarea.scrollHeight + 3}px`; // Set the new height
    document.getElementById('main-status-form-char-count').innerText = textarea.value.length;
  }

  document.getElementById('article_title').onkeydown = function (e) {
    setTimeout(() => {
      var textarea = e.target;
      textarea.style.height = 'auto'; // Reset the height
      textarea.style.height = `${textarea.scrollHeight + 3}px`; // Set the new height
      document.getElementById('main-status-form-char-count').innerText = textarea.value.length;
    }, 1);
  }


</script>
        </div>
      </div>
    </div>
    <div data-testid="modal-overlay" class="crayons-modal__backdrop"></div></div>
  </div>
  <script>
    document.getElementById("quickie-modal-close").addEventListener("click", () => {
      document.getElementById("quickie-wrapper").classList.add("hidden");
    });
  </script>

    <div id="runtime-banner-container"></div>
  </div>
</div>
    

<footer id="footer" class="crayons-footer print-hidden">
  <div id="footer-container" class="crayons-footer__container">


          <div
    style=""
    data-display-unit data-id="146443"
    data-category-click="click"
    data-category-impression="impression"
    data-context-type="home"
    data-special="nothing"
    data-article-id="1282935"
    data-type-of="in_house">
      <p style="font-weight: bold;margin-bottom: 10px">
Thank you to our Diamond Sponsor <a href="https://neon.tech/">Neon</a> for supporting our community.
</p>
  </div>


    <p class="fs-s crayons-footer__description">
      <a class="c-link c-link--branded fw-medium" aria-label="DEV Community Home" href="/">DEV Community</a>  A constructive and inclusive social network for software developers. With you every step of your journey.
    </p>

    <ul class="footer__nav-links flex gap-2 justify-center flex-wrap fs-s p-0" style="" />
        <li class="footer__nav-link flex items-center">
    <a href="/">
      Home
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="/++">
      DEV++
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="/pod">
      Podcasts
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="/videos">
      Videos
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="/tags">
      Tags
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="/help">
      DEV Help
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="https://shop.forem.com/">
      Forem Shop
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="/advertise">
      Advertise on DEV
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="/challenges">
      DEV Challenges
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="/showcase">
      DEV Showcase
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="/about">
      About
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="/contact">
      Contact
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="/free-postgres-database-tier">
      Free Postgres Database
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="/guides">
      Guides
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="/software-comparisons">
      Software comparisons
    </a>
    <span class="dot ml-2"></span>
  </li>

    </ul>

    <ul class="footer__nav-links flex gap-2 justify-center flex-wrap fs-s p-0" style="" />
        <li class="footer__nav-link flex items-center">
    <a href="/code-of-conduct">
      Code of Conduct
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="/privacy">
      Privacy Policy
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="/terms">
      Terms of use
    </a>
    <span class="dot ml-2"></span>
  </li>

    </ul>

    <div class="fs-s">
      <p>Built on <a class="c-link c-link--branded" target="_blank" rel="noopener" href="https://www.forem.com">Forem</a>  the <a target="_blank" rel="noopener" class="c-link c-link--branded" href="https://dev.to/t/opensource">open source</a> software that powers <a target="_blank" rel="noopener" class="c-link c-link--branded" href="https://dev.to">DEV</a> and other inclusive communities.</p>
      <p>Made with love and <a target="_blank" rel="noopener" class="c-link c-link--branded" href="https://dev.to/t/rails">Ruby on Rails</a>. DEV Community <span title="copyright">&copy;</span> 2016 - 2024.</p>
    </div>
  </div>
</footer>
<div id="snack-zone"></div>

    
    <div id="cookie-consent"></div>
  <div id="i18n-translations" data-translations="{&quot;en&quot;:{&quot;core&quot;:{&quot;add_comment&quot;:&quot;Add comment&quot;,&quot;beta&quot;:&quot;beta&quot;,&quot;comment&quot;:&quot;Comment&quot;,&quot;copy_link&quot;:&quot;Copy link&quot;,&quot;edit_profile&quot;:&quot;Edit profile&quot;,&quot;follow&quot;:&quot;Follow&quot;,&quot;follow_back&quot;:&quot;Follow back&quot;,&quot;following&quot;:&quot;Following&quot;,&quot;like&quot;:&quot;Like&quot;,&quot;loading&quot;:&quot;loading...&quot;,&quot;reaction&quot;:&quot;Reaction&quot;,&quot;report_abuse&quot;:&quot;Report abuse&quot;,&quot;search&quot;:&quot;Search&quot;,&quot;success_settings&quot;:&quot;Successfully updated settings.&quot;,&quot;counted_organization&quot;:{&quot;one&quot;:&quot;%{count} organization&quot;,&quot;other&quot;:&quot;%{count} organizations&quot;},&quot;counted_user&quot;:{&quot;one&quot;:&quot;%{count} person&quot;,&quot;other&quot;:&quot;%{count} people&quot;},&quot;not_following&quot;:&quot;You&#39;re not following anyone&quot;,&quot;following_everyone&quot;:&quot;You&#39;re following %{details} (everyone)&quot;,&quot;you_are_following&quot;:&quot;You&#39;re following&quot;,&quot;and&quot;:&quot;and&quot;}}}"></div>
  <div id="reaction-category-resources" class="hidden" aria-hidden="true">
    <img data-name="Like" data-slug="like" data-position="1" src="https://assets.dev.to/assets/sparkle-heart-5f9bee3767e18deb1bb725290cb151c25234768a0e9a2bd39370c382d02920cf.svg" width="18" height="18" />
    <img data-name="Unicorn" data-slug="unicorn" data-position="2" src="https://assets.dev.to/assets/multi-unicorn-b44d6f8c23cdd00964192bedc38af3e82463978aa611b4365bd33a0f1f4f3e97.svg" width="18" height="18" />
    <img data-name="Exploding Head" data-slug="exploding_head" data-position="3" src="https://assets.dev.to/assets/exploding-head-daceb38d627e6ae9b730f36a1e390fca556a4289d5a41abb2c35068ad3e2c4b5.svg" width="18" height="18" />
    <img data-name="Raised Hands" data-slug="raised_hands" data-position="4" src="https://assets.dev.to/assets/raised-hands-74b2099fd66a39f2d7eed9305ee0f4553df0eb7b4f11b01b6b1b499973048fe5.svg" width="18" height="18" />
    <img data-name="Fire" data-slug="fire" data-position="5" src="https://assets.dev.to/assets/fire-f60e7a582391810302117f987b22a8ef04a2fe0df7e3258a5f49332df1cec71e.svg" width="18" height="18" />
</div>

  
  </body>
  </html>
